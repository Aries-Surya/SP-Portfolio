"use strict";(self.webpackChunkSP_Portfolio=self.webpackChunkSP_Portfolio||[]).push([[179],{6304:(ht,Se,k)=>{k.d(Se,{Dh:()=>ke,GT:()=>_e,cc:()=>Oe,hO:()=>Ve,on:()=>B,pX:()=>se,xv:()=>me});var f=k(5879),ee=k(120),L=k(2793);ht=k.hmd(ht);const te=["ngOnDestroy"],se=(Fe,vt,pt,ie={})=>new Proxy(Fe,{get:(Ce,ne)=>pt.runOutsideAngular(()=>{var Ae;if(Fe[ne])return!(null===(Ae=ie?.spy)||void 0===Ae)&&Ae.get&&ie.spy.get(ne,Fe[ne]),Fe[ne];if(te.indexOf(ne)>-1)return()=>{};const Le=vt.toPromise().then(Ze=>{const ce=Ze&&Ze[ne];return"function"==typeof ce?ce.bind(Ze):ce&&ce.then?ce.then(It=>pt.run(()=>It)):pt.run(()=>ce)});return new Proxy(()=>{},{get:(Ze,ce)=>Le[ce],apply:(Ze,ce,It)=>Le.then($t=>{var Pr;const si=$t&&$t(...It);return!(null===(Pr=ie?.spy)||void 0===Pr)&&Pr.apply&&ie.spy.apply(ne,It,si),si})})})}),_e=(Fe,vt)=>{vt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(ie=>{Object.defineProperty(Fe.prototype,ie,Object.getOwnPropertyDescriptor(pt.prototype||pt,ie))})})};class we{constructor(vt){return vt}}const ke=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function B(Fe,vt,pt){const Ce="object"==typeof pt&&pt||{};Ce.name=Ce.name||"string"==typeof pt&&pt||"[DEFAULT]";const Ae=ee.Z.apps.filter(Le=>Le&&Le.name===Ce.name)[0]||vt.runOutsideAngular(()=>ee.Z.initializeApp(Fe,Ce));try{JSON.stringify(Fe)!==JSON.stringify(Ae.options)&&z("error",`${Ae.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(Ae)}const z=(Fe,...vt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Fe](...vt)},J={provide:we,useFactory:B,deps:[ke,f.R0b,[new f.FiY,me]]};let Ve=(()=>{class Fe{constructor(pt){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",f.q4F.full,pt.toString())}static initializeApp(pt,ie){return{ngModule:Fe,providers:[{provide:ke,useValue:pt},{provide:me,useValue:ie}]}}}return Fe.\u0275fac=function(pt){return new(pt||Fe)(f.LFG(f.Lbi))},Fe.\u0275mod=f.oAB({type:Fe}),Fe.\u0275inj=f.cJS({providers:[J]}),Fe})();function Oe(Fe,vt,pt,ie,Ce){const[,ne,Ae]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Fe)||[];if(ne)return function Ye(Fe,vt){try{return Fe.toString()===vt.toString()}catch{return Fe===vt}}(Ce,Ae)||(qe("error",`${vt} was already initialized on the ${pt} Firebase App with different settings.${Ne?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:Ce,was:Ae})),ne;{const Le=ie();return globalThis.\u0275AngularfireInstanceCache.push([Fe,Le,Ce]),Le}}const Ne=!!ht.hot,qe=(Fe,...vt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Fe](...vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(ht,Se,k)=>{k.d(Se,{q4:()=>ws,iC:()=>dg,fc:()=>Kc,HU:()=>Xh,vb:()=>Qh,JM:()=>Za});var f=k(5879),ee=k(4097),L=k(5861),te=k(534),se=k(9058),_e=k(4537),we=k(7879);const ke=(E,D)=>D.some(M=>E instanceof M);let me,B;const Ve=new WeakMap,Oe=new WeakMap,Ye=new WeakMap,Ne=new WeakMap,qe=new WeakMap;let pt={get(E,D,M){if(E instanceof IDBTransaction){if("done"===D)return Oe.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Ye.get(E);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Ae(E[D])},set:(E,D,M)=>(E[D]=M,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function ne(E){return"function"==typeof E?function Ce(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Le(this),D),Ae(Ve.get(this))}:function(...D){return Ae(E.apply(Le(this),D))}:function(D,...M){const U=E.call(Le(this),D,...M);return Ye.set(U,D.sort?D.sort():[D]),Ae(U)}}(E):(E instanceof IDBTransaction&&function vt(E){if(Oe.has(E))return;const D=new Promise((M,U)=>{const G=()=>{E.removeEventListener("complete",Y),E.removeEventListener("error",pe),E.removeEventListener("abort",pe)},Y=()=>{M(),G()},pe=()=>{U(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Y),E.addEventListener("error",pe),E.addEventListener("abort",pe)});Oe.set(E,D)}(E),ke(E,function z(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,pt):E)}function Ae(E){if(E instanceof IDBRequest)return function Fe(E){const D=new Promise((M,U)=>{const G=()=>{E.removeEventListener("success",Y),E.removeEventListener("error",pe)},Y=()=>{M(Ae(E.result)),G()},pe=()=>{U(E.error),G()};E.addEventListener("success",Y),E.addEventListener("error",pe)});return D.then(M=>{M instanceof IDBCursor&&Ve.set(M,E)}).catch(()=>{}),qe.set(D,E),D}(E);if(Ne.has(E))return Ne.get(E);const D=ne(E);return D!==E&&(Ne.set(E,D),qe.set(D,E)),D}const Le=E=>qe.get(E),It=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],Pr=new Map;function si(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Pr.get(D))return Pr.get(D);const M=D.replace(/FromIndex$/,""),U=D!==M,G=$t.includes(M);if(!(M in(U?IDBIndex:IDBObjectStore).prototype)||!G&&!It.includes(M))return;const Y=function(){var pe=(0,L.Z)(function*($e,...je){const lt=this.transaction($e,G?"readwrite":"readonly");let Rt=lt.store;return U&&(Rt=Rt.index(je.shift())),(yield Promise.all([Rt[M](...je),G&&lt.done]))[0]});return function(je){return pe.apply(this,arguments)}}();return Pr.set(D,Y),Y}!function ie(E){pt=E(pt)}(E=>({...E,get:(D,M,U)=>si(D,M)||E.get(D,M,U),has:(D,M)=>!!si(D,M)||E.has(D,M)}));const Bs="@firebase/installations",Kn="0.6.4",$o=1e4,js=`w:${Kn}`,le="FIS_v2",ge="https://firebaseinstallations.googleapis.com/v1",Ee=36e5,st=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function Vn({projectId:E}){return`${ge}/projects/${E}/installations`}function gt(E){return{token:E.token,requestStatus:2,expiresIn:Hr(E.expiresIn),creationTime:Date.now()}}function en(E,D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,L.Z)(function*(E,D){const U=(yield D.json()).error;return st.create("request-failed",{requestName:E,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Dn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function fr(E){return ln.apply(this,arguments)}function ln(){return(ln=(0,L.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Hr(E){return Number(E.replace("s","000"))}function Ti(){return(Ti=(0,L.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:M}){const U=Vn(E),G=Dn(E),Y=D.getImmediate({optional:!0});if(Y){const lt=yield Y.getHeartbeatsHeader();lt&&G.append("x-firebase-client",lt)}const $e={method:"POST",headers:G,body:JSON.stringify({fid:M,authVersion:le,appId:E.appId,sdkVersion:js})},je=yield fr(()=>fetch(U,$e));if(je.ok){const lt=yield je.json();return{fid:lt.fid||M,registrationStatus:2,refreshToken:lt.refreshToken,authToken:gt(lt.authToken)}}throw yield en("Create Installation",je)})).apply(this,arguments)}function Di(E){return new Promise(D=>{setTimeout(D,E)})}const mu=/^[cdef][\w-]{21}$/,mt="";function Gt(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const M=function Pt(E){return function go(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return mu.test(M)?M:mt}catch{return mt}}function gn(E){return`${E.appName}!${E.appId}`}const Rn=new Map;function oi(E,D){const M=gn(E);Ta(M,D),function tn(E,D){const M=function jt(){return!ai&&"BroadcastChannel"in self&&(ai=new BroadcastChannel("[Firebase] FID Change"),ai.onmessage=E=>{Ta(E.data.key,E.data.fid)}),ai}();M&&M.postMessage({key:E,fid:D}),function fs(){0===Rn.size&&ai&&(ai.close(),ai=null)}()}(M,D)}function Ta(E,D){const M=Rn.get(E);if(M)for(const U of M)U(D)}let ai=null;const mo="firebase-installations-database",_o=1,xi="firebase-installations-store";let yo=null;function Yi(){return yo||(yo=function Ze(E,D,{blocked:M,upgrade:U,blocking:G,terminated:Y}={}){const pe=indexedDB.open(E,D),$e=Ae(pe);return U&&pe.addEventListener("upgradeneeded",je=>{U(Ae(pe.result),je.oldVersion,je.newVersion,Ae(pe.transaction))}),M&&pe.addEventListener("blocked",()=>M()),$e.then(je=>{Y&&je.addEventListener("close",()=>Y()),G&&je.addEventListener("versionchange",()=>G())}).catch(()=>{}),$e}(mo,_o,{upgrade:(E,D)=>{0===D&&E.createObjectStore(xi)}})),yo}function pr(E,D){return gr.apply(this,arguments)}function gr(){return(gr=(0,L.Z)(function*(E,D){const M=gn(E),G=(yield Yi()).transaction(xi,"readwrite"),Y=G.objectStore(xi),pe=yield Y.get(M);return yield Y.put(D,M),yield G.done,(!pe||pe.fid!==D.fid)&&oi(E,D.fid),D})).apply(this,arguments)}function ui(E){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,L.Z)(function*(E){const D=gn(E),U=(yield Yi()).transaction(xi,"readwrite");yield U.objectStore(xi).delete(D),yield U.done})).apply(this,arguments)}function Ri(E,D){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,L.Z)(function*(E,D){const M=gn(E),G=(yield Yi()).transaction(xi,"readwrite"),Y=G.objectStore(xi),pe=yield Y.get(M),$e=D(pe);return void 0===$e?yield Y.delete(M):yield Y.put($e,M),yield G.done,$e&&(!pe||pe.fid!==$e.fid)&&oi(E,$e.fid),$e})).apply(this,arguments)}function $(E){return j.apply(this,arguments)}function j(){return j=(0,L.Z)(function*(E){let D;const M=yield Ri(E.appConfig,U=>{const G=function Z(E){return xt(E||{fid:Gt(),registrationStatus:0})}(U),Y=function Te(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(st.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function ae(E,D){return et.apply(this,arguments)}(E,M);return{installationEntry:M,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:St(E)}:{installationEntry:D}}(E,G);return D=Y.registrationPromise,Y.installationEntry});return M.fid===mt?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}}),j.apply(this,arguments)}function et(){return et=(0,L.Z)(function*(E,D){try{const M=yield function po(E,D){return Ti.apply(this,arguments)}(E,D);return pr(E.appConfig,M)}catch(M){throw Ge(M)&&409===M.customData.serverCode?yield ui(E.appConfig):yield pr(E.appConfig,{fid:D.fid,registrationStatus:0}),M}}),et.apply(this,arguments)}function St(E){return bt.apply(this,arguments)}function bt(){return(bt=(0,L.Z)(function*(E){let D=yield mr(E.appConfig);for(;1===D.registrationStatus;)yield Di(100),D=yield mr(E.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield $(E);return U||M}return D})).apply(this,arguments)}function mr(E){return Ri(E,D=>{if(!D)throw st.create("installation-not-found");return xt(D)})}function xt(E){return function Bn(E){return 1===E.registrationStatus&&E.registrationTime+$o<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function sr(){return(sr=(0,L.Z)(function*({appConfig:E,heartbeatServiceProvider:D},M){const U=function ps(E,{fid:D}){return`${Vn(E)}/${D}/authTokens:generate`}(E,M),G=function Sn(E,{refreshToken:D}){const M=Dn(E);return M.append("Authorization",function bi(E){return`${le} ${E}`}(D)),M}(E,M),Y=D.getImmediate({optional:!0});if(Y){const lt=yield Y.getHeartbeatsHeader();lt&&G.append("x-firebase-client",lt)}const $e={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:js,appId:E.appId}})},je=yield fr(()=>fetch(U,$e));if(je.ok)return gt(yield je.json());throw yield en("Generate Auth Token",je)})).apply(this,arguments)}function Hs(E){return _u.apply(this,arguments)}function _u(){return _u=(0,L.Z)(function*(E,D=!1){let M;const U=yield Ri(E.appConfig,Y=>{if(!kt(Y))throw st.create("not-registered");const pe=Y.authToken;if(!D&&function nn(E){return 2===E.requestStatus&&!function Qn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+Ee}(E)}(pe))return Y;if(1===pe.requestStatus)return M=function fe(E,D){return re.apply(this,arguments)}(E,D),Y;{if(!navigator.onLine)throw st.create("app-offline");const $e=function Xn(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(Y);return M=function at(E,D){return Ke.apply(this,arguments)}(E,$e),$e}});return M?yield M:U.authToken}),_u.apply(this,arguments)}function re(){return(re=(0,L.Z)(function*(E,D){let M=yield Re(E.appConfig);for(;1===M.authToken.requestStatus;)yield Di(100),M=yield Re(E.appConfig);const U=M.authToken;return 0===U.requestStatus?Hs(E,D):U})).apply(this,arguments)}function Re(E){return Ri(E,D=>{if(!kt(D))throw st.create("not-registered");return function Or(E){return 1===E.requestStatus&&E.requestTime+$o<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ke(){return Ke=(0,L.Z)(function*(E,D){try{const M=yield function Kt(E,D){return sr.apply(this,arguments)}(E,D),U=Object.assign(Object.assign({},D),{authToken:M});return yield pr(E.appConfig,U),M}catch(M){if(!Ge(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield pr(E.appConfig,U)}else yield ui(E.appConfig);throw M}}),Ke.apply(this,arguments)}function kt(E){return void 0!==E&&2===E.registrationStatus}function Da(){return(Da=(0,L.Z)(function*(E){const D=E,{installationEntry:M,registrationPromise:U}=yield $(D);return U?U.catch(console.error):Hs(D).catch(console.error),M.fid})).apply(this,arguments)}function yu(){return yu=(0,L.Z)(function*(E,D=!1){const M=E;return yield function Wl(E){return ki.apply(this,arguments)}(M),(yield Hs(M,D)).token}),yu.apply(this,arguments)}function ki(){return(ki=(0,L.Z)(function*(E){const{registrationPromise:D}=yield $(E);D&&(yield D)})).apply(this,arguments)}function Sa(E){return st.create("missing-app-config-values",{valueName:E})}const Kl="installations",M_=E=>{const D=E.getProvider("app").getImmediate(),M=function ci(E){if(!E||!E.options)throw Sa("App Configuration");if(!E.name)throw Sa("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!E.options[M])throw Sa(M);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,te._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},zo=E=>{const D=E.getProvider("app").getImmediate(),M=(0,te._getProvider)(D,Kl).getImmediate();return{getId:()=>function gs(E){return Da.apply(this,arguments)}(M),getToken:G=>function ql(E){return yu.apply(this,arguments)}(M,G)}};(function zp(){(0,te._registerComponent)(new _e.wA(Kl,M_,"PUBLIC")),(0,te._registerComponent)(new _e.wA("installations-internal",zo,"PRIVATE"))})(),(0,te.registerVersion)(Bs,Kn),(0,te.registerVersion)(Bs,Kn,"esm2017");const wu="@firebase/remote-config",$r=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ct{constructor(D,M,U,G){this.client=D,this.storage=M,this.storageCache=U,this.logger=G}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,G=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${G}.`),G}fetch(D){var M=this;return(0,L.Z)(function*(){const[U,G]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(G&&M.isCachedDataFresh(D.cacheMaxAgeMillis,U))return G;D.eTag=G&&G.eTag;const Y=yield M.client.fetch(D),pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&pe.push(M.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(pe),Y})()}}function An(E=navigator){return E.languages&&E.languages[0]||E.language}class Zr{constructor(D,M,U,G,Y,pe){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=U,this.projectId=G,this.apiKey=Y,this.appId=pe}fetch(D){var M=this;return(0,L.Z)(function*(){const[U,G]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,$e={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},je={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:G,app_id:M.appId,language_code:An()},lt={method:"POST",headers:$e,body:JSON.stringify(je)},Rt=fetch(pe,lt),Mt=new Promise((ji,Ts)=>{D.signal.addEventListener(()=>{const Jh=new Error("The operation was aborted.");Jh.name="AbortError",Ts(Jh)})});let ss;try{yield Promise.race([Rt,Mt]),ss=yield Rt}catch(ji){let Ts="fetch-client-network";throw"AbortError"===ji?.name&&(Ts="fetch-timeout"),$r.create(Ts,{originalErrorMessage:ji?.message})}let sn=ss.status;const Es=ss.headers.get("ETag")||void 0;let bs,Ya;if(200===ss.status){let ji;try{ji=yield ss.json()}catch(Ts){throw $r.create("fetch-client-parse",{originalErrorMessage:Ts?.message})}bs=ji.entries,Ya=ji.state}if("INSTANCE_STATE_UNSPECIFIED"===Ya?sn=500:"NO_CHANGE"===Ya?sn=304:("NO_TEMPLATE"===Ya||"EMPTY_CONFIG"===Ya)&&(bs={}),304!==sn&&200!==sn)throw $r.create("fetch-status",{httpStatus:sn});return{status:sn,eTag:Es,config:bs}})()}}class Eu{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,L.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:U}){var G=this;return(0,L.Z)(function*(){yield function qo(E,D){return new Promise((M,U)=>{const G=Math.max(D-Date.now(),0),Y=setTimeout(M,G);E.addEventListener(()=>{clearTimeout(Y),U($r.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const Y=yield G.client.fetch(D);return yield G.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function xr(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Y))throw Y;const pe={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield G.storage.setThrottleMetadata(pe),G.attemptFetch(D,pe)}})()}}class Pa{constructor(D,M,U,G,Y){this.app=D,this._client=M,this._storageCache=U,this._storage=G,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dt(E,D){const M=E.target.error||void 0;return $r.create(D,{originalErrorMessage:M&&M?.message})}const Rr="app_namespace_store";class Jl{constructor(D,M,U,G=function Pn(){return new Promise((E,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{D(Dt(U,"storage-open"))},M.onsuccess=U=>{E(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(M){D($r.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=D,this.appName=M,this.namespace=U,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((G,Y)=>{const $e=U.transaction([Rr],"readonly").objectStore(Rr),je=M.createCompositeKey(D);try{const lt=$e.get(je);lt.onerror=Rt=>{Y(Dt(Rt,"storage-get"))},lt.onsuccess=Rt=>{const Mt=Rt.target.result;G(Mt?Mt.value:void 0)}}catch(lt){Y($r.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(D,M){var U=this;return(0,L.Z)(function*(){const G=yield U.openDbPromise;return new Promise((Y,pe)=>{const je=G.transaction([Rr],"readwrite").objectStore(Rr),lt=U.createCompositeKey(D);try{const Rt=je.put({compositeKey:lt,value:M});Rt.onerror=Mt=>{pe(Dt(Mt,"storage-set"))},Rt.onsuccess=()=>{Y()}}catch(Rt){pe($r.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(D){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((G,Y)=>{const $e=U.transaction([Rr],"readwrite").objectStore(Rr),je=M.createCompositeKey(D);try{const lt=$e.delete(je);lt.onerror=Rt=>{Y(Dt(Rt,"storage-delete"))},lt.onsuccess=()=>{G()}}catch(lt){Y($r.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Wo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const M=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),G=D.storage.getActiveConfig(),Y=yield M;Y&&(D.lastFetchStatus=Y);const pe=yield U;pe&&(D.lastSuccessfulFetchTimestampMillis=pe);const $e=yield G;$e&&(D.activeConfig=$e)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function wo(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,L.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function _r(){(0,te._registerComponent)(new _e.wA("remote-config",function E(D,{instanceIdentifier:M}){const U=D.getProvider("app").getImmediate(),G=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $r.create("registration-window");if(!(0,se.hl)())throw $r.create("indexed-db-unavailable");const{projectId:Y,apiKey:pe,appId:$e}=U.options;if(!Y)throw $r.create("registration-project-id");if(!pe)throw $r.create("registration-api-key");if(!$e)throw $r.create("registration-app-id");const je=new Jl($e,U.name,M=M||"firebase"),lt=new Wo(je),Rt=new we.Yd(wu);Rt.logLevel=we.in.ERROR;const Mt=new Zr(G,te.SDK_VERSION,M,Y,pe,$e),ss=new Eu(Mt,je),sn=new Ct(ss,je,lt,Rt),Es=new Pa(U,sn,lt,je,Rt);return function qr(E){const D=(0,se.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Es),Es},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(wu,"0.4.4"),(0,te.registerVersion)(wu,"0.4.4","esm2017")}();const Tc=(E,D)=>D.some(M=>E instanceof M);let Zo,Ft;const Dc=new WeakMap,yr=new WeakMap,Ko=new WeakMap,vr=new WeakMap,Io=new WeakMap;let wr={get(E,D,M){if(E instanceof IDBTransaction){if("done"===D)return yr.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Ko.get(E);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Si(E[D])},set:(E,D,M)=>(E[D]=M,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Yo(E){return"function"==typeof E?function Sc(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ma(){return Ft||(Ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(li(this),D),Si(Dc.get(this))}:function(...D){return Si(E.apply(li(this),D))}:function(D,...M){const U=E.call(li(this),D,...M);return Ko.set(U,D.sort?D.sort():[D]),Si(U)}}(E):(E instanceof IDBTransaction&&function Zp(E){if(yr.has(E))return;const D=new Promise((M,U)=>{const G=()=>{E.removeEventListener("complete",Y),E.removeEventListener("error",pe),E.removeEventListener("abort",pe)},Y=()=>{M(),G()},pe=()=>{U(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Y),E.addEventListener("error",pe),E.addEventListener("abort",pe)});yr.set(E,D)}(E),Tc(E,function O_(){return Zo||(Zo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,wr):E)}function Si(E){if(E instanceof IDBRequest)return function Nr(E){const D=new Promise((M,U)=>{const G=()=>{E.removeEventListener("success",Y),E.removeEventListener("error",pe)},Y=()=>{M(Si(E.result)),G()},pe=()=>{U(E.error),G()};E.addEventListener("success",Y),E.addEventListener("error",pe)});return D.then(M=>{M instanceof IDBCursor&&Dc.set(M,E)}).catch(()=>{}),Io.set(D,E),D}(E);if(vr.has(E))return vr.get(E);const D=Yo(E);return D!==E&&(vr.set(E,D),Io.set(D,E)),D}const li=E=>Io.get(E);function Oa(E,D,{blocked:M,upgrade:U,blocking:G,terminated:Y}={}){const pe=indexedDB.open(E,D),$e=Si(pe);return U&&pe.addEventListener("upgradeneeded",je=>{U(Si(pe.result),je.oldVersion,je.newVersion,Si(pe.transaction))}),M&&pe.addEventListener("blocked",()=>M()),$e.then(je=>{Y&&je.addEventListener("close",()=>Y()),G&&je.addEventListener("versionchange",()=>G())}).catch(()=>{}),$e}function xa(E,{blocked:D}={}){const M=indexedDB.deleteDatabase(E);return D&&M.addEventListener("blocked",()=>D()),Si(M).then(()=>{})}const ed=["get","getKey","getAll","getAllKeys","count"],x_=["put","add","delete","clear"],Ac=new Map;function td(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ac.get(D))return Ac.get(D);const M=D.replace(/FromIndex$/,""),U=D!==M,G=x_.includes(M);if(!(M in(U?IDBIndex:IDBObjectStore).prototype)||!G&&!ed.includes(M))return;const Y=function(){var pe=(0,L.Z)(function*($e,...je){const lt=this.transaction($e,G?"readwrite":"readonly");let Rt=lt.store;return U&&(Rt=Rt.index(je.shift())),(yield Promise.all([Rt[M](...je),G&&lt.done]))[0]});return function(je){return pe.apply(this,arguments)}}();return Ac.set(D,Y),Y}!function Kr(E){wr=E(wr)}(E=>({...E,get:(D,M,U)=>td(D,M)||E.get(D,M,U),has:(D,M)=>!!td(D,M)||E.has(D,M)}));const Ah="/firebase-messaging-sw.js",nd="/firebase-cloud-messaging-push-scope",Ph="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",R_="https://fcmregistrations.googleapis.com/v1",Mn="google.c.a.c_id",N_="google.c.a.c_l",Kp="google.c.a.ts";var Mh=function(E){return E.PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",E}(Mh||{});function Ws(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rd(E){const M=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),G=new Uint8Array(U.length);for(let Y=0;Y<U.length;++Y)G[Y]=U.charCodeAt(Y);return G}const Ra="fcm_token_details_db",id=5,bu="fcm_token_object_Store";function Tu(){return Tu=(0,L.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Ra))return null;let D=null;return(yield Oa(Ra,id,{upgrade:(U=(0,L.Z)(function*(G,Y,pe,$e){var je;if(Y<2||!G.objectStoreNames.contains(bu))return;const lt=$e.objectStore(bu),Rt=yield lt.index("fcmSenderId").get(E);if(yield lt.clear(),Rt)if(2===Y){const Mt=Rt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;D={token:Mt.fcmToken,createTime:null!==(je=Mt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Ws(Mt.vapidKey)}}}else if(3===Y){const Mt=Rt;D={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ws(Mt.auth),p256dh:Ws(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ws(Mt.vapidKey)}}}else if(4===Y){const Mt=Rt;D={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ws(Mt.auth),p256dh:Ws(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ws(Mt.vapidKey)}}}}),function(Y,pe,$e,je){return U.apply(this,arguments)})})).close(),yield xa(Ra),yield xa("fcm_vapid_details_db"),yield xa("undefined"),function Qo(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var U}),Tu.apply(this,arguments)}const Pc="firebase-messaging-database",Oh=1,Yr="firebase-messaging-store";let Mc=null;function Oc(){return Mc||(Mc=Oa(Pc,Oh,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Yr)}})),Mc}function sd(E){return Na.apply(this,arguments)}function Na(){return Na=(0,L.Z)(function*(E){const D=Wn(E),U=yield(yield Oc()).transaction(Yr).objectStore(Yr).get(D);if(U)return U;{const G=yield function $0(E){return Tu.apply(this,arguments)}(E.appConfig.senderId);if(G)return yield Qp(E,G),G}}),Na.apply(this,arguments)}function Qp(E,D){return xc.apply(this,arguments)}function xc(){return(xc=(0,L.Z)(function*(E,D){const M=Wn(E),G=(yield Oc()).transaction(Yr,"readwrite");return yield G.objectStore(Yr).put(D,M),yield G.done,D})).apply(this,arguments)}function Xo(){return(Xo=(0,L.Z)(function*(E){const D=Wn(E),U=(yield Oc()).transaction(Yr,"readwrite");yield U.objectStore(Yr).delete(D),yield U.done})).apply(this,arguments)}function Wn({appConfig:E}){return E.appId}const Qr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rc(E,D){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,L.Z)(function*(E,D){const M=yield od(E),U=Jp(D),G={method:"POST",headers:M,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(ka(E.appConfig),G)).json()}catch(pe){throw Qr.create("token-subscribe-failed",{errorInfo:pe?.toString()})}if(Y.error)throw Qr.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Qr.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function xh(){return(xh=(0,L.Z)(function*(E,D){const M=yield od(E),U=Jp(D.subscriptionOptions),G={method:"PATCH",headers:M,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(`${ka(E.appConfig)}/${D.token}`,G)).json()}catch(pe){throw Qr.create("token-update-failed",{errorInfo:pe?.toString()})}if(Y.error)throw Qr.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Qr.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Rh(E,D){return kc.apply(this,arguments)}function kc(){return(kc=(0,L.Z)(function*(E,D){const U={method:"DELETE",headers:yield od(E)};try{const Y=yield(yield fetch(`${ka(E.appConfig)}/${D}`,U)).json();if(Y.error)throw Qr.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(G){throw Qr.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function ka({projectId:E}){return`${R_}/projects/${E}/registrations`}function od(E){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*({appConfig:E,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Jp({p256dh:E,auth:D,endpoint:M,vapidKey:U}){const G={web:{endpoint:M,auth:D,p256dh:E}};return U!==Ph&&(G.web.applicationPubKey=U),G}const eg=6048e5;function Lc(){return Lc=(0,L.Z)(function*(E){const D=yield function Su(E,D){return ad.apply(this,arguments)}(E.swRegistration,E.vapidKey),M={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Ws(D.getKey("auth")),p256dh:Ws(D.getKey("p256dh"))},U=yield sd(E.firebaseDependencies);if(U){if(function Fh(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(U.subscriptionOptions,M))return Date.now()>=U.createTime+eg?function tg(E,D){return La.apply(this,arguments)}(E,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Rh(E.firebaseDependencies,U.token)}catch(G){console.warn(G)}return Lh(E.firebaseDependencies,M)}return Lh(E.firebaseDependencies,M)}),Lc.apply(this,arguments)}function kh(){return kh=(0,L.Z)(function*(E){const D=yield sd(E.firebaseDependencies);D&&(yield Rh(E.firebaseDependencies,D.token),yield function ms(E){return Xo.apply(this,arguments)}(E.firebaseDependencies));const M=yield E.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),kh.apply(this,arguments)}function La(){return La=(0,L.Z)(function*(E,D){try{const M=yield function Du(E,D){return xh.apply(this,arguments)}(E.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Qp(E.firebaseDependencies,U),M}catch(M){throw yield function Nh(E){return kh.apply(this,arguments)}(E),M}}),La.apply(this,arguments)}function Lh(E,D){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,L.Z)(function*(E,D){const U={token:yield Rc(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Qp(E,U),U.token})).apply(this,arguments)}function ad(){return(ad=(0,L.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rd(D)})})).apply(this,arguments)}function Fc(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function ea(E,D){if(!D.notification)return;E.notification={};const M=D.notification.title;M&&(E.notification.title=M);const U=D.notification.body;U&&(E.notification.body=U);const G=D.notification.image;G&&(E.notification.image=G);const Y=D.notification.icon;Y&&(E.notification.icon=Y)}(D,E),function ng(E,D){D.data&&(E.data=D.data)}(D,E),function Vi(E,D){var M,U,G,Y,pe;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;E.fcmOptions={};const $e=null!==(G=null===(U=D.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==G?G:null===(Y=D.notification)||void 0===Y?void 0:Y.click_action;$e&&(E.fcmOptions.link=$e);const je=null===(pe=D.fcmOptions)||void 0===pe?void 0:pe.analytics_label;je&&(E.fcmOptions.analyticsLabel=je)}(D,E),D}function ud(E,D){const M=[];for(let U=0;U<E.length;U++)M.push(E.charAt(U)),U<D.length&&M.push(D.charAt(U));return M.join("")}function Uc(E){return Qr.create("missing-app-config-values",{valueName:E})}ud("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ud("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vc{constructor(D,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function vn(E){if(!E||!E.options)throw Uc("App Configuration Object");if(!E.name)throw Uc("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=E;for(const U of D)if(!M[U])throw Uc(U);return{appName:E.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:G,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Bc(){return(Bc=(0,L.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Ah,{scope:nd}),E.swRegistration.update().catch(()=>{})}catch(D){throw Qr.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Bi(){return(Bi=(0,L.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield function Xr(E){return Bc.apply(this,arguments)}(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Qr.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function Fa(){return(Fa=(0,L.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Ph)})).apply(this,arguments)}function cd(){return cd=(0,L.Z)(function*(E,D){if(!navigator)throw Qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qr.create("permission-blocked");return yield function Zn(E,D){return Fa.apply(this,arguments)}(E,D?.vapidKey),yield function Uh(E,D){return Bi.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function G0(E){return Lc.apply(this,arguments)}(E)}),cd.apply(this,arguments)}function ld(){return(ld=(0,L.Z)(function*(E,D,M){const U=function ig(E){switch(E){case Mh.NOTIFICATION_CLICKED:return"notification_open";case Mh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Mn],message_name:M[N_],message_time:M[Kp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ta(){return ta=(0,L.Z)(function*(E,D){const M=D.data;if(!M.isFirebaseMessaging)return;E.onMessageHandler&&M.messageType===Mh.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Fc(M)):E.onMessageHandler.next(Fc(M)));const U=M.data;(function rg(E){return"object"==typeof E&&!!E&&Mn in E})(U)&&"1"===U["google.c.a.e"]&&(yield function Eo(E,D,M){return ld.apply(this,arguments)}(E,M.messageType,U))}),ta.apply(this,arguments)}const Ua="@firebase/messaging",Tt=E=>{const D=new Vc(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Bh(E,D){return ta.apply(this,arguments)}(D,M)),D},jh=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:U=>function Vh(E,D){return cd.apply(this,arguments)}(D,U)}};function Hh(){return Au.apply(this,arguments)}function Au(){return(Au=(0,L.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sg(){(0,te._registerComponent)(new _e.wA("messaging",Tt,"PUBLIC")),(0,te._registerComponent)(new _e.wA("messaging-internal",jh,"PRIVATE")),(0,te.registerVersion)(Ua,"0.12.4"),(0,te.registerVersion)(Ua,"0.12.4","esm2017")}();const ye="analytics",rn="firebase_id",fd="origin",ag=6e4,or="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pu="https://www.googletagmanager.com/gtag/js",jn=new we.Yd("@firebase/analytics"),Ir=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ia(E){if(!E.startsWith(Pu)){const D=Ir.create("invalid-gtag-resource",{gtagURL:E});return jn.warn(D.message),""}return E}function pd(E){return Promise.all(E.map(D=>D.catch(M=>M)))}function Ba(){return(Ba=(0,L.Z)(function*(E,D,M,U,G,Y){const pe=U[G];try{if(pe)yield D[pe];else{const je=(yield pd(M)).find(lt=>lt.measurementId===G);je&&(yield D[je.appId])}}catch($e){jn.error($e)}E("config",G,Y)})).apply(this,arguments)}function Cr(){return(Cr=(0,L.Z)(function*(E,D,M,U,G){try{let Y=[];if(G&&G.send_to){let pe=G.send_to;Array.isArray(pe)||(pe=[pe]);const $e=yield pd(M);for(const je of pe){const lt=$e.find(Mt=>Mt.measurementId===je),Rt=lt&&D[lt.appId];if(!Rt){Y=[];break}Y.push(Rt)}}0===Y.length&&(Y=Object.values(D)),yield Promise.all(Y),E("event",U,G||{})}catch(Y){jn.error(Y)}})).apply(this,arguments)}const $h=30,Gh=new class sa{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function vd(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function wd(){return(wd=(0,L.Z)(function*(E){var D;const{appId:M,apiKey:U}=E,G={method:"GET",headers:vd(U)},Y=or.replace("{app-id}",M),pe=yield fetch(Y,G);if(200!==pe.status&&304!==pe.status){let $e="";try{const je=yield pe.json();null!==(D=je.error)&&void 0!==D&&D.message&&($e=je.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:$e})}return pe.json()})).apply(this,arguments)}function ja(){return(ja=(0,L.Z)(function*(E,D=Gh,M){const{appId:U,apiKey:G,measurementId:Y}=E.options;if(!U)throw Ir.create("no-app-id");if(!G){if(Y)return{measurementId:Y,appId:U};throw Ir.create("no-api-key")}const pe=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new lg;return setTimeout((0,L.Z)(function*(){$e.abort()}),void 0!==M?M:ag),qh({appId:U,apiKey:G,measurementId:Y},pe,$e,D)})).apply(this,arguments)}function qh(E,D,M){return Id.apply(this,arguments)}function Id(){return Id=(0,L.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:M},U,G=Gh){var Y;const{appId:pe,measurementId:$e}=E;try{yield function cg(E,D){return new Promise((M,U)=>{const G=Math.max(D-Date.now(),0),Y=setTimeout(M,G);E.addEventListener(()=>{clearTimeout(Y),U(Ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(U,D)}catch(je){if($e)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:pe,measurementId:$e};throw je}try{const je=yield function L_(E){return wd.apply(this,arguments)}(E);return G.deleteThrottleMetadata(pe),je}catch(je){const lt=je;if(!function Hc(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(lt)){if(G.deleteThrottleMetadata(pe),$e)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:pe,measurementId:$e};throw je}const Rt=503===Number(null===(Y=lt?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,se.$s)(M,G.intervalMillis,$h):(0,se.$s)(M,G.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+Rt,backoffCount:M+1};return G.setThrottleMetadata(pe,Mt),jn.debug(`Calling attemptFetch again in ${Rt} millis`),qh(E,Mt,U,G)}}),Id.apply(this,arguments)}class lg{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let $c,To;function bo(){return(bo=(0,L.Z)(function*(E,D,M,U,G){if(G&&G.global)E("event",M,U);else{const Y=yield D;E("event",M,Object.assign(Object.assign({},U),{send_to:Y}))}})).apply(this,arguments)}function ar(){return(ar=(0,L.Z)(function*(){if(!(0,se.hl)())return jn.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return jn.warn(Ir.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function oa(){return oa=(0,L.Z)(function*(E,D,M,U,G,Y,pe){var $e;const je=function zh(E){return ja.apply(this,arguments)}(E);je.then(sn=>{M[sn.measurementId]=sn.appId,E.options.measurementId&&sn.measurementId!==E.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sn=>jn.error(sn)),D.push(je);const lt=function On(){return ar.apply(this,arguments)}().then(sn=>{if(sn)return U.getId()}),[Rt,Mt]=yield Promise.all([je,lt]);(function yd(E){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(Pu)&&M.src.includes(E))return M;return null})(Y)||function Mu(E,D){const M=function gd(E,D){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(E,D)),M}("firebase-js-sdk-policy",{createScriptURL:ia}),U=document.createElement("script"),G=`${Pu}?l=${E}&id=${D}`;U.src=M?M?.createScriptURL(G):G,U.async=!0,document.head.appendChild(U)}(Y,Rt.measurementId),To&&(G("consent","default",To),function Et(E){To=E}(void 0)),G("js",new Date);const ss=null!==($e=pe?.config)&&void 0!==$e?$e:{};return ss[fd]="firebase",ss.update=!0,null!=Mt&&(ss[rn]=Mt),G("config",Rt.measurementId,ss),$c&&(G("set",$c),function Ks(E){$c=E}(void 0)),Rt.measurementId}),oa.apply(this,arguments)}class kr{constructor(D){this.app=D}_delete(){return delete Lr[this.app.options.appId],Promise.resolve()}}let Lr={},$a=[];const Ou={};let Ed,ys,aa="dataLayer",on=!1;function ur(E,D,M){!function xu(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((U,G)=>`(${G+1}) ${U}`).join(" "),M=Ir.create("invalid-analytics-context",{errorInfo:D});jn.warn(M.message)}}();const U=E.options.appId;if(!U)throw Ir.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Ir.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lr[U])throw Ir.create("already-exists",{id:U});if(!on){!function di(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(aa);const{wrappedGtag:Y,gtagCore:pe}=function _d(E,D,M,U,G){let Y=function(...pe){window[U].push(arguments)};return window[G]&&"function"==typeof window[G]&&(Y=window[G]),window[G]=function md(E,D,M,U){function Y(){return Y=(0,L.Z)(function*(pe,...$e){try{if("event"===pe){const[je,lt]=$e;yield function Zs(E,D,M,U,G){return Cr.apply(this,arguments)}(E,D,M,je,lt)}else if("config"===pe){const[je,lt]=$e;yield function Xi(E,D,M,U,G,Y){return Ba.apply(this,arguments)}(E,D,M,U,je,lt)}else if("consent"===pe){const[je]=$e;E("consent","update",je)}else if("get"===pe){const[je,lt,Rt]=$e;E("get",je,lt,Rt)}else if("set"===pe){const[je]=$e;E("set",je)}else E(pe,...$e)}catch(je){jn.error(je)}}),Y.apply(this,arguments)}return function G(pe){return Y.apply(this,arguments)}}(Y,E,D,M),{gtagCore:Y,wrappedGtag:window[G]}}(Lr,$a,Ou,aa,"gtag");ys=Y,Ed=pe,on=!0}return Lr[U]=function tr(E,D,M,U,G,Y,pe){return oa.apply(this,arguments)}(E,$a,Ou,D,Ed,aa,M),new kr(E)}function N(){return cr.apply(this,arguments)}function cr(){return(cr=(0,L.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const ts="@firebase/analytics";!function Yh(){(0,te._registerComponent)(new _e.wA(ye,(D,{options:M})=>ur(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,te._registerComponent)(new _e.wA("analytics-internal",function E(D){try{const M=D.getProvider(ye).getImmediate();return{logEvent:(U,G,Y)=>function es(E,D,M,U){E=(0,se.m9)(E),function hi(E,D,M,U,G){return bo.apply(this,arguments)}(ys,Lr[E.app.options.appId],D,M,U).catch(G=>jn.error(G))}(M,U,G,Y)}}catch(M){throw Ir.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,te.registerVersion)(ts,"0.10.0"),(0,te.registerVersion)(ts,"0.10.0","esm2017")}();var So=k(1954),Td=k(2631);const br=new class Nu extends Td.v{}(class Ao extends So.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,M,U):(D.flush(this),0)}});var ns=k(6321),vs=k(9397),nr=k(3093),ku=k(5137);const ws=new f.GfV("7.6.1"),Wc="__angularfire_symbol__analyticsIsSupportedValue",wn="__angularfire_symbol__analyticsIsSupported",rs="__angularfire_symbol__remoteConfigIsSupportedValue",is="__angularfire_symbol__remoteConfigIsSupported",za="__angularfire_symbol__messagingIsSupportedValue",Po="__angularfire_symbol__messagingIsSupported";function Za(E,D,M){if(D){if(1===D.length)return D[0];const Y=D.filter(pe=>pe.app===M);if(1===Y.length)return Y[0]}return M.container.getProvider(E).getImmediate({optional:!0})}globalThis[wn]||(globalThis[wn]=N().then(E=>globalThis[Wc]=E).catch(()=>globalThis[Wc]=!1)),globalThis[Po]||(globalThis[Po]=Hh().then(E=>globalThis[za]=E).catch(()=>globalThis[za]=!1)),globalThis[is]||(globalThis[is]=wo().then(E=>globalThis[rs]=E).catch(()=>globalThis[rs]=!1));const Qh=(E,D)=>{const M=D?[D]:(0,ee.C6)(),U=[];return M.forEach(G=>{G.container.getProvider(E).instances.forEach(pe=>{U.includes(pe)||U.push(pe)})}),U};function Is(){}class ca{constructor(D,M=br){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,U){const G=this.zone;return this.delegate.schedule(function(pe){G.runGuarded(()=>{D.apply(this,[pe])})},M,U)}}class B_{constructor(D){this.zone=D,this.task=null}call(D,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Is,{},Is,Is)),M.pipe((0,vs.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xh=(()=>{class E{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ca(Zone.current)),this.insideAngular=M.run(()=>new ca(Zone.current,ns.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(M){return new(M||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function la(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Kc(E){return E.pipe((0,nr.Q)(la().outsideAngular))}function dg(E){return la(),function Cs(E){return function(M){return(M=M.lift(new B_(E.ngZone))).pipe((0,ku.R)(E.outsideAngular),(0,nr.Q)(E.insideAngular))}}(la())(E)}},9058:(ht,Se,k)=>{k.d(Se,{$s:()=>ui,BH:()=>ne,DV:()=>Hr,Dv:()=>Ta,G6:()=>js,GJ:()=>fr,L:()=>me,LL:()=>Pe,Pz:()=>Ce,Sg:()=>Ae,UG:()=>ce,UI:()=>po,US:()=>_e,Wj:()=>jt,Wl:()=>gt,Yr:()=>$o,ZB:()=>J,ZR:()=>De,aH:()=>ie,b$:()=>Pr,cI:()=>Vn,dS:()=>mo,eu:()=>ge,g5:()=>L,gK:()=>tn,gQ:()=>Pt,h$:()=>ke,hl:()=>le,hu:()=>ee,jU:()=>It,lb:()=>fs,m9:()=>Ni,ne:()=>gn,p$:()=>z,pd:()=>Gt,r3:()=>ln,ru:()=>$t,tV:()=>B,uI:()=>Ze,ug:()=>_o,vZ:()=>Ti,w1:()=>Bs,w9:()=>Sn,xO:()=>mu,xb:()=>bi,z$:()=>Le,zI:()=>Ee,zd:()=>mt});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function($,j){if(!$)throw L(j)},L=function($){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},te=function($){const j=[];let Z=0;for(let Te=0;Te<$.length;Te++){let ae=$.charCodeAt(Te);ae<128?j[Z++]=ae:ae<2048?(j[Z++]=ae>>6|192,j[Z++]=63&ae|128):55296==(64512&ae)&&Te+1<$.length&&56320==(64512&$.charCodeAt(Te+1))?(ae=65536+((1023&ae)<<10)+(1023&$.charCodeAt(++Te)),j[Z++]=ae>>18|240,j[Z++]=ae>>12&63|128,j[Z++]=ae>>6&63|128,j[Z++]=63&ae|128):(j[Z++]=ae>>12|224,j[Z++]=ae>>6&63|128,j[Z++]=63&ae|128)}return j},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let ae=0;ae<$.length;ae+=3){const et=$[ae],St=ae+1<$.length,bt=St?$[ae+1]:0,mr=ae+2<$.length,xt=mr?$[ae+2]:0;let sr=(15&bt)<<2|xt>>6,ps=63&xt;mr||(ps=64,St||(sr=64)),Te.push(Z[et>>2],Z[(3&et)<<4|bt>>4],Z[sr],Z[ps])}return Te.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(te($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let Z=0,Te=0;for(;Z<$.length;){const ae=$[Z++];if(ae<128)j[Te++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const et=$[Z++];j[Te++]=String.fromCharCode((31&ae)<<6|63&et)}else if(ae>239&&ae<365){const mr=((7&ae)<<18|(63&$[Z++])<<12|(63&$[Z++])<<6|63&$[Z++])-65536;j[Te++]=String.fromCharCode(55296+(mr>>10)),j[Te++]=String.fromCharCode(56320+(1023&mr))}else{const et=$[Z++],St=$[Z++];j[Te++]=String.fromCharCode((15&ae)<<12|(63&et)<<6|63&St)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const Z=j?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let ae=0;ae<$.length;){const et=Z[$.charAt(ae++)],bt=ae<$.length?Z[$.charAt(ae)]:0;++ae;const xt=ae<$.length?Z[$.charAt(ae)]:64;++ae;const Kt=ae<$.length?Z[$.charAt(ae)]:64;if(++ae,null==et||null==bt||null==xt||null==Kt)throw new we;Te.push(et<<2|bt>>4),64!==xt&&(Te.push(bt<<4&240|xt>>2),64!==Kt&&Te.push(xt<<6&192|Kt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ke=function($){const j=te($);return _e.encodeByteArray(j,!0)},me=function($){return ke($).replace(/\./g,"")},B=function($){try{return _e.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function z($){return J(void 0,$)}function J($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const Z in j)!j.hasOwnProperty(Z)||!Ve(Z)||($[Z]=J($[Z],j[Z]));return $}function Ve($){return"__proto__"!==$}const Fe=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=$&&B($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ie=()=>{var $;return null===($=Fe())||void 0===$?void 0:$.config},Ce=$=>{var j;return null===(j=Fe())||void 0===j?void 0:j[`_${$}`]};class ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Z)=>{this.resolve=j,this.reject=Z})}wrapCallback(j){return(Z,Te)=>{Z?this.reject(Z):this.resolve(Te),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Z):j(Z,Te))}}}function Ae($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=j||"demo-project",ae=$.iat||0,et=$.sub||$.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:ae,exp:ae+3600,auth_time:ae,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(St)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ce(){var $;const j=null===($=Fe())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function It(){return"object"==typeof self&&self.self===self}function $t(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Pr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bs(){const $=Le();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function $o(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function js(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise(($,j)=>{try{let Z=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(Te);ae.onsuccess=()=>{ae.result.close(),Z||self.indexedDB.deleteDatabase(Te),$(!0)},ae.onupgradeneeded=()=>{Z=!1},ae.onerror=()=>{var et;j((null===(et=ae.error)||void 0===et?void 0:et.message)||"")}}catch(Z){j(Z)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class De extends Error{constructor(j,Z,Te){super(Z),this.code=j,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,Z,Te){this.service=j,this.serviceName=Z,this.errors=Te}create(j,...Z){const Te=Z[0]||{},ae=`${this.service}/${j}`,et=this.errors[j],St=et?function st($,j){return $.replace(Ge,(Z,Te)=>{const ae=j[Te];return null!=ae?String(ae):`<${Te}?>`})}(et,Te):"Error";return new De(ae,`${this.serviceName}: ${St} (${ae}).`,Te)}}const Ge=/\{\$([^}]+)}/g;function Vn($){return JSON.parse($)}function gt($){return JSON.stringify($)}const en=function($){let j={},Z={},Te={},ae="";try{const et=$.split(".");j=Vn(B(et[0])||""),Z=Vn(B(et[1])||""),ae=et[2],Te=Z.d||{},delete Z.d}catch{}return{header:j,claims:Z,data:Te,signature:ae}},Sn=function($){const Z=en($).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},fr=function($){const j=en($).claims;return"object"==typeof j&&!0===j.admin};function ln($,j){return Object.prototype.hasOwnProperty.call($,j)}function Hr($,j){if(Object.prototype.hasOwnProperty.call($,j))return $[j]}function bi($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function po($,j,Z){const Te={};for(const ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(Te[ae]=j.call(Z,$[ae],ae,$));return Te}function Ti($,j){if($===j)return!0;const Z=Object.keys($),Te=Object.keys(j);for(const ae of Z){if(!Te.includes(ae))return!1;const et=$[ae],St=j[ae];if(Di(et)&&Di(St)){if(!Ti(et,St))return!1}else if(et!==St)return!1}for(const ae of Te)if(!Z.includes(ae))return!1;return!0}function Di($){return null!==$&&"object"==typeof $}function mu($){const j=[];for(const[Z,Te]of Object.entries($))Array.isArray(Te)?Te.forEach(ae=>{j.push(encodeURIComponent(Z)+"="+encodeURIComponent(ae))}):j.push(encodeURIComponent(Z)+"="+encodeURIComponent(Te));return j.length?"&"+j.join("&"):""}function mt($){const j={};return $.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[ae,et]=Te.split("=");j[decodeURIComponent(ae)]=decodeURIComponent(et)}}),j}function Gt($){const j=$.indexOf("?");if(!j)return"";const Z=$.indexOf("#",j);return $.substring(j,Z>0?Z:void 0)}class Pt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,Z){Z||(Z=0);const Te=this.W_;if("string"==typeof j)for(let Kt=0;Kt<16;Kt++)Te[Kt]=j.charCodeAt(Z)<<24|j.charCodeAt(Z+1)<<16|j.charCodeAt(Z+2)<<8|j.charCodeAt(Z+3),Z+=4;else for(let Kt=0;Kt<16;Kt++)Te[Kt]=j[Z]<<24|j[Z+1]<<16|j[Z+2]<<8|j[Z+3],Z+=4;for(let Kt=16;Kt<80;Kt++){const sr=Te[Kt-3]^Te[Kt-8]^Te[Kt-14]^Te[Kt-16];Te[Kt]=4294967295&(sr<<1|sr>>>31)}let xt,Bn,ae=this.chain_[0],et=this.chain_[1],St=this.chain_[2],bt=this.chain_[3],mr=this.chain_[4];for(let Kt=0;Kt<80;Kt++){Kt<40?Kt<20?(xt=bt^et&(St^bt),Bn=1518500249):(xt=et^St^bt,Bn=1859775393):Kt<60?(xt=et&St|bt&(et|St),Bn=2400959708):(xt=et^St^bt,Bn=3395469782);const sr=(ae<<5|ae>>>27)+xt+mr+Bn+Te[Kt]&4294967295;mr=bt,bt=St,St=4294967295&(et<<30|et>>>2),et=ae,ae=sr}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+et&4294967295,this.chain_[2]=this.chain_[2]+St&4294967295,this.chain_[3]=this.chain_[3]+bt&4294967295,this.chain_[4]=this.chain_[4]+mr&4294967295}update(j,Z){if(null==j)return;void 0===Z&&(Z=j.length);const Te=Z-this.blockSize;let ae=0;const et=this.buf_;let St=this.inbuf_;for(;ae<Z;){if(0===St)for(;ae<=Te;)this.compress_(j,ae),ae+=this.blockSize;if("string"==typeof j){for(;ae<Z;)if(et[St]=j.charCodeAt(ae),++St,++ae,St===this.blockSize){this.compress_(et),St=0;break}}else for(;ae<Z;)if(et[St]=j[ae],++St,++ae,St===this.blockSize){this.compress_(et),St=0;break}}this.inbuf_=St,this.total_+=Z}digest(){const j=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&Z,Z/=256;this.compress_(this.buf_);let Te=0;for(let ae=0;ae<5;ae++)for(let et=24;et>=0;et-=8)j[Te]=this.chain_[ae]>>et&255,++Te;return j}}function gn($,j){const Z=new Rn($,j);return Z.subscribe.bind(Z)}class Rn{constructor(j,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{j(this)}).catch(Te=>{this.error(Te)})}next(j){this.forEachObserver(Z=>{Z.next(j)})}error(j){this.forEachObserver(Z=>{Z.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Z,Te){let ae;if(void 0===j&&void 0===Z&&void 0===Te)throw new Error("Missing Observer.");ae=function an($,j){if("object"!=typeof $||null===$)return!1;for(const Z of j)if(Z in $&&"function"==typeof $[Z])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Z,complete:Te},void 0===ae.next&&(ae.next=Mr),void 0===ae.error&&(ae.error=Mr),void 0===ae.complete&&(ae.complete=Mr);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),et}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,j)}sendOne(j,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Z(this.observers[j])}catch(Te){typeof console<"u"&&console.error&&console.error(Te)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}const Ta=function($,j,Z,Te){let ae;if(Te<j?ae="at least "+j:Te>Z&&(ae=0===Z?"none":"no more than "+Z),ae)throw new Error($+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+ae+".")};function tn($,j){return`${$} failed: ${j} argument `}function jt($,j,Z,Te){if((!Te||Z)&&"function"!=typeof Z)throw new Error(tn($,j)+"must be a valid function.")}function fs($,j,Z,Te){if((!Te||Z)&&("object"!=typeof Z||null===Z))throw new Error(tn($,j)+"must be a valid context object.")}const mo=function($){const j=[];let Z=0;for(let Te=0;Te<$.length;Te++){let ae=$.charCodeAt(Te);if(ae>=55296&&ae<=56319){const et=ae-55296;Te++,ee(Te<$.length,"Surrogate pair missing trail surrogate."),ae=65536+(et<<10)+($.charCodeAt(Te)-56320)}ae<128?j[Z++]=ae:ae<2048?(j[Z++]=ae>>6|192,j[Z++]=63&ae|128):ae<65536?(j[Z++]=ae>>12|224,j[Z++]=ae>>6&63|128,j[Z++]=63&ae|128):(j[Z++]=ae>>18|240,j[Z++]=ae>>12&63|128,j[Z++]=ae>>6&63|128,j[Z++]=63&ae|128)}return j},_o=function($){let j=0;for(let Z=0;Z<$.length;Z++){const Te=$.charCodeAt(Z);Te<128?j++:Te<2048?j+=2:Te>=55296&&Te<=56319?(j+=4,Z++):j+=3}return j},yo=1e3,Yi=2,pr=144e5,gr=.5;function ui($,j=yo,Z=Yi){const Te=j*Math.pow(Z,$),ae=Math.round(gr*Te*(Math.random()-.5)*2);return Math.min(pr,Te+ae)}function Ni($){return $&&$._delegate?$._delegate:$}},6062:(ht,Se,k)=>{var f=k(5879);let ee=null;function L(){return ee}class se{}const _e=new f.OlP("DocumentToken");let we=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(me)},providedIn:"platform"}),e})();const ke=new f.OlP("Location Initialized");let me=(()=>{var n;class e extends we{constructor(){super(),this._doc=(0,f.f3M)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(r){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ye)},providedIn:"root"}),e})();const Oe=new f.OlP("appBaseHref");let Ye=(()=>{var n;class e extends Ve{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return B(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+J(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,c){const h=this.prepareExternalUrl(o+J(c));this._platformLocation.pushState(r,i,h)}replaceState(r,i,o,c){const h=this.prepareExternalUrl(o+J(c));this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(we),f.LFG(Oe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Ne=(()=>{var n;class e extends Ve{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=B(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,c){let h=this.prepareExternalUrl(o+J(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,i,h)}replaceState(r,i,o,c){let h=this.prepareExternalUrl(o+J(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(we),f.LFG(Oe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})(),qe=(()=>{var n;class e{constructor(r){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function ie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(pt(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+J(i))}normalize(r){return e.stripTrailingSlash(function vt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+J(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+J(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(n=e).normalizeQueryParams=J,n.joinWithSlash=B,n.stripTrailingSlash=z,n.\u0275fac=function(r){return new(r||n)(f.LFG(Ve))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Fe(){return new qe((0,f.LFG)(Ve))}()},providedIn:"root"}),e})();function pt(n){return n.replace(/\/index.html$/,"")}let kn=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();function Gs(n){return"server"===n}let _r=(()=>{var n;class e{}return(n=e).\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new zs((0,f.LFG)(_e),window)}),e})();class zs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Fh extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fc extends Fh{static makeCurrent(){!function te(n){ee||(ee=n)}(new Fc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ng(){return ea=ea||document.querySelector("base"),ea?ea.getAttribute("href"):null}();return null==t?null:function rg(n){Vi=Vi||document.createElement("a"),Vi.setAttribute("href",n);const e=Vi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function gs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Vi,ea=null,vn=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const Uc=new f.OlP("EventManagerPlugins");let Vc=(()=>{var n;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(c=>c.supports(r)),!i)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Uc),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();class Xr{constructor(e){this._doc=e}}const Bc="ng-app-id";let Uh=(()=>{var n;class e{constructor(r,i,o,c={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gs(c),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${Bc}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const c=o.get(r);return c.usage+=i,c.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,c=o?.get(i);if(c?.parentNode===r)return o.delete(i),c.removeAttribute(Bc),c;{const h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=i,this.platformIsServer&&h.setAttribute(Bc,this.appId),h}}addStyleToHost(r,i){const o=this.getStyleElement(r,i);r.appendChild(o);const c=this.styleRef,h=c.get(i)?.elements;h?h.push(o):c.set(i,{elements:[o],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(_e),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const Bi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zn=/%COMP%/g,ld=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ta(n,e){return e.map(t=>t.replace(Zn,n))}let Ua=(()=>{var n;class e{constructor(r,i,o,c,h,_,y,b=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=c,this.doc=h,this.platformId=_,this.ngZone=y,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=Gs(_),this.defaultRenderer=new jc(r,h,y,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===f.ifc.ShadowDom&&(i={...i,encapsulation:f.ifc.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof og?o.applyToHost(r):o instanceof Au&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let c=o.get(i.id);if(!c){const h=this.doc,_=this.ngZone,y=this.eventManager,b=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,R=this.platformIsServer;switch(i.encapsulation){case f.ifc.Emulated:c=new og(y,b,i,this.appId,S,h,_,R);break;case f.ifc.ShadowDom:return new Hh(y,b,r,i,h,_,this.nonce,R);default:c=new Au(y,b,i,S,h,_,R)}o.set(i.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Vc),f.LFG(Uh),f.LFG(f.AFp),f.LFG(ld),f.LFG(_e),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();class jc{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Bi[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Bi[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Bi[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function sg(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Hh extends jc{constructor(e,t,r,i,o,c,h,_){super(e,o,c,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=ta(i.id,i.styles);for(const b of y){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Au extends jc{constructor(e,t,r,i,o,c,h,_){super(e,o,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=_?ta(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class og extends Au{constructor(e,t,r,i,o,c,h,_){const y=i+"-"+r.id;super(e,t,r,o,c,h,_,y),this.contentAttr=function ig(n){return"_ngcontent-%COMP%".replace(Zn,n)}(y),this.hostAttr=function Bh(n){return"_nghost-%COMP%".replace(Zn,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let na=(()=>{var n;class e extends Xr{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const Va=["alt","control","meta","shift"],ra={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},k_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dd=(()=>{var n;class e extends Xr{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const c=e.parseEventName(i),h=e.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(r,c.domEventName,h))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const c=e._normalizeKey(i.pop());let h="",_=i.indexOf("code");if(_>-1&&(i.splice(_,1),h="code."),Va.forEach(b=>{const S=i.indexOf(b);S>-1&&(i.splice(S,1),h+=b+".")}),h+=c,0!=i.length||0===c.length)return null;const y={};return y.domEventName=o,y.fullKey=h,y}static matchEventFullKeyCode(r,i){let o=ra[r.key]||r.key,c="";return i.indexOf("code.")>-1&&(o=r.code,c="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Va.forEach(h=>{h!==o&&(0,k_[h])(r)&&(c+=h+".")}),c+=o,c===i)}static eventCallback(r,i,o){return c=>{e.matchEventFullKeyCode(c,r)&&o.runGuarded(()=>i(c))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();const jn=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function fd(){Fc.makeCurrent()},multi:!0},{provide:_e,useFactory:function or(){return(0,f.RDi)(document),document},deps:[]}]),Qi=new f.OlP(""),Ir=[{provide:f.rWj,useClass:class ud{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new f.vHH(5103,!1);return o},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(_){c=c||_,o--,0==o&&r(c)};i.forEach(_=>{_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],ia=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ag(){return new f.qLn},deps:[]},{provide:Uc,useClass:na,multi:!0,deps:[_e,f.R0b,f.Lbi]},{provide:Uc,useClass:dd,multi:!0,deps:[_e]},Ua,Uh,Vc,{provide:f.FYo,useExisting:Ua},{provide:class Ui{},useClass:vn,deps:[]},[]];let pd=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:f.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Qi,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...ia,...Ir],imports:[kn,f.hGG]}),e})(),Ba=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Xi(){return new Ba((0,f.LFG)(_e))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;const Ha_firebaseConfig={apiKey:"AIzaSyBOLcQFXneoQjaUmNDJBsiYDTRCiwb1bB4",authDomain:"sp-portfolio-81.firebaseapp.com",databaseURL:"https",projectId:"sp-portfolio-81",storageBucket:"sp-portfolio-81.appspot.com",messagingSenderId:"G-ZMJMNE9CQB",appId:"1:464790432621:web:8e1d0cc2658a0b59b10864"};var er=k(6304),_s=k(6321),Er=k(5592),ft=k(2096),To=k(3019),Et=k(7398),Ks=k(3020),On=k(4664),ar=k(9360),tr=k(8251);function kr(n,e){return(0,ar.e)(function oa(n,e,t,r,i){return(o,c)=>{let h=t,_=e,y=0;o.subscribe((0,tr.x)(c,b=>{const S=y++;_=h?n(_,b,S):(h=!0,b),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}var Lr=k(3997),$a=k(4829),Ou=k(2737),aa=k(2420),Do=k(4564),on=k(2793),xu=(k(8977),k(3106)),ur=k(4537),K=k(5861),fn=k(534),N=k(9058),cr=k(7879);const Gc="@firebase/database";let Ga="";function bd(n){Ga=n}class Ji{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Kh{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const zc=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ji(e)}}catch{}return new Kh},es=zc("localStorage"),qc=zc("sessionStorage"),ts=new cr.Yd("@firebase/database"),Ru=function(){let n=1;return function(){return n++}}(),Yh=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},So=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=So.apply(null,r):e+="object"==typeof r?(0,N.Wl)(r):r,e+=" "}return e};let Ao=null,Td=!0;const Nu=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ts.logLevel=cr.in.VERBOSE,Ao=ts.log.bind(ts),e&&qc.set("logging_enabled",!0)):"function"==typeof n?Ao=n:(Ao=null,qc.remove("logging_enabled"))},br=function(...n){if(!0===Td&&(Td=!1,null===Ao&&!0===qc.get("logging_enabled")&&Nu(!0)),Ao){const e=So.apply(null,n);Ao(e)}},ua=function(n){return function(...e){br(n,...e)}},ns=function(...n){const e="FIREBASE INTERNAL ERROR: "+So(...n);ts.error(e)},vs=function(...n){const e=`FIREBASE FATAL ERROR: ${So(...n)}`;throw ts.error(e),new Error(e)},nr=function(...n){const e="FIREBASE WARNING: "+So(...n);ts.warn(e)},ws=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wn="[MIN_NAME]",rs="[MAX_NAME]",is=function(n,e){if(n===e)return 0;if(n===wn||e===rs)return-1;if(e===wn||n===rs)return 1;{const t=la(n),r=la(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},za=function(n,e){return n===e?0:n<e?-1:1},Po=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Wl)(e))},qa=function(n){if("object"!=typeof n||null===n)return(0,N.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Wl)(e[r]),t+=":",t+=qa(n[e[r]]);return t+="}",t},Zc=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Wa=function(n){(0,N.hu)(!ws(n),"Invalid JSON number");const r=1023;let i,o,c,h,_;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(_=52;_;_-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const b=y.join("");let S="";for(_=0;_<64;_+=8){let R=parseInt(b.substr(_,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},ca=new RegExp("^-?(0*)\\d{1,10}$"),la=function(n){if(ca.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Mo=function(n){try{n()}catch(e){setTimeout(()=>{throw nr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Kc=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class q0{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dg{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(br("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nr(e)}}let Cs=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const U=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$e="websocket",je="long_polling";class lt{constructor(e,t,r,i,o=!1,c="",h=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=es.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&es.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Mt(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===$e)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==je)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Rt(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xn(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class ss{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const sn={},Es={};function bs(n){const e=n.toString();return sn[e]||(sn[e]=new ss),sn[e]}class ji{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fu{constructor(e,t,r,i,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ua(e),this.stats_=bs(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Mt(t,je,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ji(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new da((...o)=>{const[c,h,_,y,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&U.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fu.forceAllow_=!0}static forceDisallow(){Fu.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Fu.forceAllow_&&(Fu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=Zc(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class da{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ru(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=da.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){br("frame writing exception"),h.stack&&br(h.stack),br(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||br("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{br("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Xc=null;typeof MozWebSocket<"u"?Xc=MozWebSocket:typeof WebSocket<"u"&&(Xc=WebSocket);let Md=(()=>{class n{constructor(t,r,i,o,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ua(this.connId),this.stats_=bs(r),this.connURL=n.connectionURL_(r,h,_,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const h={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&U.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),Mt(t,$e,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,es.set("previous_websocket_failure",!0);try{let i;if((0,N.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Ga}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Xc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Xc&&!n.forceDisallow_}static previouslyFailed(){return es.isInMemoryStorage||!0===es.get("previous_websocket_failure")}markConnectionHealthy(){es.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Zc(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Od=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fu,Md]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Md&&Md.isAvailable();let i=r&&!Md.previouslyFailed();if(t.webSocketOnly&&(r||nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Md];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class rf{constructor(e,t,r,i,o,c,h,_,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ua("c:"+this.id+":"),this.transportManager_=new Od(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Kc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Po("t",e),r=Po("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Po("t",e),r=Po("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Po("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ns("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ns("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&nr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Kc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(es.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vg{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class wg{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Jc extends wg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jc}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function dn(){return new mn("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ha(n){return n.pieces_.length-n.pieceNum_}function pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new mn(n.pieces_,e)}function el(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Vu(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new mn(e,0)}function _n(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new mn(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function fi(n,e){const t=Qt(n),r=Qt(e);if(null===t)return e;if(t===r)return fi(pn(n),pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function af(n,e){const t=tl(n,0),r=tl(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=is(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function nl(n,e){if(ha(n)!==ha(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ai(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ha(n)>ha(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class K_{constructor(e,t){this.errorPrefix_=t,this.parts_=tl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);uf(this)}}function uf(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fa(n))}function fa(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xd extends wg{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xd}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Rd=1e3;let Pi,Qa=(()=>{class n extends vg{constructor(t,r,i,o,c,h,_,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=ua("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xd.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Jc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,N.Wl)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new N.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const y=_.d,b=_.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();nr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ns("Unrecognized action received from server: "+(0,N.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,K.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,y=null;const b=function(){y?y.close():(_=!0,o())};t.realtime_={close:b,sendRequest:function(F){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,q]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);_?br("getToken() completed but was canceled"):(br("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=q&&q.token,y=new rf(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,he=>{nr(he+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),_||(t.repoInfo_.nodeAdmin&&nr(F),b())}}})()}interrupt(t){br("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){br("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>qa(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new mn(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){br("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){br("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Ga.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Jc.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class qt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qt(e,t)}}class Fr{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qt(wn,e),i=new qt(wn,t);return 0!==this.compare(r,i)}minPost(){return qt.MIN}}class cf extends Fr{static get __EMPTY_NODE(){return Pi}static set __EMPTY_NODE(e){Pi=e}compare(e,t){return is(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qt.MIN}maxPost(){return new qt(rs,Pi)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new qt(e,Pi)}toString(){return".key"}}const Ys=new cf;class lf{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bg,Ds=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??In.EMPTY_NODE,this.right=c??In.EMPTY_NODE}copy(t,r,i,o,c){return new n(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return In.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return In.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class In{constructor(e,t=In.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new In(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ds.BLACK,null,null))}remove(e){return new In(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ds.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lf(this.root_,null,this.comparator_,!0,e)}}function Eg(n,e){return is(n.name,e.name)}function il(n,e){return is(n,e)}In.EMPTY_NODE=new class Q_{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ds(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Xa=function(n){return"number"==typeof n?"number:"+Wa(n):"string:"+n},Nd=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===bg||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===bg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Tg,df,X_,Oo=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nd(this.priorityNode_)}static set __childrenNodeConstructor(t){Tg=t}static get __childrenNodeConstructor(){return Tg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===ha(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Xa(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Wa(this.value_):this.value_,this.lazyHash_=Yh(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(o>=0,"Unknown leaf type: "+r),(0,N.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const w=new class ty extends Fr{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?is(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(rs,new Oo("[PRIORITY-POST]",X_))}makePost(e,t){const r=df(e);return new qt(t,new Oo("[PRIORITY-POST]",r))}toString(){return".priority"}},p=Math.log(2);class m{constructor(e){this.count=parseInt(Math.log(e+1)/p,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const I=function(n,e,t,r){n.sort(e);const i=function(_,y){const b=y-_;let S,R;if(0===b)return null;if(1===b)return S=n[_],R=t?t(S):S,new Ds(R,S.node,Ds.BLACK,null,null);{const F=parseInt(b/2,10)+_,q=i(_,F),he=i(F+1,y);return S=n[F],R=t?t(S):S,new Ds(R,S.node,Ds.BLACK,q,he)}},h=function(_){let y=null,b=null,S=n.length;const R=function(q,he){const ve=S-q,ze=S;S-=q;const ot=i(ve+1,ze),We=n[ve],ct=t?t(We):We;F(new Ds(ct,We.node,he,null,ot))},F=function(q){y?(y.left=q,y=q):(b=q,y=q)};for(let q=0;q<_.count;++q){const he=_.nextBitIsOne(),ve=Math.pow(2,_.count-(q+1));he?R(ve,Ds.BLACK):(R(ve,Ds.BLACK),R(ve,Ds.RED))}return b}(new m(n.length));return new In(r||e,h)};let A;const O={};class H{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(O&&w,"ChildrenNode.ts has not been loaded"),A=A||new H({".priority":O},{".priority":w}),A}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof In?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Ys,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(qt.Wrap);let h,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?I(r,e.getCompare()):O;const _=e.toString(),y=Object.assign({},this.indexSet_);y[_]=e;const b=Object.assign({},this.indexes_);return b[_]=h,new H(b,y)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,o)=>{const c=(0,N.DV)(this.indexSet_,o);if((0,N.hu)(c,"Missing index implementation for "+o),i===O){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(qt.Wrap);let y=_.getNext();for(;y;)y.name!==e.name&&h.push(y),y=_.getNext();return h.push(e),I(h,c.getCompare())}return O}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new qt(e.name,h))),_.insert(e,e.node)}});return new H(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===O)return i;{const o=t.get(e.name);return o?i.remove(new qt(e.name,o)):i}});return new H(r,this.indexSet_)}}let X,ue=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Nd(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return X||(X=new n(new In(il),null,H.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||X}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?X:r}}getChild(t){const r=Qt(t);return null===r?this:this.getImmediateChild(r).getChild(pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new qt(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?X:this.priorityNode_;return new n(o,h,c)}}updateChild(t,r){const i=Qt(t);if(null===i)return r;{(0,N.hu)(".priority"!==Qt(t)||1===ha(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(pn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(w,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Xa(this.getPriority().val())+":"),this.forEachChild(w,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":Yh(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new qt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new qt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new qt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,qt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,qt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rt?-1:0}withIndex(t){if(t===Ys||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ys||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(w),o=r.getIterator(w);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ys?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rt=new class He extends ue{constructor(){super(new In(il),ue.EMPTY_NODE,H.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(qt,{MIN:{value:new qt(wn,ue.EMPTY_NODE)},MAX:{value:new qt(rs,rt)}}),cf.__EMPTY_NODE=ue.EMPTY_NODE,Oo.__childrenNodeConstructor=ue,function pa(n){bg=n}(rt),function ey(n){X_=n}(rt);const ut=!0;function Ot(n,e=null){if(null===n)return ue.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Oo(n,Ot(e));if(n instanceof Array||!ut){let t=ue.EMPTY_NODE;return xn(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const o=Ot(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Ot(e))}{const t=[];let r=!1;if(xn(n,(c,h)=>{if("."!==c.substring(0,1)){const _=Ot(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new qt(c,_)))}}),0===t.length)return ue.EMPTY_NODE;const o=I(t,Eg,c=>c.name,il);if(r){const c=I(t,w.getCompare());return new ue(o,Ot(e),new H({".priority":c},{".priority":w}))}return new ue(o,Ot(e),H.Default)}}!function J_(n){df=n}(Ot);class Mi extends Fr{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!zt(e)&&".priority"!==Qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?is(e.name,t.name):o}makePost(e,t){const r=Ot(e),i=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new qt(t,i)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,rt);return new qt(rs,e)}toString(){return tl(this.indexPath_,0).join("/")}}const hf=new class sl extends Fr{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?is(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(e,t){const r=Ot(e);return new qt(t,r)}toString(){return".value"}};function ff(n){return{type:"value",snapshotNode:n}}function ga(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ju(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function as(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class kd{constructor(e){this.index_=e}updateChild(e,t,r,i,o,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(ju(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(ga(t,r)):c.trackChildChange(as(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(w,(i,o)=>{t.hasChild(i)||r.trackChildChange(ju(i,o))}),t.isLeafNode()||t.forEachChild(w,(i,o)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(o)||r.trackChildChange(as(i,o,c))}else r.trackChildChange(ga(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Hu{constructor(e){this.indexedFilter_=new kd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hu.getStartPost_(e),this.endPost_=Hu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,c){return this.matches(new qt(t,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ue.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ue.EMPTY_NODE);const o=this;return t.forEachChild(w,(c,h)=>{o.matches(new qt(c,h))||(i=i.updateImmediateChild(c,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class nw{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,c){return this.rangedFilter_.matches(new qt(t,r))||(r=ue.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,c):this.fullLimitUpdateChild_(e,t,r,o,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ue.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=ue.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(ue.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;o.hasNext();){const h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let c;if(this.reverse_){const S=this.index_.getCompare();c=(R,F)=>S(F,R)}else c=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const _=new qt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const F=null==R?1:c(R,_);if(b&&!r.isEmpty()&&F>=0)return o?.trackChildChange(as(t,r,S)),h.updateImmediateChild(t,r);{o?.trackChildChange(ju(t,S));const he=h.updateImmediateChild(t,ue.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(o?.trackChildChange(ga(R.name,R.node)),he.updateImmediateChild(R.name,R.node)):he}}return r.isEmpty()?e:b&&c(y,_)>=0?(null!=o&&(o.trackChildChange(ju(y.name,y.node)),o.trackChildChange(ga(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,ue.EMPTY_NODE)):e}}class $u{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=w}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===w}copy(){const e=new $u;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ry(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function iy(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ol(n,e){const t=n.copy();return t.index_=e,t}function iw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===w?t="$priority":n.index_===hf?t="$value":n.index_===Ys?t="$key":((0,N.hu)(n.index_ instanceof Mi,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,N.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,N.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,N.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function oy(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==w&&(e.i=n.index_.toString()),e}class Ld extends vg{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ua("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=Ld.getListenId_(e,r),h={};this.listens_[c]=h;const _=iw(e._queryParams);this.restRequest_(o+".json",_,(y,b)=>{let S=b;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(o,S,!1,r),(0,N.DV)(this.listens_,c)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=Ld.getListenId_(e,t);delete this.listens_[r]}get(e){const t=iw(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,N.cI)(h.responseText)}catch{nr("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&nr("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class lb{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pf(){return{value:null,children:new Map}}function Ja(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Qt(e);n.children.has(r)||n.children.set(r,pf()),Ja(n.children.get(r),e=pn(e),t)}}function sw(n,e){if(zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(w,(r,i)=>{Ja(n,new mn(r),i)}),sw(n,e)}}if(n.children.size>0){const t=Qt(e);return e=pn(e),n.children.has(t)&&sw(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function ay(n,e,t){null!==n.value?t(e,n.value):function PP(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{ay(i,new mn(e.toString()+"/"+r),t)})}class MP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class uy{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new MP(e);const r=1e4+2e4*Math.random();Kc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xn(e,(i,o)=>{o>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Kc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xo=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(xo||{});function aw(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class uw{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=xo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new mn(e));return new uw(dn(),t,this.revert)}}return(0,N.hu)(Qt(this.path)===e,"operationForChild called for unrelated child."),new uw(pn(this.path),this.affectedTree,this.revert)}}class Ag{constructor(e,t){this.source=e,this.path=t,this.type=xo.LISTEN_COMPLETE}operationForChild(e){return zt(this.path)?new Ag(this.source,dn()):new Ag(this.source,pn(this.path))}}class Gu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=xo.OVERWRITE}operationForChild(e){return zt(this.path)?new Gu(this.source,dn(),this.snap.getImmediateChild(e)):new Gu(this.source,pn(this.path),this.snap)}}class gf{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=xo.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new mn(e));return t.isEmpty()?null:t.value?new Gu(this.source,dn(),t.value):new gf(this.source,dn(),t)}return(0,N.hu)(Qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gf(this.source,pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cy{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mf(n,e,t,r,i,o){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function gb(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new qt(e.childName,e.snapshotNode),i=new qt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function pb(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(_,n.query_))})})}function Pg(n,e){return{eventCache:n,serverCache:e}}function Mg(n,e,t,r){return Pg(new Qs(e,t,r),n.serverCache)}function mb(n,e,t,r){return Pg(n.eventCache,new Qs(e,t,r))}function ly(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let lw;class Cn{constructor(e,t=(()=>(lw||(lw=new In(za)),lw))()){this.value=e,this.children=t}static fromObject(e){let t=new Cn(null);return xn(e,(r,i)=>{t=t.set(new mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:dn(),value:this.value};if(zt(e))return null;{const r=Qt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(pn(e),t);return null!=o?{path:_n(new mn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Qt(e),r=this.children.get(t);return null!==r?r.subtree(pn(e)):new Cn(null)}}set(e,t){if(zt(e))return new Cn(t,this.children);{const r=Qt(e),o=(this.children.get(r)||new Cn(null)).set(pn(e),t),c=this.children.insert(r,o);return new Cn(this.value,c)}}remove(e){if(zt(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const t=Qt(e),r=this.children.get(t);if(r){const i=r.remove(pn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Cn(null):new Cn(this.value,o)}return this}}get(e){if(zt(e))return this.value;{const t=Qt(e),r=this.children.get(t);return r?r.get(pn(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Qt(e),o=(this.children.get(r)||new Cn(null)).setTree(pn(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Cn(this.value,c)}}fold(e){return this.fold_(dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(_n(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const o=Qt(e),c=this.children.get(o);return c?c.findOnPath_(pn(e),_n(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dn(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Qt(e),o=this.children.get(i);return o?o.foreachOnPath_(pn(e),_n(t,i),r):new Cn(null)}}foreach(e){this.foreach_(dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_n(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ma{constructor(e){this.writeTree_=e}static empty(){return new ma(new Cn(null))}}function dy(n,e,t){if(zt(e))return new ma(new Cn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=fi(i,e);return o=o.updateChild(c,t),new ma(n.writeTree_.set(i,o))}{const i=new Cn(t),o=n.writeTree_.setTree(e,i);return new ma(o)}}}function _b(n,e,t){let r=n;return xn(t,(i,o)=>{r=dy(r,_n(e,i),o)}),r}function OP(n,e){if(zt(e))return ma.empty();{const t=n.writeTree_.setTree(e,new Cn(null));return new ma(t)}}function yb(n,e){return null!=_f(n,e)}function _f(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(fi(t.path,e)):null}function dw(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(w,(r,i)=>{e.push(new qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new qt(r,i.value))}),e}function cl(n,e){if(zt(e))return n;{const t=_f(n,e);return new ma(null!=t?new Cn(t):n.writeTree_.subtree(e))}}function hw(n){return n.writeTree_.isEmpty()}function yf(n,e){return vb(dn(),n.writeTree_,e)}function vb(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,N.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=vb(_n(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_n(n,".priority"),r)),t}}function vf(n,e){return Vd(e,n)}function Cb(n,e){if(n.snap)return Ai(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ai(_n(n.path,t),e))return!0;return!1}function sF(n){return n.visible}function xP(n,e,t){let r=ma.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let h;if(o.snap)Ai(t,c)?(h=fi(t,c),r=dy(r,h,o.snap)):Ai(c,t)&&(h=fi(c,t),r=dy(r,dn(),o.snap.getChild(h)));else{if(!o.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Ai(t,c))h=fi(t,c),r=_b(r,h,o.children);else if(Ai(c,t))if(h=fi(c,t),zt(h))r=_b(r,dn(),o.children);else{const _=(0,N.DV)(o.children,Qt(h));if(_){const y=_.getChild(pn(h));r=dy(r,dn(),y)}}}}}return r}function hy(n,e,t,r,i){if(r||i){const o=cl(n.visibleWrites,e);return!i&&hw(o)?t:i||null!=t||yb(o,dn())?yf(xP(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ai(y.path,e)||Ai(e,y.path))},e),t||ue.EMPTY_NODE):null}{const o=_f(n.visibleWrites,e);if(null!=o)return o;{const c=cl(n.visibleWrites,e);return hw(c)?t:null!=t||yb(c,dn())?yf(c,t||ue.EMPTY_NODE):null}}}function fy(n,e,t,r){return hy(n.writeTree,n.treePath,e,t,r)}function pw(n,e){return function fw(n,e,t){let r=ue.EMPTY_NODE;const i=_f(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(w,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=cl(n.visibleWrites,e);return t.forEachChild(w,(c,h)=>{const _=yf(cl(o,new mn(c)),h);r=r.updateImmediateChild(c,_)}),dw(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return dw(cl(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function gw(n,e,t,r){return function oF(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=_n(e,t);if(yb(n.visibleWrites,o))return null;{const c=cl(n.visibleWrites,o);return hw(c)?i.getChild(t):yf(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Ud(n,e){return function Eb(n,e){return _f(n.visibleWrites,e)}(n.writeTree,_n(n.treePath,e))}function xg(n,e,t){return function aF(n,e,t,r){const i=_n(e,t),o=_f(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?yf(cl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bb(n,e){return Vd(_n(n.treePath,e),n.writeTree)}function Vd(n,e){return{treePath:n,writeTree:e}}class LP{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,as(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,ju(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,ga(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,as(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const mw=new class FP{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class py{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xg(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fd(this.viewCache_),o=function kP(n,e,t,r,i,o){return function RP(n,e,t,r,i,o,c){let h;const _=cl(n.visibleWrites,e),y=_f(_,dn());if(null!=y)h=y;else{if(null==t)return[];h=yf(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=c.getCompare(),R=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let F=R.getNext();for(;F&&b.length<i;)0!==S(F,r)&&b.push(F),F=R.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function _w(n,e,t,r,i,o){const c=e.eventCache;if(null!=Ud(r,t))return e;{let h,_;if(zt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Fd(e),S=pw(r,y instanceof ue?y:ue.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const y=fy(r,Fd(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=Qt(t);if(".priority"===y){(0,N.hu)(1===ha(t),"Can't have a priority with additional path components");const b=c.getNode();_=e.serverCache.getNode();const S=gw(r,t,b,_);h=null!=S?n.filter.updatePriority(b,S):c.getNode()}else{const b=pn(t);let S;if(c.isCompleteForChild(y)){_=e.serverCache.getNode();const R=gw(r,t,c.getNode(),_);S=null!=R?c.getNode().getImmediateChild(y).updateChild(b,R):c.getNode().getImmediateChild(y)}else S=xg(r,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,b,i,o):c.getNode()}}return Mg(e,h,c.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function yw(n,e,t,r,i,o,c,h){const _=e.serverCache;let y;const b=c?n.filter:n.filter.getIndexedFilter();if(zt(t))y=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const F=_.getNode().updateChild(t,r);y=b.updateFullNode(_.getNode(),F,null)}else{const F=Qt(t);if(!_.isCompleteForPath(t)&&ha(t)>1)return e;const q=pn(t),ve=_.getNode().getImmediateChild(F).updateChild(q,r);y=".priority"===F?b.updatePriority(_.getNode(),ve):b.updateChild(_.getNode(),F,ve,q,mw,null)}const S=mb(e,y,_.isFullyInitialized()||zt(t),b.filtersNodes());return _w(n,S,t,i,new py(i,S,o),h)}function Tb(n,e,t,r,i,o,c){const h=e.eventCache;let _,y;const b=new py(i,e,o);if(zt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Mg(e,y,!0,n.filter.filtersNodes());else{const S=Qt(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),_=Mg(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=pn(t),F=h.getNode().getImmediateChild(S);let q;if(zt(R))q=r;else{const he=b.getCompleteChild(S);q=null!=he?".priority"===el(R)&&he.getChild(Vu(R)).isEmpty()?he:he.updateChild(R,r):ue.EMPTY_NODE}_=F.equals(q)?e:Mg(e,n.filter.updateChild(h.getNode(),S,q,R,b,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function wf(n,e){return n.eventCache.isCompleteForChild(e)}function If(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gy(n,e,t,r,i,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,_=e;y=zt(t)?r:new Cn(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(b.hasChild(S)){const q=If(0,e.serverCache.getNode().getImmediateChild(S),R);_=yw(n,_,new mn(S),q,i,o,c,h)}}),y.children.inorderTraversal((S,R)=>{const F=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!b.hasChild(S)&&!F){const he=If(0,e.serverCache.getNode().getImmediateChild(S),R);_=yw(n,_,new mn(S),he,i,o,c,h)}}),_}class HP{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kd(r.getIndex()),o=function Sg(n){return n.loadsAllData()?new kd(n.getIndex()):n.hasLimit()?new nw(n):new Hu(n)}(r);this.processor_=function UP(n){return{filter:n}}(o);const c=t.serverCache,h=t.eventCache,_=i.updateFullNode(ue.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(ue.EMPTY_NODE,h.getNode(),null),b=new Qs(_,c.isFullyInitialized(),i.filtersNodes()),S=new Qs(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Pg(S,b),this.eventGenerator_=new cy(this.query_)}get query(){return this.query_}}function my(n,e){const t=Fd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Qt(e)).isEmpty())?t.getChild(e):null}function $P(n){return 0===n.eventRegistrations_.length}function Mb(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _y(n,e,t,r){e.type===xo.MERGE&&null!==e.source.queryId&&((0,N.hu)(Fd(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(ly(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function BP(n,e,t,r,i){const o=new LP;let c,h;if(t.type===xo.OVERWRITE){const y=t;y.source.fromUser?c=Tb(n,e,y.path,y.snap,r,i,o):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!zt(y.path),c=yw(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===xo.MERGE){const y=t;y.source.fromUser?c=function yn(n,e,t,r,i,o,c){let h=e;return r.foreach((_,y)=>{const b=_n(t,_);wf(e,Qt(b))&&(h=Tb(n,h,b,y,i,o,c))}),r.foreach((_,y)=>{const b=_n(t,_);wf(e,Qt(b))||(h=Tb(n,h,b,y,i,o,c))}),h}(n,e,y.path,y.children,r,i,o):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=gy(n,e,y.path,y.children,r,i,h,o))}else if(t.type===xo.ACK_USER_WRITE){const y=t;c=y.revert?function Sb(n,e,t,r,i,o){let c;if(null!=Ud(r,t))return e;{const h=new py(r,e,i),_=e.eventCache.getNode();let y;if(zt(t)||".priority"===Qt(t)){let b;if(e.serverCache.isFullyInitialized())b=fy(r,Fd(e));else{const S=e.serverCache.getNode();(0,N.hu)(S instanceof ue,"serverChildren would be complete if leaf node"),b=pw(r,S)}y=n.filter.updateFullNode(_,b,o)}else{const b=Qt(t);let S=xg(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=_.getImmediateChild(b)),y=null!=S?n.filter.updateChild(_,b,S,pn(t),h,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,ue.EMPTY_NODE,pn(t),h,o):_,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=fy(r,Fd(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=Ud(r,dn()),Mg(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function Db(n,e,t,r,i,o,c){if(null!=Ud(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(zt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return yw(n,e,t,_.getNode().getChild(t),i,o,h,c);if(zt(t)){let y=new Cn(null);return _.getNode().forEachChild(Ys,(b,S)=>{y=y.set(new mn(b),S)}),gy(n,e,t,y,i,o,h,c)}return e}{let y=new Cn(null);return r.foreach((b,S)=>{const R=_n(t,b);_.isCompleteForPath(R)&&(y=y.set(b,_.getNode().getChild(R)))}),gy(n,e,t,y,i,o,h,c)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==xo.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function vw(n,e,t,r,i){const o=e.serverCache;return _w(n,mb(e,o.getNode(),o.isFullyInitialized()||zt(t),o.isFiltered()),t,r,mw,i)}(n,e,t.path,r,o)}const _=o.getChanges();return function jP(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ly(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(ff(ly(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function VP(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,N.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Iw(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Iw(n,e,t,r){return function cw(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function Dg(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),mf(n,i,"child_removed",e,r,t),mf(n,i,"child_added",e,r,t),mf(n,i,"child_moved",o,r,t),mf(n,i,"child_changed",e,r,t),mf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let eu,Cy;class xb{constructor(){this.views=new Map}}function Rg(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,N.hu)(null!=o,"SyncTree gave us an op for an invalid query."),_y(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(_y(c,e,t,r));return o}}function Ng(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=fy(t,i?r:null),_=!1;h?_=!0:r instanceof ue?(h=pw(t,r),_=!1):(h=ue.EMPTY_NODE,_=!1);const y=Pg(new Qs(h,_,!1),new Qs(r,i,!1));return new HP(e,y)}return c}function wy(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ll(n,e){let t=null;for(const r of n.views.values())t=t||my(r,e);return t}function Rb(n,e){return e._queryParams.loadsAllData()?Iy(n):n.views.get(e._queryIdentifier)}function Ew(n,e){return null!=Rb(n,e)}function Xs(n){return null!=Iy(n)}function Iy(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Nb=1;class kb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_=function NP(){return{visibleWrites:ma.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ey(n,e,t,r,i){return function zu(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=dy(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?dl(n,new Gu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bd(n,e,t=!1){const r=function wb(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Ib(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&Cb(h,r.path)?i=!1:Ai(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function iF(n){n.visibleWrites=xP(n.allWrites,sF,dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=OP(n.visibleWrites,r.path):xn(r.children,_=>{n.visibleWrites=OP(n.visibleWrites,_n(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let o=new Cn(null);return null!=r.snap?o=o.set(dn(),!0):xn(r.children,c=>{o=o.set(new mn(c),!0)}),dl(n,new uw(r.path,o,t))}return[]}function by(n,e,t){return dl(n,new Gu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Dw(n,e,t,r,i=!1){const o=e._path,c=n.syncPointTree_.get(o);let h=[];if(c&&("default"===e._queryIdentifier||Ew(c,e))){const _=function vy(n,e,t,r){const i=e._queryIdentifier,o=[];let c=[];const h=Xs(n);if("default"===i)for(const[_,y]of n.views.entries())c=c.concat(Mb(y,t,r)),$P(y)&&(n.views.delete(_),y.query._queryParams.loadsAllData()||o.push(y.query));else{const _=n.views.get(i);_&&(c=c.concat(Mb(_,t,r)),$P(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||o.push(_.query)))}return h&&!Xs(n)&&o.push(new(function yy(){return(0,N.hu)(eu,"Reference.ts has not been loaded"),eu}())(e._repo,e._path)),{removed:o,events:c}}(c,e,t,r);(function GP(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=_.removed;if(h=_.events,!i){const b=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(R,F)=>Xs(F));if(b&&!S){const R=n.syncPointTree_.subtree(o);if(!R.isEmpty()){const F=function Sw(n){return n.fold((e,t,r)=>{if(t&&Xs(t))return[Iy(t)];{let i=[];return t&&(i=wy(t)),xn(r,(o,c)=>{i=i.concat(c)}),i}})}(R);for(let q=0;q<F.length;++q){const he=F[q],ve=he.query,ze=Fg(n,he);n.listenProvider_.startListening(Wu(ve),qu(n,ve),ze.hashFn,ze.onComplete)}}}!S&&y.length>0&&!r&&(b?n.listenProvider_.stopListening(Wu(e),null):y.forEach(R=>{const F=n.queryToTagMap.get(Ug(R));n.listenProvider_.stopListening(Wu(R),F)}))}!function KP(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Ug(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function kg(n,e,t,r){const i=Vg(n,r);if(null!=i){const o=Tf(i),c=o.path,h=o.queryId,_=fi(c,e);return Lb(n,c,new Gu(aw(h),_,t))}return[]}function Lg(n,e,t,r=!1){const i=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(R,F)=>{const q=fi(R,i);o=o||ll(F,q),c=c||Xs(F)});let _,h=n.syncPointTree_.get(i);h?(c=c||Xs(h),o=o||ll(h,dn())):(h=new xb,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?_=!0:(_=!1,o=ue.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,q)=>{const he=ll(q,dn());he&&(o=o.updateImmediateChild(F,he))}));const y=Ew(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=Ug(e);(0,N.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const F=function Fb(){return Nb++}();n.queryToTagMap.set(R,F),n.tagToQueryMap.set(F,R)}let S=function tu(n,e,t,r,i,o){const c=Ng(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function ww(n,e){n.eventRegistrations_.push(e)}(c,t),function Ob(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(w,(o,c)=>{r.push(ga(o,c))}),t.isFullyInitialized()&&r.push(ff(t.getNode())),Iw(n,r,t.getNode(),e)}(c,t)}(h,e,t,vf(n.pendingWriteTree_,i),o,_);if(!y&&!c&&!r){const R=Rb(h,e);S=S.concat(function YP(n,e,t){const r=e._path,i=qu(n,e),o=Fg(n,t),c=n.listenProvider_.startListening(Wu(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!Xs(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((y,b,S)=>{if(!zt(y)&&b&&Xs(b))return[Iy(b).query];{let R=[];return b&&(R=R.concat(wy(b).map(F=>F.query))),xn(S,(F,q)=>{R=R.concat(q)}),R}});for(let y=0;y<_.length;++y){const b=_[y];n.listenProvider_.stopListening(Wu(b),qu(n,b))}}return c}(n,e,R))}return S}function Cf(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=ll(h,fi(c,e));if(y)return y});return hy(i,e,o,t,!0)}function dl(n,e){return Ty(e,n.syncPointTree_,null,vf(n.pendingWriteTree_,dn()))}function Ty(n,e,t,r){if(zt(n.path))return bf(n,e,t,r);{const i=e.get(dn());null==t&&null!=i&&(t=ll(i,dn()));let o=[];const c=Qt(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const y=t?t.getImmediateChild(c):null,b=bb(r,c);o=o.concat(Ty(h,_,y,b))}return i&&(o=o.concat(Rg(i,n,r,t))),o}}function bf(n,e,t,r){const i=e.get(dn());null==t&&null!=i&&(t=ll(i,dn()));let o=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,y=bb(r,c),b=n.operationForChild(c);b&&(o=o.concat(bf(b,h,_,y)))}),i&&(o=o.concat(Rg(i,n,r,t))),o}function Fg(n,e){const t=e.query,r=qu(n,t);return{hashFn:()=>(function Ab(n){return n.viewCache_.serverCache.getNode()}(e)||ue.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function uF(n,e,t){const r=Vg(n,t);if(r){const i=Tf(r),o=i.path,c=i.queryId,h=fi(o,e);return Lb(n,o,new Ag(aw(c),h))}return[]}(n,t._path,r):function WP(n,e){return dl(n,new Ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Is(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Dw(n,t,null,o)}}}}function qu(n,e){const t=Ug(e);return n.queryToTagMap.get(t)}function Ug(n){return n._path.toString()+"$"+n._queryIdentifier}function Vg(n,e){return n.tagToQueryMap.get(e)}function Tf(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new mn(n.substr(0,e))}}function Lb(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),Rg(r,t,vf(n.pendingWriteTree_,e),null)}function Wu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function bw(){return(0,N.hu)(Cy,"Reference.ts has not been loaded"),Cy}())(n._repo,n._path):n}class Aw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Aw(t)}node(){return this.node_}}class Bg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_n(this.path_,e);return new Bg(this.syncTree_,t)}node(){return Cf(this.syncTree_,this.path_)}}const Ub=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Vb=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?QP(n[".sv"],e,t):"object"==typeof n[".sv"]?cF(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},QP=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},cF=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},Bb=function(n,e,t,r){return jg(e,new Bg(t,n),r)},Df=function(n,e,t){return jg(n,new Aw(e),t)};function jg(n,e,t){const r=n.getPriority().val(),i=Vb(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=Vb(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Oo(h,Ot(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Oo(i))),c.forEachChild(w,(h,_)=>{const y=jg(_,e.getImmediateChild(h),t);y!==_&&(o=o.updateImmediateChild(h,y))}),o}}class Pw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Hg(n,e){let t=e instanceof mn?e:new mn(e),r=n,i=Qt(t);for(;null!==i;){const o=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new Pw(i,r,o),t=pn(t),i=Qt(t)}return r}function Zu(n){return n.node.value}function Sf(n,e){n.node.value=e,Af(n)}function jb(n){return n.node.childCount>0}function Dy(n,e){xn(n.node.children,(t,r)=>{e(new Pw(t,n,r))})}function Mw(n,e,t,r){t&&!r&&e(n),Dy(n,i=>{Mw(i,e,!0,r)}),t&&r&&e(n)}function $g(n){return new mn(null===n.parent?n.name:$g(n.parent)+"/"+n.name)}function Af(n){null!==n.parent&&function XP(n,e,t){const r=function Hb(n){return void 0===Zu(n)&&!jb(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Af(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Af(n))}(n.parent,n.name,n)}const Pf=/[\[\].#$\/\u0000-\u001F\u007F]/,Gg=/[\[\].#$\u0000-\u001F\u007F]/,Ow=10485760,zg=function(n){return"string"==typeof n&&0!==n.length&&!Pf.test(n)},$b=function(n){return"string"==typeof n&&0!==n.length&&!Gg.test(n)},qg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ws(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},_a=function(n,e,t,r){r&&void 0===e||Mf((0,N.gK)(n,"value"),e,t)},Mf=function(n,e,t){const r=t instanceof mn?new K_(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+fa(r));if("function"==typeof e)throw new Error(n+"contains a function "+fa(r)+" with contents = "+e.toString());if(ws(e))throw new Error(n+"contains "+e.toString()+" "+fa(r));if("string"==typeof e&&e.length>Ow/3&&(0,N.ug)(e)>Ow)throw new Error(n+"contains a string greater than "+Ow+" utf8 bytes "+fa(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(xn(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!zg(c)))throw new Error(n+" contains an invalid key ("+c+") "+fa(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ig(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),uf(n)})(r,c),Mf(n,h,r),function Cg(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+fa(r)+" in addition to actual children.")}},eM=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];xn(e,(c,h)=>{const _=new mn(c);if(Mf(i,h,_n(t,_)),".priority"===el(_)&&!qg(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=tl(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!zg(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(af);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ai(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Wg=function(n,e,t){if(!t||void 0!==e){if(ws(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qg(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Of=function(n,e,t,r){if(!(r&&void 0===t||zg(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Zg=function(n,e,t,r){if(!(r&&void 0===t||$b(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tM=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zg(n,e,t,r)},Js=function(n,e){if(".info"===Qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Gb=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!zg(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$b(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zb{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sy(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!nl(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function qb(n,e,t){Sy(n,t),Rw(n,r=>nl(r,e))}function Ro(n,e,t){Sy(n,t),Rw(n,r=>Ai(r,e)||Ai(e,r))}function Rw(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Wb(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Wb(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ao&&br("event: "+t.toString()),Mo(r)}}}const No="repo_interrupt",Nw=25;class nM{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pf(),this.transactionQueueTree_=new Pw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Zb(n){const t=n.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Kg(n){return Ub({timestamp:Zb(n)})}function kw(n,e,t,r,i){n.dataUpdateCount++;const o=new mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,N.UI)(t,y=>Ot(y));c=function ZP(n,e,t,r){const i=Vg(n,r);if(i){const o=Tf(i),c=o.path,h=o.queryId,_=fi(c,e),y=Cn.fromObject(t);return Lb(n,c,new gf(aw(h),_,y))}return[]}(n.serverSyncTree_,o,_,i)}else{const _=Ot(t);c=kg(n.serverSyncTree_,o,_,i)}else if(r){const _=(0,N.UI)(t,y=>Ot(y));c=function qP(n,e,t){const r=Cn.fromObject(t);return dl(n,new gf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,_)}else{const _=Ot(t);c=by(n.serverSyncTree_,o,_)}let h=o;c.length>0&&(h=Qg(n,o)),Ro(n.eventQueue_,h,c)}function jd(n,e){hl(n,"connected",e),!1===e&&function Yg(n){Rf(n,"onDisconnectEvents");const e=Kg(n),t=pf();ay(n.onDisconnect_,dn(),(i,o)=>{const c=Bb(i,o,n.serverSyncTree_,e);Ja(t,i,c)});let r=[];ay(t,dn(),(i,o)=>{r=r.concat(by(n.serverSyncTree_,i,o));const c=Nf(n,i);Qg(n,c)}),n.onDisconnect_=pf(),Ro(n.eventQueue_,dn(),r)}(n)}function hl(n,e,t){const r=new mn("/.info/"+e),i=Ot(t);n.infoData_.updateSnapshot(r,i);const o=by(n.infoSyncTree_,r,i);Ro(n.eventQueue_,r,o)}function Ay(n){return n.nextWriteId_++}function Py(n,e,t,r,i){Rf(n,"set",{path:e.toString(),value:t,priority:r});const o=Kg(n),c=Ot(t,r),h=Cf(n.serverSyncTree_,e),_=Df(c,h,o),y=Ay(n),b=Ey(n.serverSyncTree_,e,_,y,!0);Sy(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(R,F)=>{const q="ok"===R;q||nr("set at "+e+" failed: "+R);const he=Bd(n.serverSyncTree_,y,!q);Ro(n.eventQueue_,e,he),fl(0,i,R,F)});const S=Nf(n,e);Qg(n,S),Ro(n.eventQueue_,S,[])}function Kb(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&sw(n.onDisconnect_,e),fl(0,t,r,i)})}function iM(n,e,t,r){const i=Ot(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,c)=>{"ok"===o&&Ja(n.onDisconnect_,e,i),fl(0,r,o,c)})}function Oy(n,e,t){let r;r=".info"===Qt(e._path)?Dw(n.infoSyncTree_,e,t):Dw(n.serverSyncTree_,e,t),qb(n.eventQueue_,e._path,r)}function Uw(n){n.persistentConnection_&&n.persistentConnection_.interrupt(No)}function Rf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),br(t,...e)}function fl(n,e,t,r){e&&Mo(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,e(c)}})}function xy(n,e,t){return Cf(n.serverSyncTree_,e,t)||ue.EMPTY_NODE}function Vw(n,e=n.transactionQueueTree_){if(e||Xg(n,e),Zu(e)){const t=jw(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aM(n,e,t){const r=t.map(y=>y.currentWriteId),i=xy(n,e,r);let o=i;const c=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,N.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=fi(e,b.path);o=o.updateChild(S,b.currentOutputSnapshotRaw)}const h=o.val(!0),_=e;n.server_.put(_.toString(),h,y=>{Rf(n,"transaction put response",{path:_.toString(),status:y});let b=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,b=b.concat(Bd(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();Xg(n,Hg(n.transactionQueueTree_,e)),Vw(n,n.transactionQueueTree_),Ro(n.eventQueue_,e,b);for(let R=0;R<S.length;R++)Mo(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{nr("transaction at "+_.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Qg(n,e)}},c)}(n,$g(e),t)}else jb(e)&&Dy(e,t=>{Vw(n,t)})}function Qg(n,e){const t=Bw(n,e),r=$g(t);return function hF(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],y=fi(t,_.path);let S,b=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,S=_.abortReason,i=i.concat(Bd(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=Nw)b=!0,S="maxretry",i=i.concat(Bd(n.serverSyncTree_,_.currentWriteId,!0));else{const R=xy(n,_.path,c);_.currentInputSnapshot=R;const F=e[h].update(R.val());if(void 0!==F){Mf("transaction failed: Data returned ",F,_.path);let q=Ot(F);"object"==typeof F&&null!=F&&(0,N.r3)(F,".priority")||(q=q.updatePriority(R.getPriority()));const ve=_.currentWriteId,ze=Kg(n),ot=Df(q,R,ze);_.currentOutputSnapshotRaw=q,_.currentOutputSnapshotResolved=ot,_.currentWriteId=Ay(n),c.splice(c.indexOf(ve),1),i=i.concat(Ey(n.serverSyncTree_,_.path,ot,_.currentWriteId,_.applyLocally)),i=i.concat(Bd(n.serverSyncTree_,ve,!0))}else b=!0,S="nodata",i=i.concat(Bd(n.serverSyncTree_,_.currentWriteId,!0))}Ro(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Xg(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Mo(r[h]);Vw(n,n.transactionQueueTree_)}(n,jw(n,t),r),r}function Bw(n,e){let t,r=n.transactionQueueTree_;for(t=Qt(e);null!==t&&void 0===Zu(r);)r=Hg(r,t),t=Qt(e=pn(e));return r}function jw(n,e){const t=[];return uM(n,e,t),t.sort((r,i)=>r.order-i.order),t}function uM(n,e,t){const r=Zu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Dy(e,i=>{uM(n,i,t)})}function Xg(n,e){const t=Zu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Sf(e,t.length>0?t:void 0)}Dy(e,r=>{Xg(n,r)})}function Nf(n,e){const t=$g(Bw(n,e)),r=Hg(n.transactionQueueTree_,e);return function lF(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Ry(n,i)}),Ry(n,r),Mw(r,i=>{Ry(n,i)}),t}function Ry(n,e){const t=Zu(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Bd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Sf(e,void 0):t.length=o+1,Ro(n.eventQueue_,$g(e),i);for(let c=0;c<r.length;c++)Mo(r[c])}}const Ut=function(n,e){const t=Xb(n),r=t.namespace;return"firebase.com"===t.domain&&vs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&vs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lt(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new mn(t.pathString)}},Xb=function(n){let e="",t="",r="",i="",o="",c=!0,h="https",_=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function Yb(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const R=function Qb(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),o=r}"ns"in R&&(o=R.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}},Hw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kf=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Hw.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Hw.charAt(e[i]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class $w{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}class Jb{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Lf{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Hd{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return Kb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Js("OnDisconnect.remove",this._path);const e=new N.BH;return iM(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Js("OnDisconnect.set",this._path),_a("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return iM(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Js("OnDisconnect.setWithPriority",this._path),_a("OnDisconnect.setWithPriority",e,this._path,!1),Wg("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function Fw(n,e,t,r,i){const o=Ot(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,h)=>{"ok"===c&&Ja(n.onDisconnect_,e,o),fl(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Js("OnDisconnect.update",this._path),eM("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function xf(n,e,t,r){if((0,N.xb)(t))return br("onDisconnect().update() called with empty data.  Don't do anything."),void fl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&xn(t,(c,h)=>{const _=Ot(h);Ja(n.onDisconnect_,_n(e,c),_)}),fl(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Hi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:el(this._path)}get ref(){return new Ss(this._repo,this._path)}get _queryIdentifier(){const e=oy(this._queryParams),t=qa(e);return"{}"===t?"default":t}get _queryObject(){return oy(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Hi))return!1;const t=this._repo===e._repo,r=nl(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Z_(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function pl(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ys){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==rs)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===w){if(null!=e&&!qg(e)||null!=t&&!qg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof Mi||n.getIndex()===hf,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ff(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ss extends Hi{constructor(e,t){super(e,t,new $u,!1)}get parent(){const e=Vu(this._path);return null===e?null:new Ss(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Qu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new mn(e),r=$d(this.ref,e);return new Qu(this._node.getChild(t),r,w)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Qu(i,$d(this.ref,r),w)))}hasChild(e){const t=new mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gw(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?$d(n._root,e):n._root}function Ny(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=Ut(e,n._repo.repoInfo_.nodeAdmin);Gb("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&vs("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Gw(n,t.path.toString())}function $d(n,e){return null===Qt((n=(0,N.m9)(n))._path)?tM("child","path",e,!1):Zg("child","path",e,!1),new Ss(n._repo,_n(n._path,e))}function zw(n,e){n=(0,N.m9)(n),Js("set",n._path),_a("set",e,n._path,!1);const t=new N.BH;return Py(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function hM(n,e){eM("update",e,n._path,!1);const t=new N.BH;return function Lw(n,e,t,r){Rf(n,"update",{path:e.toString(),value:t});let i=!0;const o=Kg(n),c={};if(xn(t,(h,_)=>{i=!1,c[h]=Bb(_n(e,h),Ot(_),n.serverSyncTree_,o)}),i)br("update() called with empty data.  Don't do anything."),fl(0,r,"ok",void 0);else{const h=Ay(n),_=function Tw(n,e,t,r){!function Og(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_b(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Cn.fromObject(t);return dl(n,new gf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);Sy(n.eventQueue_,_),n.server_.merge(e.toString(),t,(y,b)=>{const S="ok"===y;S||nr("update at "+e+" failed: "+y);const R=Bd(n.serverSyncTree_,h,!S),F=R.length>0?Qg(n,e):e;Ro(n.eventQueue_,F,R),fl(0,r,y,b)}),xn(t,y=>{const b=Nf(n,_n(e,y));Qg(n,b)}),Ro(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function tT(n){n=(0,N.m9)(n);const e=new Lf(()=>{}),t=new Uf(e);return function rM(n,e,t){const r=function Ef(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,b)=>{const S=fi(y,t);r=r||ll(b,S)});let i=n.syncPointTree_.get(t);i?r=r||ll(i,dn()):(i=new xb,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,c=o?new Qs(r,!0,!1):null;return function Pb(n){return ly(n.viewCache_)}(Ng(i,e,vf(n.pendingWriteTree_,e._path),o?c.getNode():ue.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Ot(i).withIndex(e._queryParams.getIndex());let c;if(Lg(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=by(n.serverSyncTree_,e._path,o);else{const h=qu(n.serverSyncTree_,e);c=kg(n.serverSyncTree_,e._path,o,h)}return Ro(n.eventQueue_,e._path,c),Dw(n.serverSyncTree_,e,t,null,!0),o},i=>(Rf(n,"get for query "+(0,N.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Qu(r,new Ss(n._repo,n._path),n._queryParams.getIndex()))}class Uf{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new $w("value",this,new Qu(e.snapshotNode,new Ss(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Jb(this,e,t):null}matches(e){return e instanceof Uf&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ky{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Jb(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=$d(new Ss(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new $w(e.type,this,new Qu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ky&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Jg(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const _=t,y=(b,S)=>{Oy(n._repo,n,h),_(b,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new Lf(t,o||void 0),h="value"===e?new Uf(c):new ky(e,c);return function My(n,e,t){let r;r=".info"===Qt(e._path)?Lg(n.infoSyncTree_,e,t):Lg(n.serverSyncTree_,e,t),qb(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Oy(n._repo,n,h)}function us(n,e,t,r){return Jg(n,"value",e,t,r)}function nT(n,e,t,r){return Jg(n,"child_added",e,t,r)}function rT(n,e,t,r){return Jg(n,"child_changed",e,t,r)}function fM(n,e,t,r){return Jg(n,"child_moved",e,t,r)}function Ly(n,e,t,r){return Jg(n,"child_removed",e,t,r)}function qw(n,e,t){let r=null;const i=t?new Lf(t):null;"value"===e?r=new Uf(i):e&&(r=new ky(e,i)),Oy(n._repo,n,r)}class ya{}class iT extends ya{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_a("endAt",this._value,e._path,!0);const t=iy(e._queryParams,this._value,this._key);if(Ff(t),Yu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hi(e._repo,e._path,t,e._orderByCalled)}}class sT extends ya{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_a("endBefore",this._value,e._path,!1);const t=function sy(n,e,t){let r;return r=iy(n,e,n.index_===Ys||t?t:wn),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Ff(t),Yu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hi(e._repo,e._path,t,e._orderByCalled)}}class oT extends ya{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_a("startAt",this._value,e._path,!0);const t=ry(e._queryParams,this._value,this._key);if(Ff(t),Yu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Hi(e._repo,e._path,t,e._orderByCalled)}}class mM extends ya{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){_a("startAfter",this._value,e._path,!1);const t=function rw(n,e,t){let r;return r=ry(n,e,n.index_===Ys||t?t:rs),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ff(t),Yu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Hi(e._repo,e._path,t,e._orderByCalled)}}class yM extends ya{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hi(e._repo,e._path,function ny(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class wM extends ya{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hi(e._repo,e._path,function cb(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Zw extends ya{constructor(e){super(),this._path=e}_apply(e){pl(e,"orderByChild");const t=new mn(this._path);if(zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Mi(t),i=ol(e._queryParams,r);return Yu(i),new Hi(e._repo,e._path,i,!0)}}class aT extends ya{_apply(e){pl(e,"orderByKey");const t=ol(e._queryParams,Ys);return Yu(t),new Hi(e._repo,e._path,t,!0)}}class uT extends ya{_apply(e){pl(e,"orderByPriority");const t=ol(e._queryParams,w);return Yu(t),new Hi(e._repo,e._path,t,!0)}}class Fy extends ya{_apply(e){pl(e,"orderByValue");const t=ol(e._queryParams,hf);return Yu(t),new Hi(e._repo,e._path,t,!0)}}class pF extends ya{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(_a("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new iT(this._value,this._key)._apply(new oT(this._value,this._key)._apply(e))}}function ko(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function Cw(n){(0,N.hu)(!eu,"__referenceConstructor has already been defined"),eu=n})(Ss),function zP(n){(0,N.hu)(!Cy,"__referenceConstructor has already been defined"),Cy=n}(Ss);const Uy={};function hT(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||vs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),br("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,y,c=Ut(o,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(_=!0,o=`http://${y}?ns=${h.namespace}`,c=Ut(o,i),h=c.repoInfo):_=!c.repoInfo.secure;const b=i&&_?new Cs(Cs.OWNER):new dg(n.name,n.options,e);Gb("Invalid Firebase Database URL",c),zt(c.path)||vs("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Yw(n,e,t,r){let i=Uy[e.name];i||(i={},Uy[e.name]=i);let o=i[n.toURLString()];return o&&vs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new nM(n,false,t,r),i[n.toURLString()]=o,o}(h,n,b,new q0(n.name,t));return new fT(S,n)}class fT{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dF(n,e,t){if(n.stats_=bs(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ld(n.repoInfo_,(r,i,o,c)=>{kw(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jd(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qa(n.repoInfo_,e,(r,i,o,c)=>{kw(n,r,i,o,c)},r=>{jd(n,r)},r=>{!function Ku(n,e){xn(e,(t,r)=>{hl(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Ya(n,e){const t=n.toString();return Es[t]||(Es[t]=e()),Es[t]}(n.repoInfo_,()=>new uy(n.stats_,n.server_)),n.infoData_=new lb,n.infoSyncTree_=new kb({startListening:(r,i,o,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=by(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),hl(n,"connected",!1),n.serverSyncTree_=new kb({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,_)=>{const y=c(h,_);Ro(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ss(this._repo,dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function EM(n,e){const t=Uy[e];(!t||t[n.key]!==n)&&vs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Uw(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vs("Cannot call "+e+" on a deleted database.")}}function pT(){Od.IS_TRANSPORT_INITIALIZED&&nr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function By(){pT(),Fu.forceDisallow()}function em(){pT(),Md.forceDisallow(),Fu.forceAllow()}function mT(n,e){Nu(n,e)}const AM={".sv":"timestamp"};class tm{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Qa.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Qa.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function SM(n){bd(fn.SDK_VERSION),(0,fn._registerComponent)(new ur.wA("database",(e,{instanceIdentifier:t})=>hT(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(Gc,"0.14.4",n),(0,fn.registerVersion)(Gc,"0.14.4","esm2017")}();const nm=new cr.Yd("@firebase/database-compat"),vT=function(n){nm.warn("FIREBASE WARNING: "+n)};class LM{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,vT("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class FM{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class gl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Zg("DataSnapshot.child","path",e,!1),new gl(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Zg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new gl(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new eo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Oi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=Oi.getCancelAndContextArgs_("Query.on",r,i),h=(y,b)=>{t.call(c.context,new gl(this.database,y),b)};h.userCallback=t,h.context=c.context;const _=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return us(this._delegate,h,_),t;case"child_added":return nT(this._delegate,h,_),t;case"child_removed":return Ly(this._delegate,h,_),t;case"child_changed":return rT(this._delegate,h,_),t;case"child_moved":return fM(this._delegate,h,_),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,qw(this._delegate,e,i)}else qw(this._delegate,e)}get(){return tT(this._delegate).then(e=>new gl(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const o=Oi.getCancelAndContextArgs_("Query.once",r,i),c=new N.BH,h=(y,b)=>{const S=new gl(this.database,y);t&&t.call(o.context,S,b),c.resolve(S)};h.userCallback=t,h.context=o.context;const _=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(e){case"value":us(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":nT(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":Ly(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":rT(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":fM(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Oi(this.database,ko(this._delegate,function vM(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yM(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Oi(this.database,ko(this._delegate,function nu(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wM(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Oi(this.database,ko(this._delegate,function IM(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Zg("orderByChild","path",n,!1),new Zw(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Oi(this.database,ko(this._delegate,function CM(){return new aT}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Oi(this.database,ko(this._delegate,function cT(){return new uT}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Oi(this.database,ko(this._delegate,function Kw(){return new Fy}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Oi(this.database,ko(this._delegate,function Ww(n=null,e){return Of("startAt","key",e,!0),new oT(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Oi(this.database,ko(this._delegate,function _M(n,e){return Of("startAfter","key",e,!0),new mM(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Oi(this.database,ko(this._delegate,function pM(n,e){return Of("endAt","key",e,!0),new iT(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Oi(this.database,ko(this._delegate,function gM(n,e){return Of("endBefore","key",e,!0),new sT(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Oi(this.database,ko(this._delegate,function lT(n,e){return Of("equalTo","key",e,!0),new pF(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Oi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new eo(this.database,new Ss(this._delegate._repo,this._delegate._path))}}class eo extends Oi{constructor(e,t){super(e,new Hi(t._repo,t._path,new $u,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new eo(this.database,$d(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new eo(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new eo(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=zw(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,vT("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Js("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=hM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function dM(n,e,t){if(Js("setWithPriority",n._path),_a("setWithPriority",e,n._path,!1),Wg("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return Py(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function eT(n){return Js("remove",n._path),zw(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function PM(n,e,t){var r;if(n=(0,N.m9)(n),Js("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new N.BH,h=us(n,()=>{});return function oM(n,e,t,r,i,o){Rf(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Ru(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=xy(n,e,void 0);c.currentInputSnapshot=h;const _=c.update(h.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Mf("transaction failed: Data returned ",_,c.path),c.status=0;const y=Hg(n.transactionQueueTree_,e),b=Zu(y)||[];let S;b.push(c),Sf(y,b),"object"==typeof _&&null!==_&&(0,N.r3)(_,".priority")?(S=(0,N.DV)(_,".priority"),(0,N.hu)(qg(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Cf(n.serverSyncTree_,e)||ue.EMPTY_NODE).getPriority().val();const R=Kg(n),F=Ot(_,S),q=Df(F,h,R);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=q,c.currentWriteId=Ay(n);const he=Ey(n.serverSyncTree_,e,q,c.currentWriteId,c.applyLocally);Ro(n.eventQueue_,e,he),Vw(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,y,b)=>{let S=null;_?o.reject(_):(S=new Qu(b,new Ss(n._repo,n._path),w),o.resolve(new tm(y,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new FM(o.committed,new gl(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function lM(n,e){n=(0,N.m9)(n),Js("setPriority",n._path),Wg("setPriority",e,!1);const t=new N.BH;return Py(n._repo,_n(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function cM(n,e){n=(0,N.m9)(n),Js("push",n._path),_a("push",e,n._path,!0);const t=Zb(n._repo),r=kf(t),i=$d(n,r),o=$d(n,r);let c;return c=null!=e?zw(o,e).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new eo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const o=new eo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Js("Reference.onDisconnect",this._delegate._path),new LM(new Hd(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vf{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:By,forceLongPolling:em}}useEmulator(e,t,r={}){!function TM(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&vs("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Cs(Cs.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);o=new Cs(c)}!function Xu(n,e,t,r){n.repoInfo_=new lt(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof eo){const t=Ny(this._delegate,e.toString());return new eo(this,t)}{const t=Gw(this._delegate,e);return new eo(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=Ny(this._delegate,e);return new eo(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function DM(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),Uw(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function gT(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function sM(n){n.persistentConnection_&&n.persistentConnection_.resume(No)}(n._repo)}(this._delegate)}}Vf.ServerValue={TIMESTAMP:function _T(){return AM}(),increment:n=>function yT(n){return{".sv":{increment:n}}}(n)};var UM=Object.freeze({__proto__:null,initStandalone:function Xw({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){bd(t);const c=new ur.zt("auth-internal",new ur.H0("database-standalone"));return c.setComponent(new ur.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Vf(hT(n,c,void 0,e,o),n),namespace:i}}});const jy=Vf.ServerValue;!function VM(n){n.INTERNAL.registerComponent(new ur.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Vf(i,r)},"PUBLIC").setServiceProps({Reference:eo,Query:Oi,Database:Vf,DataSnapshot:gl,enableLogging:mT,INTERNAL:UM,ServerValue:jy}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(xu.Z);var Ju=k(8645),$n=k(2459),Hy=k(3093),BM=k(4552);class jM extends Ju.x{constructor(e=1/0,t=1/0,r=BM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}function wT(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Ks.B)({connector:()=>new jM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const rm=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function va(n,e){return(0,ar.e)((t,r)=>{let i=0;t.subscribe((0,tr.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var Gd=k(6232);function zd(n){return n<=0?()=>Gd.E:(0,ar.e)((e,t)=>{let r=0;e.subscribe((0,tr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function im(n){return(0,ar.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function HM(n=$y){return(0,ar.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $y(){return new rm}function ml(n,e){const t=arguments.length>=2;return r=>r.pipe(n?va((i,o)=>n(i,o,r)):Ou.y,zd(1),t?im(e):HM(()=>new rm))}var sm=k(4674);function Gy(n,e){return(0,sm.m)(e)?(0,On.w)(()=>n,e):(0,On.w)(()=>n)}var Jw=k(5137);k(4097);const qy=new Map,eI={activated:!1,tokenObservers:[]},ET={initialized:!1,enabled:!1};function lr(n){return qy.get(n)||Object.assign({},eI)}function fm(){return ET}const Wy="https://content-firebaseappcheck.googleapis.com/v1",gF="exchangeDebugToken",qM={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ZM{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,K.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function mF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gi=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nI(n){if(!lr(n).activated)throw Gi.create("use-before-activation",{appName:n.name})}function yl(n,e){return pm.apply(this,arguments)}function pm(){return(pm=(0,K.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,o)}catch(S){throw Gi.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw Gi.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Gi.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(_[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}})).apply(this,arguments)}function Gf(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Wy}/projects/${t}/apps/${r}:${gF}?key=${i}`,body:{debug_token:e}}}const DT="firebase-app-check-database",YM=1,ec="firebase-app-check-store";let Yy=null;function sI(){return(sI=(0,K.Z)(function*(n,e){const r=(yield function AT(){return Yy||(Yy=new Promise((n,e)=>{try{const t=indexedDB.open(DT,YM);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ec,{keyPath:"compositeKey"})}}catch(t){e(Gi.create("storage-open",{originalErrorMessage:t?.message}))}}),Yy)}()).transaction(ec,"readwrite"),o=r.objectStore(ec).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=_=>{c()},r.onerror=_=>{var y;h(Gi.create("storage-set",{originalErrorMessage:null===(y=_.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const zf=new cr.Yd("@firebase/app-check");function aI(n,e){return(0,N.hl)()?function iI(n,e){return function XM(n,e){return sI.apply(this,arguments)}(function MT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uI(){return fm().enabled}function cI(){return lI.apply(this,arguments)}function lI(){return(lI=(0,K.Z)(function*(){const n=fm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dI={error:"UNKNOWN_ERROR"};function hI(n){return N.US.encodeString(JSON.stringify(n),!1)}function ev(n){return qf.apply(this,arguments)}function qf(){return(qf=(0,K.Z)(function*(n,e=!1){const t=n.app;nI(t);const r=lr(t);let o,i=r.token;if(i&&!vl(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(vl(_)?i=_:yield aI(t,void 0))}if(!e&&i&&vl(i))return{token:i.token};let h,c=!1;if(uI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yl(Gf(t,yield cI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield aI(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield lr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?zf.warn(_.message):zf.error(_),o=_}return i?o?h=vl(i)?{token:i.token,internalError:o}:pI(o):(h={token:i.token},r.token=i,yield aI(t,i)):h=pI(o),c&&function nv(n,e){const t=lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function mm(n){return _m.apply(this,arguments)}function _m(){return(_m=(0,K.Z)(function*(n){const e=n.app;nI(e);const{provider:t}=lr(e);if(uI()){const r=yield cI(),{token:i}=yield yl(Gf(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function fI(n,e){const t=lr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xT(n){const{app:e}=n,t=lr(e);let r=t.tokenRefresher;r||(r=function tO(n){const{app:e}=n;return new ZM((0,K.Z)(function*(){let r;if(r=lr(e).token?yield ev(n,!0):yield ev(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},qM.RETRIAL_MIN_WAIT,qM.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vl(n){return n.expireTimeMillis-Date.now()>0}function pI(n){return{token:hI(dI),error:n}}class RT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=lr(this.app);for(const t of e)fI(this.app,t.next);return Promise.resolve()}}const FT="app-check-internal";!function TI(){(0,fn._registerComponent)(new ur.wA("app-check",n=>function nO(n,e){return new RT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FT).initialize()})),(0,fn._registerComponent)(new ur.wA(FT,n=>function rO(n){return{getToken:e=>ev(n,e),getLimitedUseToken:()=>mm(n),addTokenListener:e=>function tv(n,e,t,r){const{app:i}=n,o=lr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&vl(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),xT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xT(n))}(n,"INTERNAL",e),removeTokenListener:e=>fI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fn.registerVersion)("@firebase/app-check","0.8.0")}();class wm{constructor(){return(0,on.vb)("app-check")}}typeof window<"u"&&window;var Il=k(120);const DI=new f.OlP("angularfire2.auth.use-emulator"),sv=new f.OlP("angularfire2.auth.settings"),SI=new f.OlP("angularfire2.auth.tenant-id"),ov=new f.OlP("angularfire2.auth.langugage-code"),jT=new f.OlP("angularfire2.auth.use-device-language"),av=new f.OlP("angularfire.auth.persistence"),Im=(n,e,t,r,i,o,c,h)=>(0,er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,o&&_.useDeviceLanguage(),c)for(const[y,b]of Object.entries(c))_.settings[y]=b;return h&&_.setPersistence(h),_},[t,r,i,o,c,h]);let to=(()=>{class n{constructor(t,r,i,o,c,h,_,y,b,S,R,F){const q=new Ju.x,he=(0,ft.of)(void 0).pipe((0,Hy.Q)(c.outsideAngular),(0,On.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,8977)))),(0,Et.U)(()=>(0,er.on)(t,o,r)),(0,Et.U)(ve=>Im(ve,o,h,y,b,S,_,R)),wT({bufferSize:1,refCount:!1}));if(Gs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ft.of)(null);else{he.pipe(ml()).subscribe();const ze=he.pipe((0,On.w)(ct=>ct.getRedirectResult().then(At=>At,()=>null)),on.iC,wT({bufferSize:1,refCount:!1})),ot=he.pipe((0,On.w)(ct=>new Er.y(At=>({unsubscribe:o.runOutsideAngular(()=>ct.onAuthStateChanged(Ht=>At.next(Ht),Ht=>At.error(Ht),()=>At.complete()))})))),We=he.pipe((0,On.w)(ct=>new Er.y(At=>({unsubscribe:o.runOutsideAngular(()=>ct.onIdTokenChanged(Ht=>At.next(Ht),Ht=>At.error(Ht),()=>At.complete()))}))));this.authState=ze.pipe(Gy(ot),(0,Jw.R)(c.outsideAngular),(0,Hy.Q)(c.insideAngular)),this.user=ze.pipe(Gy(We),(0,Jw.R)(c.outsideAngular),(0,Hy.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,On.w)(ct=>ct?(0,$n.D)(ct.getIdToken()):(0,ft.of)(null))),this.idTokenResult=this.user.pipe((0,On.w)(ct=>ct?(0,$n.D)(ct.getIdTokenResult()):(0,ft.of)(null))),this.credential=(0,To.T)(ze,q,this.authState.pipe(va(ct=>!ct))).pipe((0,Et.U)(ct=>ct?.user?ct:null),(0,Jw.R)(c.outsideAngular),(0,Hy.Q)(c.insideAngular))}return(0,er.pX)(this,he,o,{spy:{apply:(ve,ze,ot)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&ot.then(We=>q.next(We))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(er.Dh),f.LFG(er.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(DI,8),f.LFG(sv,8),f.LFG(SI,8),f.LFG(ov,8),f.LFG(jT,8),f.LFG(av,8),f.LFG(wm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Lo(n){return null==n}function Fo(n){return"function"==typeof n.set}function AI(n,e){return Fo(e)?e:n.ref(e)}function PI(n,e){if(function IO(n){return"string"==typeof n}(n))return e.stringCase();if(Fo(n))return e.firebaseCase();if(function ru(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Cm(n,e,t="on",r=_s.z){return new Er.y(i=>{let o=null;return o=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Et.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:c,key:h}}),(0,Ks.B)())}function HT(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function MI(n,e){const{payload:t,prevKey:r,key:i}=e,o=HT(n,i),c=function EO(n,e){if(Lo(e))return 0;{const t=HT(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const y={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function Wf(n){return(Lo(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $T(n,e,t){return function CO(n,e,t){return Cm(n,"value","once",t).pipe((0,On.w)(r=>{const i=[(0,ft.of)(r)];return e.forEach(o=>i.push(Cm(n,o,"on",t))),(0,To.T)(...i).pipe(kr(MI,[]))}),(0,Lr.x)())}(n,e=Wf(e),t)}function OI(n,e,t){const r=(e=Wf(e)).map(i=>Cm(n,i,"on",t));return(0,To.T)(...r)}function xI(n,e){return function(r,i){return PI(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function uv(n){return function(t){return t?PI(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function RI(n,e){return function(){return Cm(n,"value","on",e)}}const qT=new f.OlP("angularfire2.realtimeDatabaseURL"),SO=new f.OlP("angularfire2.database.use-emulator");let AO=(()=>{class n{constructor(t,r,i,o,c,h,_,y,b,S,R,F,q,he,ve){this.schedulers=h;const ze=_,ot=(0,er.on)(t,c,r);y&&Im(ot,c,b,R,F,q,S,he),this.database=(0,er.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const We=c.runOutsideAngular(()=>ot.database(i||void 0));return ze&&We.useEmulator(...ze),We},[ze])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>AI(this.database,t));let o=i;return r&&(o=r(i)),function DO(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xI(r,"update"),set:xI(r,"set"),push:i=>r.push(i),remove:uv(r),snapshotChanges:i=>$T(n,i,t).pipe(on.iC),stateChanges:i=>OI(n,i,t).pipe(on.iC),auditTrail:i=>function bO(n,e,t){return function GT(n,e,t){return function TO(n,e){return Cm(n,"value","on",e).pipe((0,Et.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Ed(...n){const e=(0,Do.jO)(n);return(0,ar.e)((t,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,$a.Xf)(n[_]).subscribe((0,tr.x)(r,y=>{o[_]=y,!h&&!c[_]&&(c[_]=!0,(h=c.every(Ou.y))&&(c=null))},aa.Z));t.subscribe((0,tr.x)(r,_=>{if(h){const y=[_,...o];r.next(e?e(...y):y)}}))})}(e),(0,Et.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(_=>_.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),function ys(n){return(0,ar.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,tr.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Et.U)(i=>i.actions))}(n,OI(n,e).pipe(kr((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(on.iC),valueChanges:(i,o)=>$T(n,i,t).pipe((0,Et.U)(h=>h.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),on.iC)}}(o,this)}object(t){return function zT(n,e){return{query:n,snapshotChanges:()=>RI(n,e.schedulers.outsideAngular)().pipe(on.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>RI(n,e.schedulers.outsideAngular)().pipe(on.iC,(0,Et.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>AI(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(er.Dh),f.LFG(er.xv,8),f.LFG(qT,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(SO,8),f.LFG(to,8),f.LFG(DI,8),f.LFG(sv,8),f.LFG(SI,8),f.LFG(ov,8),f.LFG(jT,8),f.LFG(av,8),f.LFG(wm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WT=(()=>{class n{constructor(){Il.Z.registerVersion("angularfire",on.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[AO]}),n})();var Wd=k(7537);function cv(...n){return function ZT(){return(0,Wd.J)(1)}()((0,$n.D)(n,(0,Do.yG)(n)))}function Em(...n){const e=(0,Do.yG)(n);return(0,ar.e)((t,r)=>{(e?cv(n,t,e):cv(n,t)).subscribe(r)})}function lv(){return(0,ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,tr.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var it,KT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uo={},dv=dv||{},Bt=KT||self;function hv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var NI="closure_uid_"+(1e9*Math.random()>>>0),MO=0;function OO(n,e,t){return n.call.apply(n.bind,arguments)}function xO(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function zi(n,e,t){return(zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OO:xO).apply(null,arguments)}function fv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Cl(){this.s=this.s,this.o=this.o}Cl.prototype.s=!1,Cl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function PO(n){Object.prototype.hasOwnProperty.call(n,NI)&&n[NI]||(n[NI]=++MO)}(this)},Cl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function QT(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(hv(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let c=0;c<o;c++)n[i+c]=r[c]}else n.push(r)}}function qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}qi.prototype.h=function(){this.defaultPrevented=!0};var NO=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",()=>{},e),Bt.removeEventListener("test",()=>{},e)}catch{}return n}();function Zf(n){return/^[\s\xa0]*$/.test(n)}function Tm(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Ia(n){return-1!=Tm().indexOf(n)}function pv(n){return pv[" "](n),n}pv[" "]=function(){};var UI,n,JT=Ia("Opera"),Zd=Ia("Trident")||Ia("MSIE"),LI=Ia("Edge"),gv=LI||Zd,FI=Ia("Gecko")&&!(-1!=Tm().toLowerCase().indexOf("webkit")&&!Ia("Edge"))&&!(Ia("Trident")||Ia("MSIE"))&&!Ia("Edge"),eD=-1!=Tm().toLowerCase().indexOf("webkit")&&!Ia("Edge");function El(){var n=Bt.document;return n?n.documentMode:void 0}e:{var VI="",bl=(n=Tm(),FI?/rv:([^\);]+)(\)|;)/.exec(n):LI?/Edge\/([\d\.]+)/.exec(n):Zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eD?/WebKit\/(\S+)/.exec(n):JT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bl&&(VI=bl?bl[1]:""),Zd){var tD=El();if(null!=tD&&tD>parseFloat(VI)){UI=String(tD);break e}}UI=VI}var nD=Bt.document&&Zd&&(El()||parseInt(UI,10))||void 0;function Kf(n,e){if(qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FI){e:{try{pv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IF[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kf.$.h.call(this)}}mi(Kf,qi);var IF={2:"touch",3:"pen",4:"mouse"};Kf.prototype.h=function(){Kf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var iu="closure_listenable_"+(1e6*Math.random()|0),LO=0;function FO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++LO,this.fa=this.ia=!1}function mv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Tl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Sm(n){const e={};for(const t in n)e[t]=n[t];return e}const Am="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cs(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Am.length;o++)t=Am[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function BI(n){this.src=n,this.g={},this.h=0}function _v(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=YT(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(mv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yv(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}BI.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=yv(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new FO(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var jI="closure_lm_"+(1e6*Math.random()|0),vv={};function HI(n,e,t,r,i){if(r&&r.once)return iD(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)HI(n,e[o],t,r,i);return null}return t=Qf(t),n&&n[iu]?n.O(e,t,bm(r)?!!r.capture:!!r,i):$I(n,e,t,!1,r,i)}function $I(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=bm(i)?!!i.capture:!!i,h=zI(n);if(h||(n[jI]=h=new BI(n)),(t=h.add(e,t,r,c,o)).proxy)return t;if(r=function rD(){const e=VO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)NO||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Yf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iD(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)iD(n,e[o],t,r,i);return null}return t=Qf(t),n&&n[iu]?n.P(e,t,bm(r)?!!r.capture:!!r,i):$I(n,e,t,!0,r,i)}function sD(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sD(n,e[o],t,r,i);else r=bm(r)?!!r.capture:!!r,t=Qf(t),n&&n[iu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yv(o=n.g[e],t,r,i))&&(mv(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=zI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yv(e,t,r,i)),(t=-1<n?e[n]:null)&&GI(t))}function GI(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[iu])_v(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Yf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zI(e))?(_v(t,n),0==t.h&&(t.src=null,e[jI]=null)):mv(n)}}}function Yf(n){return n in vv?vv[n]:vv[n]="on"+n}function VO(n,e){if(n.fa)n=!0;else{e=new Kf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&GI(n),n=t.call(r,e)}return n}function zI(n){return(n=n[jI])instanceof BI?n:null}var qI="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qf(n){return"function"==typeof n?n:(n[qI]||(n[qI]=function(e){return n.handleEvent(e)}),n[qI])}function Jr(){Cl.call(this),this.i=new BI(this),this.S=this,this.J=null}function _i(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new qi(e,n);else if(e instanceof qi)e.target=e.target||n;else{var i=e;cs(e=new qi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=Pm(c,r,!0,e)&&i}if(i=Pm(c=e.g=n,r,!0,e)&&i,i=Pm(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Pm(c=e.g=t[o],r,!1,e)&&i}function Pm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.fa&&c.capture==t){var h=c.listener,_=c.la||c.src;c.ia&&_v(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}mi(Jr,Cl),Jr.prototype[iu]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){sD(this,n,e,t,r)},Jr.prototype.N=function(){if(Jr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mv(t[r]);delete n.g[e],n.h--}}this.J=null},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var WI=Bt.JSON.stringify;function Om(){var n=wv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var oD=new class Mm{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new jO,n=>n.reset());class jO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function aD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function uD(n){Bt.setTimeout(()=>{throw n},0)}let Xf,xm=!1,wv=new class BO{constructor(){this.h=this.g=null}add(e,t){const r=oD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},cD=()=>{const n=Bt.Promise.resolve(void 0);Xf=()=>{n.then(HO)}};var HO=()=>{for(var n;n=Om();){try{n.h.call(n.g)}catch(t){uD(t)}var e=oD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xm=!1};function ZI(n,e){Jr.call(this),this.h=n||1,this.g=e||Bt,this.j=zi(this.qb,this),this.l=Date.now()}function lD(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function dD(n,e,t){if("function"==typeof n)t&&(n=zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function $O(n){n.g=dD(()=>{n.g=null,n.i&&(n.i=!1,$O(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mi(ZI,Jr),(it=ZI.prototype).ga=!1,it.T=null,it.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_i(this,"tick"),this.ga&&(lD(this),this.start()))}},it.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.N=function(){ZI.$.N.call(this),lD(this),delete this.g};class hD extends Cl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$O(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dl(n){Cl.call(this),this.h=n,this.g={}}mi(Dl,Cl);var fD=[];function pD(n,e,t,r){Array.isArray(t)||(t&&(fD[0]=t.toString()),t=fD);for(var i=0;i<t.length;i++){var o=HI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function KI(n){Tl(n.g,function(e,t){this.g.hasOwnProperty(t)&&GI(e)},n),n.g={}}function Sl(){this.g=!0}function Jf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CF(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return WI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Dl.prototype.N=function(){Dl.$.N.call(this),KI(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sl.prototype.Ea=function(){this.g=!1},Sl.prototype.info=function(){};var Kd={},YI=null;function Iv(){return YI=YI||new Jr}function gD(n){qi.call(this,Kd.Ta,n)}function tc(n){const e=Iv();_i(e,new gD(e))}function mD(n,e){qi.call(this,Kd.STAT_EVENT,n),this.stat=e}function Wi(n){const e=Iv();_i(e,new mD(e,n))}function _D(n,e){qi.call(this,Kd.Ua,n),this.size=e}function ep(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}Kd.Ta="serverreachability",mi(gD,qi),Kd.STAT_EVENT="statevent",mi(mD,qi),Kd.Ua="timingevent",mi(_D,qi);var Cv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},QI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function XI(){}function yD(){}XI.prototype.h=null;var eC,tp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function bv(){qi.call(this,"d")}function JI(){qi.call(this,"c")}function Tv(){}function Yd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Dl(this),this.P=wD,this.V=new ZI(n=gv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vD}function vD(){this.i=null,this.g="",this.h=!1}mi(bv,qi),mi(JI,qi),mi(Tv,XI),Tv.prototype.g=function(){return new XMLHttpRequest},Tv.prototype.i=function(){return{}},eC=new Tv;var wD=45e3,tC={},Dv={};function nC(n,e,t){n.L=1,n.v=Pv(su(e)),n.s=t,n.S=!0,ID(n,null)}function ID(n,e){n.G=Date.now(),Rm(n),n.A=su(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Mv(t.i,"t",r),n.C=0,t=n.l.J,n.h=new vD,n.g=vC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new hD(zi(n.Pa,n,n.g),n.O)),pD(n.U,n.g,"readystatechange",n.nb),e=n.I?Sm(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),tc(),function GO(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),_=0;_<h.length;_++){var y=h[_].split("=");if(1<y.length){var b=y[0];y=y[1];var S=b.split("_");c=2<=S.length&&"type"==S[1]?c+(b+"=")+y+"&":c+(b+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function CD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function ED(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=WO(n,t),i==Dv){4==e&&(n.o=4,Wi(14),r=!1),Jf(n.j,n.m,null,"[Incomplete Response]");break}if(i==tC){n.o=4,Wi(15),Jf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jf(n.j,n.m,i,null),Sv(n,i)}CD(n)&&i!=Dv&&i!=tC&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),$D(e),e.M=!0,Wi(11))):(Jf(n.j,n.m,t,"[Invalid Chunked Response]"),Qd(n),km(n))}function WO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dv:(t=Number(e.substring(t,r)),isNaN(t)?tC:(r+=1)+t>e.length?Dv:(e=e.slice(r,r+t),n.C=r+t,e))}function Rm(n){n.Y=Date.now()+n.P,rC(n,n.P)}function rC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ep(zi(n.lb,n),e)}function Nm(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function km(n){0==n.l.H||n.J||GD(n.l,n)}function Qd(n){Nm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,lD(n.V),KI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Sv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||cC(t.i,n)))if(!n.K&&cC(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Nv(t),Al(t)}_C(t),Wi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=ep(zi(t.ib,t),6e3));if(1>=RD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else uu(t,11)}else if((n.K||t.g==n)&&Nv(t),!Zf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const b=y[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=y[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.L=r=1.5*R,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const q=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var o=r.i;o.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ov(o,o.h),o.h=null))}if(r.F){const he=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;he&&(r.Da=he,Ln(r.I,r.F,he))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=qD(r,r.J?r.pa:null,r.Y),c.K){XO(r.i,c);var h=c,_=r.L;_&&h.setTimeout(_),h.B&&(Nm(h),Rm(h)),r.g=c}else sx(r);0<t.j.length&&sp(t)}else"stop"!=y[0]&&"close"!=y[0]||uu(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?uu(t,7):mC(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}tc()}catch{}}function bD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function KO(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(hv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ZO(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(hv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(it=Yd.prototype).setTimeout=function(n){this.P=n},it.nb=function(n){n=n.target;const e=this.M;e&&3==ou(n)?e.l():this.Pa(n)},it.Pa=function(n){try{if(n==this.g)e:{const b=ou(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||gv||this.g&&(this.h.h||this.g.ja()||ix(this.g)))){this.J||4!=b||7==e||tc(),Nm(this);var t=this.g.da();this.ca=t;t:if(CD(this)){var r=ix(this.g);n="";var i=r.length,o=4==ou(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qd(this),km(this);var c="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function zO(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zf(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Wi(12),Qd(this),km(this);break e}Jf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sv(this,t)}this.S?(ED(this,b,c),gv&&this.i&&3==b&&(pD(this.U,this.V,"tick",this.mb),this.V.start())):(Jf(this.j,this.m,c,null),Sv(this,c)),4==b&&Qd(this),this.i&&!this.J&&(4==b?GD(this.l,this):(this.i=!1,Rm(this)))}else(function TF(n){const e={};n=(n.g&&2<=ou(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Zf(n[r]))continue;var t=aD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function UO(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),Qd(this),km(this)}}}catch{}},it.mb=function(){if(this.g){var n=ou(this.g),e=this.g.ja();this.C<e.length&&(Nm(this),ED(this,n,e),this.i&&4!=n&&Rm(this))}},it.cancel=function(){this.J=!0,Qd(this)},it.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(tc(),Wi(17)),Qd(this),this.o=2,km(this)):rC(this,this.Y-n)};var TD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof nc){this.h=n.h,np(this,n.j),this.s=n.s,this.g=n.g,Av(this,n.m),this.l=n.l;var e=n.i,t=new ip;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),DD(this,t),this.o=n.o}else n&&(e=String(n).match(TD))?(this.h=!1,np(this,e[1]||"",!0),this.s=rp(e[2]||""),this.g=rp(e[3]||"",!0),Av(this,e[4]),this.l=rp(e[5]||"",!0),DD(this,e[6]||"",!0),this.o=rp(e[7]||"")):(this.h=!1,this.i=new ip(null,this.h))}function su(n){return new nc(n)}function np(n,e,t){n.j=t?rp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Av(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function DD(n,e,t){e instanceof ip?(n.i=e,function MD(n,e){e&&!n.j&&(rc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PD(this,r),Mv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ca(e,oC)),n.i=new ip(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function Pv(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ca(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ca(e,AD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ca(e,AD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ca(t,"/"==t.charAt(0)?sC:EF,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ca(t,YO)),n.join("")};var AD=/[#\/\?@]/g,EF=/[#\?:]/g,sC=/[#\?]/g,oC=/[#\?@]/g,YO=/#/g;function ip(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rc(n){n.g||(n.g=new Map,n.h=0,n.i&&function iC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PD(n,e){rc(n),e=Xd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function aC(n,e){return rc(n),e=Xd(n,e),n.g.has(e)}function Mv(n,e,t){PD(n,e),0<t.length&&(n.i=null,n.g.set(Xd(n,e),kI(t)),n.h+=t.length)}function Xd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uC(n){this.l=n||QO,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=ip.prototype).add=function(n,e){rc(this),this.i=null,n=Xd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){rc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},it.ta=function(){rc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},it.Z=function(n){rc(this);let e=[];if("string"==typeof n)aC(this,n)&&(e=e.concat(this.g.get(Xd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return rc(this),this.i=null,aC(this,n=Xd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=o;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var QO=10;function xD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RD(n){return n.h?1:n.g?n.g.size:0}function cC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ov(n,e){n.g?n.g.add(e):n.h=e}function XO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lC(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kI(n.i)}uC.prototype.cancel=function(){if(this.i=lC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var JO=class{stringify(n){return Bt.JSON.stringify(n,void 0)}parse(n){return Bt.JSON.parse(n,void 0)}};function ex(){this.g=new JO}function bF(n,e,t){const r=t||"";try{bD(n,function(i,o){let c=i;bm(i)&&(c=WI(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Lm(n){this.l=n.fc||null,this.j=n.ob||!1}function Rv(n,e){Jr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=dC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mi(Lm,XI),Lm.prototype.g=function(){return new Rv(this.l,this.j)},Lm.prototype.i=function(n){return function(){return n}}({}),mi(Rv,Jr);var dC=0;function ND(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Fm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Um(n)}function Um(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Rv.prototype).open=function(n,e){if(this.readyState!=dC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Um(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fm(this)),this.readyState=dC},it.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Um(this)),this.g&&(this.readyState=3,Um(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ND(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},it.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fm(this):Um(this),3==this.readyState&&ND(this)}},it.Za=function(n){this.g&&(this.response=this.responseText=n,Fm(this))},it.Ya=function(n){this.g&&(this.response=n,Fm(this))},it.ka=function(){this.g&&Fm(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nx=Bt.JSON.parse;function Tr(n){Jr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kD,this.L=this.M=!1}mi(Tr,Jr);var kD="",rx=/^https?$/i,Vm=["POST","PUT"];function hC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fC(n),Bm(n)}function fC(n){n.F||(n.F=!0,_i(n,"complete"),_i(n,"error"))}function pC(n){if(n.h&&typeof dv<"u"&&(!n.C[1]||4!=ou(n)||2!=n.da()))if(n.v&&4==ou(n))dD(n.La,0,n);else if(_i(n,"readystatechange"),4==ou(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(TD)[1]||null;!i&&Bt.self&&Bt.self.location&&(i=Bt.self.location.protocol.slice(0,-1)),r=!rx.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var o=2<ou(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",fC(n)}}finally{Bm(n)}}}function Bm(n,e){if(n.g){FD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function FD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function ou(n){return n.g?n.g.readyState:0}function ix(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case kD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function UD(n){let e="";return Tl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=UD(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function jm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function VD(n){this.Ga=0,this.j=[],this.l=new Sl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jm("baseRetryDelayMs",5e3,n),this.hb=jm("retryDelaySeedMs",1e4,n),this.eb=jm("forwardChannelMaxRetries",2,n),this.xa=jm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new uC(n&&n.concurrentRequestLimit),this.Ja=new ex,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function mC(n){if(BD(n),3==n.H){var e=n.W++,t=su(n.I);if(Ln(t,"SID",n.K),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Jd(n,t),(e=new Yd(n,n.l,e)).L=2,e.v=Pv(su(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon)try{t=Bt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rm(e)}yC(n)}function Al(n){n.g&&($D(n),n.g.cancel(),n.g=null)}function BD(n){Al(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),Nv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function sp(n){if(!xD(n.i)&&!n.m){n.m=!0;var e=n.Na;Xf||cD(),xm||(Xf(),xm=!0),wv.add(e,n),n.C=0}}function jD(n,e){var t;t=e?e.m:n.W++;const r=su(n.I);Ln(r,"SID",n.K),Ln(r,"RID",t),Ln(r,"AID",n.V),Jd(n,r),n.o&&n.s&&gC(r,n.o,n.s),t=new Yd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=HD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ov(n.i,t),nC(t,r,e)}function Jd(n,e){n.na&&Tl(n.na,function(t,r){Ln(e,r,t)}),n.h&&bD({},function(t,r){Ln(e,r,t)})}function HD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?zi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].g,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let _=0;_<t;_++){let y=i[_].g;const b=i[_].map;if(y-=o,0>y)o=Math.max(0,i[_].g-100),h=!1;else try{bF(b,c,"req"+y+"_")}catch{r&&r(b)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function sx(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Xf||cD(),xm||(Xf(),xm=!0),wv.add(e,n),n.A=0}}function _C(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ep(zi(n.Ma,n),zD(n,n.A)),n.A++,0))}function $D(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function op(n){n.g=new Yd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=su(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.K),Ln(e,"AID",n.V),Ln(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ln(e,"TO",n.qa),Ln(e,"TYPE","xmlhttp"),Jd(n,e),n.o&&n.s&&gC(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Pv(su(e)),t.s=null,t.S=!0,ID(t,n)}function Nv(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function GD(n,e){var t=null;if(n.g==e){Nv(n),$D(n),n.g=null;var r=2}else{if(!cC(n.i,e))return;t=e.F,XO(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;_i(r=Iv(),new _D(r,t)),sp(n)}else sx(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function au(n,e){return!(RD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ep(zi(n.Na,n,e),zD(n,n.C)),n.C++,0)))}(n,e)||2==r&&_C(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:uu(n,5);break;case 4:uu(n,10);break;case 3:uu(n,6);break;default:uu(n,2)}}function zD(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function uu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=zi(n.pb,n);t||(t=new nc("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||np(t,"https"),Pv(t)),function tx(n,e){const t=new Sl;if(Bt.Image){const r=new Image;r.onload=fv(xv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fv(xv,t,r,"TestLoadImage: error",!1,e),r.onabort=fv(xv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fv(xv,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Wi(2);n.H=0,n.h&&n.h.za(e),yC(n),BD(n)}function yC(n){if(n.H=0,n.ma=[],n.h){const e=lC(n.i);(0!=e.length||0!=n.j.length)&&(QT(n.ma,e),QT(n.ma,n.j),n.i.i.length=0,kI(n.j),n.j.length=0),n.h.ya()}}function qD(n,e,t){var r=t instanceof nc?su(t):new nc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Av(r,r.m);else{var i=Bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new nc(null);r&&np(o,r),e&&(o.g=e),i&&Av(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Ln(r,t,e),Ln(r,"VER",n.ra),Jd(n,r),r}function vC(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Ha&&!n.va?new Lm({ob:!0}):n.va)).Oa(n.J),e}function Hm(){}function kv(){if(Zd&&!(10<=Number(nD)))throw Error("Environmental error: no available transport.")}function no(n,e){Jr.call(this),this.g=new VD(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Zf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ap(this)}function wC(n){bv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function WD(){JI.call(this),this.status=1}function ap(n){this.g=n}function Ps(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function IC(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],c=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;c=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(c<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((o=(e=t+((c=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=o+((c=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function bn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(it=Tr.prototype).Oa=function(n){this.M=n},it.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():eC.g(),this.C=function Ev(n){return n.h||(n.h=n.i())}(this.u?this.u:eC),this.g.onreadystatechange=zi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void hC(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Bt.FormData&&n instanceof Bt.FormData,!(0<=YT(Vm,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of t)this.g.setRequestHeader(o,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{FD(this),0<this.B&&((this.L=function LD(n){return Zd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zi(this.ua,this)):this.A=dD(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){hC(this,o)}},it.ua=function(){typeof dv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),Bm(this))},it.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bm(this,!0)),Tr.$.N.call(this)},it.La=function(){this.s||(this.G||this.v||this.l?pC(this):this.kb())},it.kb=function(){pC(this)},it.isActive=function(){return!!this.g},it.da=function(){try{return 2<ou(this)?this.g.status:-1}catch{return-1}},it.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nx(e)}},it.Ia=function(){return this.m},it.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=VD.prototype).ra=8,it.H=1,it.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Yd(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Sm(o),cs(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HD(this,i,e),Ln(t=su(this.I),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),Jd(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(UD(o)))+"&"+e:this.o&&gC(t,this.o,o)),Ov(this.i,i),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),i.aa=!0,nC(i,t,null)):nC(i,t,e),this.H=2}}else 3==this.H&&(n?jD(this,n):0==this.j.length||xD(this.i)||jD(this))},it.Ma=function(){if(this.u=null,op(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ep(zi(this.jb,this),n)}},it.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wi(10),Al(this),op(this))},it.ib=function(){null!=this.v&&(this.v=null,Al(this),_C(this),Wi(19))},it.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Wi(2)):(this.l.info("Failed to ping google.com"),Wi(1))},it.isActive=function(){return!!this.h&&this.h.isActive(this)},(it=Hm.prototype).Ba=function(){},it.Aa=function(){},it.za=function(){},it.ya=function(){},it.isActive=function(){return!0},it.Va=function(){},kv.prototype.g=function(n,e){return new no(n,e)},mi(no,Jr),no.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Wi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=qD(n,null,n.Y),sp(n)},no.prototype.close=function(){mC(this.g)},no.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=WI(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&sp(e)},no.prototype.N=function(){this.g.h=null,delete this.j,mC(this.g),delete this.g,no.$.N.call(this)},mi(wC,bv),mi(WD,JI),mi(ap,Hm),ap.prototype.Ba=function(){_i(this.g,"a")},ap.prototype.Aa=function(n){_i(this.g,new wC(n))},ap.prototype.za=function(n){_i(this.g,new WD)},ap.prototype.ya=function(){_i(this.g,"b")},mi(Ps,function ZD(){this.blockSize=-1}),Ps.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ps.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)IC(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){IC(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){IC(this,r),i=0;break}}this.h=i,this.i+=e},Ps.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var KD={};function Lv(n){return-128<=n&&128>n?function XT(n,e){var t=KD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new bn([0|e],0>e?-1:0)}):new bn([0|n],0>n?-1:0)}function Vo(n){if(isNaN(n)||!isFinite(n))return eh;if(0>n)return ei(Vo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=EC;return new bn(e,0)}var EC=4294967296,eh=Lv(0),Fv=Lv(1),YD=Lv(16777216);function ic(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ms(n){return-1==n.h}function ei(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new bn(t,~n.h).add(Fv)}function $m(n,e){return n.add(ei(e))}function up(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function th(n,e){this.g=n,this.h=e}function Uv(n,e){if(ic(e))throw Error("division by zero");if(ic(n))return new th(eh,eh);if(Ms(n))return e=Uv(ei(n),e),new th(ei(e.g),ei(e.h));if(Ms(e))return e=Uv(n,ei(e)),new th(ei(e.g),e.h);if(30<n.g.length){if(Ms(n)||Ms(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Fv,r=e;0>=r.X(n);)t=QD(t),r=QD(r);var i=cp(t,1),o=cp(r,1);for(r=cp(r,2),t=cp(t,2);!ic(r);){var c=o.add(r);0>=c.X(n)&&(i=i.add(t),o=c),r=cp(r,1),t=cp(t,1)}return e=$m(n,i.R(e)),new th(i,e)}for(i=eh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(o=Vo(t)).R(e);Ms(c)||0<c.X(n);)c=(o=Vo(t-=r)).R(e);ic(o)&&(o=Fv),i=i.add(o),n=$m(n,c)}return new th(i,n)}function QD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new bn(t,n.h)}function cp(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new bn(i,n.h)}(it=bn.prototype).ea=function(){if(Ms(this))return-ei(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:EC+r)*e,e*=EC}return n},it.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ic(this))return"0";if(Ms(this))return"-"+ei(this).toString(n);for(var e=Vo(Math.pow(n,6)),t=this,r="";;){var i=Uv(t,e).g,o=((0<(t=$m(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ic(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},it.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},it.X=function(n){return Ms(n=$m(this,n))?-1:ic(n)?0:1},it.abs=function(){return Ms(this)?ei(this):this},it.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),c=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(o&=65535)}return new bn(t,-2147483648&t[t.length-1]?-1:0)},it.R=function(n){if(ic(this)||ic(n))return eh;if(Ms(this))return Ms(n)?ei(this).R(ei(n)):ei(ei(this).R(n));if(Ms(n))return ei(this.R(ei(n)));if(0>this.X(YD)&&0>n.X(YD))return Vo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=c*_,up(t,2*r+2*i),t[2*r+2*i+1]+=o*_,up(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,up(t,2*r+2*i+1),t[2*r+2*i+2]+=o*h,up(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new bn(t,0)},it.gb=function(n){return Uv(this,n).h},it.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new bn(t,this.h&n.h)},it.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new bn(t,this.h|n.h)},it.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new bn(t,this.h^n.h)},kv.prototype.createWebChannel=kv.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,Cv.NO_ERROR=0,Cv.TIMEOUT=8,Cv.HTTP_ERROR=6,QI.COMPLETE="complete",yD.EventType=tp,tp.OPEN="a",tp.CLOSE="b",tp.ERROR="c",tp.MESSAGE="d",Jr.prototype.listen=Jr.prototype.O,Tr.prototype.listenOnce=Tr.prototype.P,Tr.prototype.getLastError=Tr.prototype.Sa,Tr.prototype.getLastErrorCode=Tr.prototype.Ia,Tr.prototype.getStatus=Tr.prototype.da,Tr.prototype.getResponseJson=Tr.prototype.Wa,Tr.prototype.getResponseText=Tr.prototype.ja,Tr.prototype.send=Tr.prototype.ha,Tr.prototype.setWithCredentials=Tr.prototype.Oa,Ps.prototype.digest=Ps.prototype.l,Ps.prototype.reset=Ps.prototype.reset,Ps.prototype.update=Ps.prototype.j,bn.prototype.add=bn.prototype.add,bn.prototype.multiply=bn.prototype.R,bn.prototype.modulo=bn.prototype.gb,bn.prototype.compare=bn.prototype.X,bn.prototype.toNumber=bn.prototype.ea,bn.prototype.toString=bn.prototype.toString,bn.prototype.getBits=bn.prototype.D,bn.fromNumber=Vo,bn.fromString=function CC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ei(CC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Vo(Math.pow(e,8)),r=eh,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+o),e);8>o?(o=Vo(Math.pow(e,o)),r=r.R(o).add(Vo(c))):r=(r=r.R(t)).add(Vo(c))}return r};var ox=Uo.createWebChannelTransport=function(){return new kv},XD=Uo.getStatEventTarget=function(){return Iv()},Gm=Uo.ErrorCode=Cv,JD=Uo.EventType=QI,ax=Uo.Event=Kd,bC=Uo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},eS=Uo.FetchXmlHttpFactory=Lm,Vv=Uo.WebChannel=yD,tS=Uo.XhrIo=Tr,nS=Uo.Md5=Ps,lp=Uo.Integer=bn;const TC="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let Gr="9.23.0";const ro=new cr.Yd("@firebase/firestore");function DC(){return ro.logLevel}function Be(n,...e){if(ro.logLevel<=cr.in.DEBUG){const t=e.map(zm);ro.debug(`Firestore (${Gr}): ${n}`,...t)}}function zr(n,...e){if(ro.logLevel<=cr.in.ERROR){const t=e.map(zm);ro.error(`Firestore (${Gr}): ${n}`,...t)}}function io(n,...e){if(ro.logLevel<=cr.in.WARN){const t=e.map(zm);ro.warn(`Firestore (${Gr}): ${n}`,...t)}}function zm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Gr}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function wt(n,e){n||dt()}function Qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class SC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class lx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dx{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ti,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,K.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},_=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>_(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?_(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new SC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new yi(e)}}class AC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class rS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new AC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bv{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.T;return this.T=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new iS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function SF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class PC{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=SF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function nh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rh(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new rr(0,0))}static max(){return new _t(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends ih{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const hx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends ih{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return hx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Me(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new Me(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(hn.fromString(e))}static fromName(e){return new Xe(hn.fromString(e).popFirst(5))}static empty(){return new Xe(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new hn(e.slice()))}}class jv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function MC(n){return n.fields.find(e=>2===e.kind)}function Pl(n){return n.fields.filter(e=>2!==e.kind)}jv.UNKNOWN_ID=-1;class Hv{constructor(e,t){this.fieldPath=e,this.kind=t}}class dp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dp(0,Os.min())}}function uS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new Os(i,Xe.empty(),e)}function cS(n){return new Os(n.readTime,n.key,-1)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(_t.min(),Xe.empty(),-1)}static max(){return new Os(_t.max(),Xe.empty(),-1)}}function OC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const xC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sc(n){return $v.apply(this,arguments)}function $v(){return $v=(0,K.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==xC)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),$v.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},_=>r(_))}),c=!0,o===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let _=0;_<o;_++){const y=_;t(e[y]).next(b=>{c[y]=b,++h,h===o&&r(c)},b=>i(b))}})}static doWhile(e,t){return new oe((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Gv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ti,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new zv(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=dS(r.target.error);this.v.reject(new zv(e,i))}}static open(e,t,r,i){try{return new Gv(t,e.transaction(i,r))}catch(o){throw new zv(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AF(t)}}class cu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===cu.S((0,N.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),hp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,N.hl)())return!1;if(cu.C())return!0;const e=(0,N.z$)(),t=cu.S(e),r=0<t&&t<10,i=cu.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,K.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new zv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Me(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new zv(e,h))},o.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,K.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.$(e);const _=Gv.open(o.db,e,c?"readonly":"readwrite",r),y=i(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),oe.reject(b))).toPromise();return y.catch(()=>{}),yield _.R,y}catch(_){const y=_,b="FirebaseError"!==y.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),o.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class lS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return hp(this.L.delete())}}class zv extends Me{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sh(n){return"IndexedDbTransactionError"===n.name}class AF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hp(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),hp(this.store.add(e))}get(e){return hp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),hp(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),hp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new oe((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=o=>{const c=dS(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new lS(h),y=t(h.primaryKey,h.value,_);if(y instanceof oe){const b=y.catch(S=>(_.done(),oe.reject(S)));r.push(b)}_.isDone?i():null===_.K?h.continue():h.continue(_.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hp(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=dS(r.target.error);t(i)}})}let fx=!1;function dS(n){const e=cu.S((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fx||(fx=!0,setTimeout(()=>{throw r},0)),r}}return n}class PF{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,K.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){sh(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield sc(r)}yield t.et(6e4)}))}}class MF{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,K.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return oe.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Be("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,o)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=cS(o);OC(c,r)>0&&(r=c)}),new Os(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function fp(n){return null==n}function oh(n){return 0===n&&1/n==-1/0}function NC(n){return"number"==typeof n&&Number.isInteger(n)&&!oh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Zi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=qv(n.get(t),e);return hS(e)}function qv(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function hS(n){return n+"\x01\x01"}function oc(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:dt()}o=c+2}return new hn(r)}const px=["userId","batchId"];function Wv(n,e){return[n,Zi(e)]}function kC(n,e,t){return[n,Zi(e),t]}const gx={},mx=["prefixPath","collectionGroup","readTime","documentId"],_x=["prefixPath","collectionGroup","documentId"],OF=["collectionGroup","readTime","prefixPath","documentId"],yx=["canonicalId","targetId"],qm=["targetId","path"],Zv=["path","targetId"],vx=["collectionId","parent"],wx=["indexId","uid"],Ix=["uid","sequenceNumber"],Cx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ex=["indexId","uid","orderedDocumentKey"],bx=["userId","collectionPath","documentId"],LC=["userId","collectionPath","largestBatchId"],Tx=["userId","collectionGroup","largestBatchId"],fS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dx=[...fS,"documentOverlays"],pS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gS=pS,Sx=[...gS,"indexConfiguration","indexState","indexEntries"];class FC extends RC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function vi(n,e){const t=Qe(n);return cu.M(t.ht,e)}function mS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ac(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gn{constructor(e,t){this.comparator=e,this.root=t||wi.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yv(this.root,e,this.comparator,!0)}}class Yv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??wi.RED,this.left=i??wi.EMPTY,this.right=o??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new wi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1,wi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ax(this.data.getIterator())}getIteratorFrom(e){return new Ax(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class Ax{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ni(n){return n.hasNext()?n.getNext():void 0}class ls{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new ls([])}unionWith(e){let t=new zn(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _S extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _S("Invalid base64 string: "+i):i}}(e);return new un(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const Px=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lu(n){if(wt(!!n),"string"==typeof n){let e=0;const t=Px.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function uc(n){return"string"==typeof n?un.fromBase64String(n):un.fromUint8Array(n)}function pp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Wm(n){const e=n.mapValue.fields.__previous_value__;return pp(e)?Wm(e):e}function gp(n){const e=lu(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class Mx{constructor(e,t,r,i,o,c,h,_,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=_,this.useFetchStreams=y}}class cc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}const lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zm={nullValue:"NULL_VALUE"};function dc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pp(n)?4:vS(n)?9007199254740991:10:dt()}function du(n,e){if(n===e)return!0;const t=dc(n);if(t!==dc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gp(n).isEqual(gp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=lu(r.timestampValue),c=lu(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,uc(n.bytesValue).isEqual(uc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Dr(r.doubleValue),c=Dr(i.doubleValue);return o===c?oh(o)===oh(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return nh(n.arrayValue.values||[],e.arrayValue.values||[],du);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(mS(o)!==mS(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!du(o[h],c[h])))return!1;return!0}(n,e);default:return dt()}var i}function mp(n,e){return void 0!==(n.values||[]).find(t=>du(t,e))}function Ml(n,e){if(n===e)return 0;const t=dc(n),r=dc(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Dr(i.integerValue||i.doubleValue),h=Dr(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Qv(n.timestampValue,e.timestampValue);case 4:return Qv(gp(n),gp(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,o){const c=uc(i),h=uc(o);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let _=0;_<c.length&&_<h.length;_++){const y=Vt(c[_],h[_]);if(0!==y)return y}return Vt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Vt(Dr(i.latitude),Dr(o.latitude));return 0!==c?c:Vt(Dr(i.longitude),Dr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let _=0;_<c.length&&_<h.length;++_){const y=Ml(c[_],h[_]);if(y)return y}return Vt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===lc.mapValue&&o===lc.mapValue)return 0;if(i===lc.mapValue)return 1;if(o===lc.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=o.fields||{},y=Object.keys(_);h.sort(),y.sort();for(let b=0;b<h.length&&b<y.length;++b){const S=Vt(h[b],y[b]);if(0!==S)return S;const R=Ml(c[h[b]],_[y[b]]);if(0!==R)return R}return Vt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function Qv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=lu(n),r=lu(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function so(n){return Xv(n)}function Xv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=lu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?uc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=Xv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Xv(r.fields[h])}`;return o+"}"}(n.mapValue):dt();var e}function hc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UC(n){return!!n&&"integerValue"in n}function Jv(n){return!!n&&"arrayValue"in n}function VC(n){return!!n&&"nullValue"in n}function yS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function e0(n){return!!n&&"mapValue"in n}function Km(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ac(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Km(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Km(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wS(n){return"nullValue"in n?Zm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hc(cc.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function RF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hc(cc.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?lc:dt()}function BC(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function IS(n,e){const t=Ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!e0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Km(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Km(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());e0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];e0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ac(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ii(Km(this.value))}}function Ox(n){const e=[];return ac(n.fields,(t,r)=>{const i=new Ur([t]);if(e0(r)){const o=Ox(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ls(e)}class Fn{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Fn(e,0,_t.min(),_t.min(),_t.min(),Ii.empty(),0)}static newFoundDocument(e,t,r,i){return new Fn(e,1,t,_t.min(),r,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,_t.min(),_t.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,_t.min(),_t.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fc{constructor(e,t){this.position=e,this.inclusive=t}}function jC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),t.key):Ml(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function CS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!du(n.position[t],e.position[t]))return!1;return!0}class ah{constructor(e,t="asc"){this.field=e,this.dir=t}}function ES(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class uh{}class Jt extends uh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new NF(e,t,r):"array-contains"===t?new Nx(e,r):"in"===t?new AS(e,r):"not-in"===t?new LF(e,r):"array-contains-any"===t?new FF(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kF(e,r):new DS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ml(t,this.value)):null!==t&&dc(this.value)===dc(t)&&this.matchesComparison(Ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends uh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new En(e,t)}matches(e){return ch(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ch(n){return"and"===n.op}function HC(n){return"or"===n.op}function $C(n){return xx(n)&&ch(n)}function xx(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function t0(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+so(n.value);if($C(n))return n.filters.map(e=>t0(e)).join(",");{const e=n.filters.map(t=>t0(t)).join(",");return`${n.op}(${e})`}}function bS(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&du(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,c)=>i&&bS(o,r.filters[c]),!0)}(n,e):void dt();var t,r}function TS(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function Rx(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${so(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(Rx).join(" ,")+"}"}(n):"Filter";var e}class NF extends Jt{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class kF extends Jt{constructor(e,t){super(e,"in",t),this.keys=SS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DS extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=SS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class Nx extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jv(t)&&mp(t.arrayValue,this.value)}}class AS extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mp(this.value.arrayValue,t)}}class LF extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mp(this.value.arrayValue,t)}}class FF extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mp(this.value.arrayValue,r))}}class UF{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.dt=null}}function PS(n,e=null,t=[],r=[],i=null,o=null,c=null){return new UF(n,e,t,r,i,o,c)}function yp(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>t0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>so(r)).join(",")),e.dt=t}return e.dt}function Ym(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ES(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CS(n.startAt,e.startAt)&&CS(n.endAt,e.endAt)}function lh(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function n0(n,e){return n.filters.filter(t=>t instanceof Jt&&t.field.isEqual(e))}function MS(n,e,t){let r=Zm,i=!0;for(const o of n0(n,e)){let c=Zm,h=!0;switch(o.op){case"<":case"<=":c=wS(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=Zm}BC({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];BC({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function GC(n,e,t){let r=lc,i=!0;for(const o of n0(n,e)){let c=lc,h=!0;switch(o.op){case">=":case">":c=RF(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=lc}IS({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];IS({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ds{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=_,this.wt=null,this._t=null}}function zC(n,e,t,r,i,o,c,h){return new ds(n,e,t,r,i,o,c,h)}function Ol(n){return new ds(n)}function r0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Qm(n){return null!==n.collectionGroup}function hu(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=vp(e),r=qC(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ah(t)),e.wt.push(new ah(Ur.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ah(Ur.keyField(),o))}}}return e.wt}function xs(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=PS(e.path,e.collectionGroup,hu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of hu(e))t.push(new ah(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new fc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new fc(e.startAt.position,e.startAt.inclusive):null;e._t=PS(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function OS(n,e){e.getFirstInequalityField(),vp(n);const t=n.filters.concat([e]);return new ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function WC(n,e,t){return new ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wp(n,e){return Ym(xs(n),xs(e))&&n.limitType===e.limitType}function xS(n){return`${yp(xs(n))}|lt:${n.limitType}`}function ZC(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Rx(r)).join(", ")}]`),fp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>so(r)).join(",")),`Target(${t})`}(xs(n))}; limitType=${n.limitType})`}function Xm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of hu(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const h=jC(i,o,c);return i.inclusive?h<=0:h<0}(t.startAt,hu(t),r)||t.endAt&&!function(i,o,c){const h=jC(i,o,c);return i.inclusive?h>=0:h>0}(t.endAt,hu(t),r)));var t,r}function RS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KC(n){return(e,t)=>{let r=!1;for(const i of hu(n)){const o=NS(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function NS(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,o,c){const h=o.data.field(i),_=c.data.field(i);return null!==h&&null!==_?Ml(h,_):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}class fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ac(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Kv(this.inner)}size(){return this.innerSize}}const kx=new Gn(Xe.comparator);function Rs(){return kx}const YC=new Gn(Xe.comparator);function dh(...n){let e=YC;for(const t of n)e=e.insert(t.key,t);return e}function Lx(n){let e=YC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ea(){return Jm()}function s0(){return Jm()}function Jm(){return new fu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Fx=new Gn(Xe.comparator),VF=new zn(Xe.comparator);function Wt(...n){let e=VF;for(const t of n)e=e.add(t);return e}const Ux=new zn(Vt);function QC(){return Ux}function kS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function LS(n){return{integerValue:""+n}}function XC(n,e){return NC(e)?LS(e):kS(n,e)}class e_{constructor(){this._=void 0}}function FS(n,e,t){return n instanceof Ip?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&pp(i)&&(i=Wm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof pc?JC(n,e):n instanceof xl?US(n,e):function(r,i){const o=Bx(r,i),c=VS(o)+VS(r.gt);return UC(o)&&UC(r.gt)?LS(c):kS(r.serializer,c)}(n,e)}function Vx(n,e,t){return n instanceof pc?JC(n,e):n instanceof xl?US(n,e):t}function Bx(n,e){return n instanceof gc?UC(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ip extends e_{}class pc extends e_{constructor(e){super(),this.elements=e}}function JC(n,e){const t=BS(e);for(const r of n.elements)t.some(i=>du(i,r))||t.push(r);return{arrayValue:{values:t}}}class xl extends e_{constructor(e){super(),this.elements=e}}function US(n,e){let t=BS(e);for(const r of n.elements)t=t.filter(i=>!du(i,r));return{arrayValue:{values:t}}}class gc extends e_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function VS(n){return Dr(n.integerValue||n.doubleValue)}function BS(n){return Jv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Cp{constructor(e,t){this.field=e,this.transform=t}}class BF{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class o0{}function jx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new r_(n.key,ir.none()):new n_(n.key,n.data,ir.none());{const t=n.data,r=Ii.empty();let i=new zn(Ur.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new Rl(n.key,r,new ls(i.toArray()),ir.none())}}function jF(n,e,t){n instanceof n_?function(r,i,o){const c=r.value.clone(),h=zx(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Rl?function(r,i,o){if(!eE(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=zx(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(Gx(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function t_(n,e,t,r){return n instanceof n_?function(i,o,c,h){if(!eE(i.precondition,o))return c;const _=i.value.clone(),y=HS(i.fieldTransforms,h,o);return _.setAll(y),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rl?function(i,o,c,h){if(!eE(i.precondition,o))return c;const _=HS(i.fieldTransforms,h,o),y=o.data;return y.setAll(Gx(i)),y.setAll(_),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,eE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function Hx(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Bx(r.transform,i||null);null!=o&&(null===t&&(t=Ii.empty()),t.set(r.field,o))}return t||null}function $x(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nh(t,r,(i,o)=>function jS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof pc&&r instanceof pc||t instanceof xl&&r instanceof xl?nh(t.elements,r.elements,du):t instanceof gc&&r instanceof gc?du(t.gt,r.gt):t instanceof Ip&&r instanceof Ip);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class n_ extends o0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rl extends o0{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Gx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zx(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,Vx(c,h,t[i]))}return r}function HS(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,FS(o,c,e))}return r}class r_ extends o0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $S extends o0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&jF(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=t_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=t_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=s0();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const _=jx(c,h);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(t,r)=>$x(t,r))&&nh(this.baseMutations,e.baseMutations,(t,r)=>$x(t,r))}}class zS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=Fx;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new zS(e,t,r,i)}}class qS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class HF{constructor(e,t){this.count=e,this.unchangedNames=t}}var s,a;function u(n){switch(n){default:return dt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function l(n){if(void 0===n)return zr("GRPC error has no .code"),de.UNKNOWN;switch(n){case s.OK:return de.OK;case s.CANCELLED:return de.CANCELLED;case s.UNKNOWN:return de.UNKNOWN;case s.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case s.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case s.INTERNAL:return de.INTERNAL;case s.UNAVAILABLE:return de.UNAVAILABLE;case s.UNAUTHENTICATED:return de.UNAUTHENTICATED;case s.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case s.NOT_FOUND:return de.NOT_FOUND;case s.ALREADY_EXISTS:return de.ALREADY_EXISTS;case s.PERMISSION_DENIED:return de.PERMISSION_DENIED;case s.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case s.ABORTED:return de.ABORTED;case s.OUT_OF_RANGE:return de.OUT_OF_RANGE;case s.UNIMPLEMENTED:return de.UNIMPLEMENTED;case s.DATA_LOSS:return de.DATA_LOSS;default:return dt()}}(a=s||(s={}))[a.OK=0]="OK",a[a.CANCELLED=1]="CANCELLED",a[a.UNKNOWN=2]="UNKNOWN",a[a.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",a[a.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",a[a.NOT_FOUND=5]="NOT_FOUND",a[a.ALREADY_EXISTS=6]="ALREADY_EXISTS",a[a.PERMISSION_DENIED=7]="PERMISSION_DENIED",a[a.UNAUTHENTICATED=16]="UNAUTHENTICATED",a[a.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",a[a.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",a[a.ABORTED=10]="ABORTED",a[a.OUT_OF_RANGE=11]="OUT_OF_RANGE",a[a.UNIMPLEMENTED=12]="UNIMPLEMENTED",a[a.INTERNAL=13]="INTERNAL",a[a.UNAVAILABLE=14]="UNAVAILABLE",a[a.DATA_LOSS=15]="DATA_LOSS";class d{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return g}static getOrCreateInstance(){return null===g&&(g=new d),g}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let g=null;function v(){return new TextEncoder}const C=new lp([4294967295,4294967295],0);function T(n){const e=v().encode(n),t=new nS;return t.update(e),new Uint8Array(t.digest())}function P(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lp([t,r],0),new lp([i,o],0)]}class x{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new V(`Invalid padding: ${t}`);if(r<0)throw new V(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new V(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new V(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=lp.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(lp.fromNumber(r)));return 1===i.compare(C)&&(i=new lp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=T(e),[r,i]=P(t);for(let o=0;o<this.hashCount;o++){const c=this.Et(r,i,o);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new x(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.It)return;const t=T(e),[r,i]=P(t);for(let o=0;o<this.hashCount;o++){const c=this.Et(r,i,o);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class V extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class W{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Q.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new W(_t.min(),i,new Gn(Vt),Rs(),Wt())}}class Q{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Q(r,t,Wt(),Wt(),Wt())}}class Ie{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Ue{constructor(e,t){this.targetId=e,this.Vt=t}}class tt{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yt{constructor(){this.St=0,this.Dt=Zt(),this.Ct=un.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Wt(),t=Wt(),r=Wt();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Q(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Zt()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class xe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Rs(),this.zt=Lt(),this.Wt=new Gn(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const c=o.target;if(lh(c))if(0===i){const h=new Xe(c.path);this.Yt(r,h,Fn.newNoDocument(h,_t.min()))}else wt(1===i);else{const h=this.ie(r);if(h!==i){const _=this.re(e,h);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=d.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,b,S){var R,F,q,he,ve,ze;const ot={localCacheCount:b,existenceFilterCount:S.count},We=S.unchangedNames;return We&&(ot.bloomFilter={applied:0===y,hashCount:null!==(R=We?.hashCount)&&void 0!==R?R:0,bitmapLength:null!==(he=null===(q=null===(F=We?.bits)||void 0===F?void 0:F.bitmap)||void 0===q?void 0:q.length)&&void 0!==he?he:0,padding:null!==(ze=null===(ve=We?.bits)||void 0===ve?void 0:ve.padding)&&void 0!==ze?ze:0}),ot}(_,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:c=0},hashCount:h=0}=r;let _,y;try{_=uc(o).toUint8Array()}catch(b){if(b instanceof _S)return io("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{y=new x(_,c,h)}catch(b){return io(b instanceof V?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const c=this.Gt.ue(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,c)=>{const h=this.se(c);if(h){if(o.current&&lh(h.target)){const _=new Xe(h.target.path);null!==this.jt.get(_)||this.ae(c,_)||this.Yt(c,_,Fn.newNoDocument(_,e))}o.Mt&&(t.set(c,o.Ot()),o.Ft())}});let r=Wt();this.zt.forEach((o,c)=>{let h=!0;c.forEachWhile(_=>{const y=this.se(_);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,c)=>c.setReadTime(e));const i=new W(e,t,this.Wt,this.jt,r);return this.jt=Rs(),this.zt=Lt(),this.Wt=new Gn(Vt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new yt,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new zn(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new yt),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Lt(){return new Gn(Xe.comparator)}function Zt(){return new Gn(Xe.comparator)}const Tn={asc:"ASCENDING",desc:"DESCENDING"},Ns={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mc={and:"AND",or:"OR"};class Ep{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function i_(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function bp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function f3(n,e){return bp(n,e.toTimestamp())}function ri(n){return wt(!!n),_t.fromTimestamp(function(e){const t=lu(e);return new rr(t.seconds,t.nanos)}(n))}function Wx(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $F(n){const e=hn.fromString(n);return wt(XF(e)),e}function tE(n,e){return Wx(n.databaseId,e.path)}function Nl(n,e){const t=$F(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(zF(t))}function Zx(n,e){return Wx(n.databaseId,e)}function GF(n){const e=$F(n);return 4===e.length?hn.emptyPath():zF(e)}function nE(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zF(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qF(n,e,t){return{name:tE(n,e),fields:t.value.mapValue.fields}}function WF(n,e,t){const r=Nl(n,e.name),i=ri(e.updateTime),o=e.createTime?ri(e.createTime):_t.min(),c=new Ii({mapValue:{fields:e.fields}}),h=Fn.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function rE(n,e){let t;if(e instanceof n_)t={update:qF(n,e.key,e.value)};else if(e instanceof r_)t={delete:tE(n,e.key)};else if(e instanceof Rl)t={update:qF(n,e.key,e.data),updateMask:I3(e.fieldMask)};else{if(!(e instanceof $S))return dt();t={verify:tE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ip)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof pc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gc)return{fieldPath:o.field.canonicalString(),increment:c.gt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:f3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function Kx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(ri(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(wt("REQUEST_TIME"===c.setToServerValue),h=new Ip):"appendMissingElements"in c?h=new pc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new xl(c.removeAllFromArray.values||[]):"increment"in c?h=new gc(o,c.increment):dt();const _=Ur.fromServerFormat(c.fieldPath);return new Cp(_,h)}(n,i)):[];var i;if(e.update){const i=Nl(n,e.update.name),o=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ls((e.updateMask.fieldPaths||[]).map(y=>Ur.fromServerFormat(y)));return new Rl(i,o,c,t,r)}return new n_(i,o,t,r)}if(e.delete){const i=Nl(n,e.delete);return new r_(i,t)}if(e.verify){const i=Nl(n,e.verify);return new $S(i,t)}return dt()}function ZF(n,e){return{documents:[Zx(n,e.path)]}}function Yx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return QF(En.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(_){if(0!==_.length)return _.map(y=>{return{field:Tp((b=y).field),direction:y3(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=i_(n,e.limit);var h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function KF(n){let e=GF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const S=YF(b);return S instanceof En&&$C(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new ah(a0((S=b).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,fp(S)?null:S}(t.limit));let _=null;var b;t.startAt&&(_=new fc((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new fc(b.values||[],!b.before)}(t.endAt)),zC(e,i,c,o,h,"F",_,y)}function YF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=a0(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=a0(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=a0(e.unaryFilter.field);return Jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=a0(e.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?Jt.create(a0((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>YF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function y3(n){return Tn[n]}function v3(n){return Ns[n]}function w3(n){return mc[n]}function Tp(n){return{fieldPath:n.canonicalString()}}function a0(n){return Ur.fromServerFormat(n.fieldPath)}function QF(n){return n instanceof Jt?function(e){if("=="===e.op){if(yS(e.value))return{unaryFilter:{field:Tp(e.field),op:"IS_NAN"}};if(VC(e.value))return{unaryFilter:{field:Tp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yS(e.value))return{unaryFilter:{field:Tp(e.field),op:"IS_NOT_NAN"}};if(VC(e.value))return{unaryFilter:{field:Tp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tp(e.field),op:v3(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>QF(r));return 1===t.length?t[0]:{compositeFilter:{op:w3(e.op),filters:t}}}(n):dt()}function I3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hh{constructor(e,t,r,i,o=_t.min(),c=_t.min(),h=un.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=_}withSequenceNumber(e){return new hh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JF{constructor(e){this.fe=e}}function e2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ZS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tE(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:bp(i,o.version.toTimestamp()),createTime:bp(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:s_(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:s_(e.version)}}var i,o;return r}function ZS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function s_(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function o_(n){const e=new rr(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function a_(n,e){const t=(e.baseMutations||[]).map(o=>Kx(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Kx(n.fe,o)),i=rr.fromMillis(e.localWriteTimeMs);return new GS(e.batchId,i,t,r)}function iE(n){const e=o_(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?o_(n.lastLimboFreeSnapshotVersion):_t.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=xs(Ol(GF(i.documents[0])))):r=xs(KF(n.query)),new hh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,un.fromBase64String(n.resumeToken))}function t2(n,e){const t=s_(e.snapshotVersion),r=s_(e.lastLimboFreeSnapshotVersion);let i;i=lh(e.target)?ZF(n.fe,e.target):Yx(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yp(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qx(n){const e=KF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?WC(e,e.limit,"L"):e}function Xx(n,e){return new qS(e.largestBatchId,Kx(n.fe,e.overlayMutation))}function n2(n,e){const t=e.path.lastSegment();return[n,Zi(e.path.popLast()),t]}function r2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:s_(r.readTime),documentKey:Zi(r.documentKey.path),largestBatchId:r.largestBatchId}}class E3{getBundleMetadata(e,t){return i2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:o_(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return i2(e).put({bundleId:(r=t).id,createTime:s_(ri(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Qx(i.bundledQuery),readTime:o_(i.readTime)};var i})}saveNamedQuery(e,t){return s2(e).put({name:(r=t).name,readTime:s_(ri(r.readTime)),bundledQuery:r.bundledQuery});var r}}function i2(n){return vi(n,"bundles")}function s2(n){return vi(n,"namedQueries")}class KS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new KS(e,t.uid||"")}getOverlay(e,t){return sE(e).get(n2(this.userId,t)).next(r=>r?Xx(this.serializer,r):null)}getOverlays(e,t){const r=Ea();return oe.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new qS(t,c);i.push(this.we(e,h))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Zi(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(sE(e).J("collectionPathOverlayIndex",h))}),oe.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ea(),o=Zi(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return sE(e).j("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const y=Xx(this.serializer,_);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ea();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sE(e).X({index:"collectionGroupOverlayIndex",range:h},(_,y,b)=>{const S=Xx(this.serializer,y);o.size()<i||S.largestBatchId===c?(o.set(S.getKey(),S),c=S.largestBatchId):b.done()}).next(()=>o)}we(e,t){return sE(e).put(function(r,i,o){const[c,h,_]=n2(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rE(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function sE(n){return vi(n,"documentOverlays")}class u_{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),oh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(uc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?vS(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):dt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Xe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function b3(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function o2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=b3(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}u_.Ve=new u_;class T3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=o2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=o2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class D3{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class S3{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class oE{constructor(){this.je=new T3,this.ze=new D3(this.je),this.We=new S3(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class c_{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new c_(this.indexId,this.documentKey,this.arrayValue,r)}}function Dp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=a2(n.arrayValue,e.arrayValue),0!==t?t:(t=a2(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function a2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class A3{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=MC(e);if(void 0!==t&&!this.en(t))return!1;const r=Pl(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[o];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[c++],h))return!1}++o}for(;o<r.length;++o)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function u2(n){var e,t;if(wt(n instanceof Jt||n instanceof En),n instanceof Jt){if(n instanceof AS){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Jt.create(n.field,"==",o)))||[];return En.create(i,"or")}return n}const r=n.filters.map(i=>u2(i));return En.create(r,n.op)}function P3(n){if(0===n.getFilters().length)return[];const e=tR(u2(n));return wt(c2(e)),Jx(e)||eR(e)?[e]:e.getFilters()}function Jx(n){return n instanceof Jt}function eR(n){return n instanceof En&&$C(n)}function c2(n){return Jx(n)||eR(n)||function(e){if(e instanceof En&&HC(e)){for(const t of e.getFilters())if(!Jx(t)&&!eR(t))return!1;return!0}return!1}(n)}function tR(n){if(wt(n instanceof Jt||n instanceof En),n instanceof Jt)return n;if(1===n.filters.length)return tR(n.filters[0]);const e=n.filters.map(r=>tR(r));let t=En.create(e,n.op);return t=YS(t),c2(t)?t:(wt(t instanceof En),wt(ch(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>nR(r,i)))}function nR(n,e){let t;return wt(n instanceof Jt||n instanceof En),wt(e instanceof Jt||e instanceof En),t=n instanceof Jt?e instanceof Jt?En.create([n,e],"and"):l2(n,e):e instanceof Jt?l2(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),ch(r)&&ch(i))return TS(r,i.getFilters());const o=HC(r)?r:i,c=HC(r)?i:r,h=o.filters.map(_=>nR(_,c));return En.create(h,"or")}(n,e),YS(t)}function l2(n,e){if(ch(e))return TS(e,n.getFilters());{const t=e.filters.map(r=>nR(n,r));return En.create(t,"or")}}function YS(n){if(wt(n instanceof Jt||n instanceof En),n instanceof Jt)return n;const e=n.getFilters();if(1===e.length)return YS(e[0]);if(xx(n))return n;const t=e.map(i=>YS(i)),r=[];return t.forEach(i=>{i instanceof Jt?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:En.create(r,n.op)}class M3{constructor(){this.rn=new rR}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Os.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class rR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(hn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(hn.comparator)).toArray()}}const QS=new Uint8Array(0);class O3{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rR,this.un=new fu(r=>yp(r),(r,i)=>Ym(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:Zi(i)};return d2(e).put(o)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rh(t),""],!1,!0);return d2(e).j(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(oc(c.parent))}return r})}addFieldIndex(e,t){const r=XS(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const o=r.add(i);if(t.indexState){const c=uE(e);return o.next(h=>{c.put(r2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=XS(e),i=uE(e),o=aE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=aE(e);let i=!0;const o=new Map;return oe.forEach(this.cn(t),c=>this.an(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Wt();const h=[];return oe.forEach(o,(_,y)=>{var b;Be("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${yp(t)}`);const S=function(We,ct){const At=MC(ct);if(void 0===At)return null;for(const Ht of n0(We,At.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(y,_),R=function(We,ct){const At=new Map;for(const Ht of Pl(ct))for(const jr of n0(We,Ht.fieldPath))switch(jr.op){case"==":case"in":At.set(Ht.fieldPath.canonicalString(),jr.value);break;case"not-in":case"!=":return At.set(Ht.fieldPath.canonicalString(),jr.value),Array.from(At.values())}return null}(y,_),F=function(We,ct){const At=[];let Ht=!0;for(const jr of Pl(ct)){const fo=0===jr.kind?MS(We,jr.fieldPath,We.startAt):GC(We,jr.fieldPath,We.startAt);At.push(fo.value),Ht&&(Ht=fo.inclusive)}return new fc(At,Ht)}(y,_),q=function(We,ct){const At=[];let Ht=!0;for(const jr of Pl(ct)){const fo=0===jr.kind?GC(We,jr.fieldPath,We.endAt):MS(We,jr.fieldPath,We.endAt);At.push(fo.value),Ht&&(Ht=fo.inclusive)}return new fc(At,Ht)}(y,_),he=this.hn(_,y,F),ve=this.hn(_,y,q),ze=this.ln(_,y,R),ot=this.fn(_.indexId,S,he,F.inclusive,ve,q.inclusive,ze);return oe.forEach(ot,We=>r.H(We,t.limit).next(ct=>{ct.forEach(At=>{const Ht=Xe.fromSegments(At.documentKey);c.has(Ht)||(c=c.add(Ht),h.push(Ht))})}))}).next(()=>h)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:P3(En.create(e.filters,"and")).map(r=>PS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,o.length),y=_/(null!=t?t.length:1),b=[];for(let S=0;S<_;++S){const R=t?this.dn(t[S/y]):QS,F=this.wn(e,R,r[S%y],i),q=this._n(e,R,o[S%y],c),he=h.map(ve=>this.wn(e,R,ve,!0));b.push(...this.createRange(F,q,he))}return b}wn(e,t,r,i){const o=new c_(e,Xe.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new c_(e,Xe.empty(),t,r);return i?o.Je():o}an(e,t){const r=new A3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.tn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,o=>this.an(e,o).next(c=>{c?0!==r&&c.fields.length<function(h){let _=new zn(Ur.comparator),y=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:_=_.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new oE;for(const i of Pl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.He(i.kind);u_.Ve._e(o,c)}return r.Qe()}dn(e){const t=new oE;return u_.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new oE;return u_.Ve._e(hc(this.databaseId,t),r.He(function(i){const o=Pl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new oE);let o=0;for(const c of Pl(e)){const h=r[o++];for(const _ of i)if(this.yn(t,c.fieldPath)&&Jv(h))i=this.pn(i,c,h);else{const y=_.He(c.kind);u_.Ve._e(h,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new oE;_.seed(h.Qe()),u_.Ve._e(c,_.He(t.kind)),o.push(_)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof Jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=XS(e),i=uE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const c=[];return oe.forEach(o,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(y,b){const S=b?new dp(b.sequenceNumber,new Os(o_(b.readTime),new Xe(oc(b.documentKey)),b.largestBatchId)):dp.empty(),R=y.fields.map(([F,q])=>new Hv(Ur.fromServerFormat(F),q));return new jv(y.indexId,y.collectionGroup,R,S)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=XS(e),o=uE(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>oe.forEach(h,_=>o.put(r2(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?oe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),oe.forEach(h,_=>this.En(e,i,_).next(y=>{const b=this.An(o,_);return y.isEqual(b)?oe.resolve():this.vn(e,o,_,y,b)}))))})}Rn(e,t,r,i){return aE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return aE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=aE(e);let o=new zn(Dp);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,h)=>{o=o.add(new c_(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}An(e,t){let r=new zn(Dp);const i=this.mn(t,e);if(null==i)return r;const o=MC(t);if(null!=o){const c=e.data.field(o.fieldPath);if(Jv(c))for(const h of c.arrayValue.values||[])r=r.add(new c_(t.indexId,e.key,this.dn(h),i))}else r=r.add(new c_(t.indexId,e.key,QS,i));return r}vn(e,t,r,i,o){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,y,b,S){const R=h.getIterator(),F=_.getIterator();let q=ni(R),he=ni(F);for(;q||he;){let ve=!1,ze=!1;if(q&&he){const ot=y(q,he);ot<0?ze=!0:ot>0&&(ve=!0)}else null!=q?ze=!0:ve=!0;ve?(b(he),he=ni(F)):ze?(S(q),q=ni(R)):(q=ni(R),he=ni(F))}}(i,o,Dp,h=>{c.push(this.Rn(e,t,r,h))},h=>{c.push(this.Pn(e,t,r,h))}),oe.waitFor(c)}Tn(e){let t=1;return uE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Dp(c,h)).filter((c,h,_)=>!h||0!==Dp(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=Dp(c,e),_=Dp(c,t);if(0===h)i[0]=e.Je();else if(h>0&&_<0)i.push(c),i.push(c.Je());else if(_>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,QS,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,QS,[]]))}return o}bn(e,t){return Dp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(h2)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||dt())).next(h2)}}function d2(n){return vi(n,"collectionParents")}function aE(n){return vi(n,"indexEntries")}function XS(n){return vi(n,"indexConfiguration")}function uE(n){return vi(n,"indexState")}function h2(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;OC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Os(e.readTime,e.documentKey,t)}const f2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ks(e,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function p2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.X({range:c},(b,S,R)=>(h++,R.delete()));o.push(_.next(()=>{wt(1===h)}));const y=[];for(const b of t.mutations){const S=kC(e,b.key.path,t.batchId);o.push(i.delete(S)),y.push(b.key)}return oe.waitFor(o).next(()=>y)}function JS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class eA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new eA(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sp(e).X({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=u0(e),c=Sp(e);return c.add({}).next(h=>{wt("number"==typeof h);const _=new GS(h,t,r,i),y=function(R,F,q){const he=q.baseMutations.map(ze=>rE(R.fe,ze)),ve=q.mutations.map(ze=>rE(R.fe,ze));return{userId:F,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:he,mutations:ve}}(this.serializer,this.userId,_),b=[];let S=new zn((R,F)=>Vt(R.canonicalString(),F.canonicalString()));for(const R of i){const F=kC(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),b.push(c.put(y)),b.push(o.put(F,gx))}return S.forEach(R=>{b.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Vn[h]=_.keys()}),oe.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Sp(e).get(t).next(r=>r?(wt(r.userId===this.userId),a_(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Sp(e).X({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(wt(h.batchId>=r),o=a_(this.serializer,h)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sp(e).j("userMutationsIndex",t).next(r=>r.map(i=>a_(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return u0(e).X({range:i},(c,h,_)=>{const[y,b,S]=c,R=oc(b);if(y===this.userId&&t.path.isEqual(R))return Sp(e).get(S).next(F=>{if(!F)throw dt();wt(F.userId===this.userId),o.push(a_(this.serializer,F))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(Vt);const i=[];return t.forEach(o=>{const c=Wv(this.userId,o.path),h=IDBKeyRange.lowerBound(c),_=u0(e).X({range:h},(y,b,S)=>{const[R,F,q]=y,he=oc(F);R===this.userId&&o.path.isEqual(he)?r=r.add(q):S.done()});i.push(_)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Wv(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new zn(Vt);return u0(e).X({range:c},(_,y,b)=>{const[S,R,F]=_,q=oc(R);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(h=h.add(F)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Sp(e).get(o).next(c=>{if(null===c)throw dt();wt(c.userId===this.userId),r.push(a_(this.serializer,c))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return p2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return u0(e).X({range:r},(o,c,h)=>{if(o[0]===this.userId){const _=oc(o[1]);i.push(_)}else h.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return g2(e,this.userId,t)}xn(e){return m2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function g2(n,e,t){const r=Wv(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return u0(n).X({range:o,Y:!0},(h,_,y)=>{const[b,S,R]=h;b===e&&S===i&&(c=!0),y.done()}).next(()=>c)}function Sp(n){return vi(n,"mutations")}function u0(n){return vi(n,"documentMutations")}function m2(n){return vi(n,"mutationQueues")}class l_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new l_(0)}static Mn(){return new l_(-1)}}class x3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new l_(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>_t.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>c0(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return c0(e).X((c,h)=>{const _=iE(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,o.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(o)).next(()=>i)}forEachTarget(e,t){return c0(e).X((r,i)=>{const o=iE(i);t(o)})}$n(e){return _2(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return _2(e).put("targetGlobalKey",t)}Fn(e,t){return c0(e).put(t2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return c0(e).X({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const y=iE(h);Ym(t,y.target)&&(o=y,_.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Ap(e);return t.forEach(c=>{const h=Zi(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ap(e);return oe.forEach(t,o=>{const c=Zi(o.path);return oe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Ap(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ap(e);let o=Wt();return i.X({range:r,Y:!0},(c,h,_)=>{const y=oc(c[1]),b=new Xe(y);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=Zi(t.path),i=IDBKeyRange.bound([r],[rh(r)],!1,!0);let o=0;return Ap(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,h],_,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}le(e,t){return c0(e).get(t).next(r=>r?iE(r):null)}}function c0(n){return vi(n,"targets")}function _2(n){return vi(n,"targetGlobal")}function Ap(n){return vi(n,"targetDocuments")}function y2([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class R3{constructor(e){this.Ln=e,this.buffer=new zn(y2),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();y2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,K.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){sh(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield sc(r)}yield t.Qn(3e5)}))}}class N3{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Bo.ct);const r=new R3(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(f2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,c,h,_,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),DC()<=cr.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(y-_)+`ms\nTotal Duration: ${y-b}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class k3{constructor(e,t){this.db=e,this.garbageCollector=function w2(n,e){return new N3(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return tA(e,r)}removeReference(e,t,r){return tA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tA(e,t)}Xn(e,t){return function(r,i){let o=!1;return m2(r).Z(c=>g2(r,c,i).next(h=>(h&&(o=!0),oe.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(c,h)=>{if(h<=t){const _=this.Xn(e,c).next(y=>{if(!y)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,_t.min()),Ap(e).delete([0,Zi(c.path)])))});i.push(_)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tA(e,t)}Yn(e,t){const r=Ap(e);let i,o=Bo.ct;return r.X({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:y})=>{0===c?(o!==Bo.ct&&t(new Xe(oc(i)),o),o=y,i=_):o=Bo.ct}).next(()=>{o!==Bo.ct&&t(new Xe(oc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tA(n,e){return Ap(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zi(e.path),sequenceNumber:r}));var r}class I2{constructor(){this.changes=new fu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class L3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return d_(e).put(r)}removeEntry(e,t,r){return d_(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ZS(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return d_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return d_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,o)=>{r={document:this.ts(t,o),size:JS(o)}}).next(()=>r)}getEntries(e,t){let r=Rs();return this.ns(e,t,(i,o)=>{const c=this.ts(i,o);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Rs(),i=new Gn(Xe.comparator);return this.ns(e,t,(o,c)=>{const h=this.ts(o,c);r=r.insert(o,h),i=i.insert(o,JS(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new zn(T2);t.forEach(_=>i=i.add(_));const o=IDBKeyRange.bound(cE(i.first()),cE(i.last())),c=i.getIterator();let h=c.getNext();return d_(e).X({index:"documentKeyIndex",range:o},(_,y,b)=>{const S=Xe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&T2(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?b.G(cE(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),ZS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return d_(e).j(IDBKeyRange.bound(c,h,!0)).next(_=>{let y=Rs();for(const b of _){const S=this.ts(Xe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Xm(t,S)||i.has(S.key))&&(y=y.insert(S.key,S))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=Rs();const c=b2(t,r),h=b2(t,Os.max());return d_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,y,b)=>{const S=this.ts(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(S.key,S),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new F3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return E2(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return E2(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function C3(n,e){let t;if(e.document)t=WF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=o_(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Xe.fromSegments(e.unknownDocument.path),i=o_(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new rr(r[0],r[1]);return _t.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Fn.newInvalidDocument(e)}}function C2(n){return new L3(n)}class F3 extends I2{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new fu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zn((o,c)=>Vt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.us.get(o);if(t.push(this.os.removeEntry(e,o,h.readTime)),c.isValidDocument()){const _=e2(this.os.serializer,c);i=i.add(o.path.popLast());const y=JS(_);r+=y-h.size,t.push(this.os.addEntry(e,o,_))}else if(r-=h.size,this.trackRemovals){const _=e2(this.os.serializer,c.convertToNoDocument(_t.min()));t.push(this.os.addEntry(e,o,_))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,c)=>{this.us.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function E2(n){return vi(n,"remoteDocumentGlobal")}function d_(n){return vi(n,"remoteDocumentsV14")}function cE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function b2(n,e){const t=e.documentKey.path.toArray();return[n,ZS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function T2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Vt(t[o],r[o]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class U3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class D2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&t_(r.mutation,i,ls.empty(),rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=Ea();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=dh();return o.forEach((h,_)=>{c=c.insert(h,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Rs();const c=Jm(),h=Jm();return t.forEach((_,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof Rl)?o=o.insert(y.key,y):void 0!==b?(c.set(y.key,b.mutation.getFieldMask()),t_(b.mutation,y,b.mutation.getFieldMask(),rr.now())):c.set(y.key,ls.empty())}),this.recalculateAndSaveOverlays(e,o).next(_=>(_.forEach((y,b)=>c.set(y,b)),t.forEach((y,b)=>{var S;return h.set(y,new U3(b,null!==(S=c.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Jm();let i=new Gn((c,h)=>c-h),o=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(_=>{const y=t.get(_);if(null===y)return;let b=r.get(_)||ls.empty();b=h.applyToLocalView(y,b),r.set(_,b);const S=(i.get(h.batchId)||Wt()).add(_);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),y=_.key,b=_.value,S=s0();b.forEach(R=>{if(!o.has(R)){const F=jx(t.get(R),r.get(R));null!==F&&S.set(R,F),o=o.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,S))}return oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Qm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):oe.resolve(Ea());let h=-1,_=o;return c.next(y=>oe.forEach(y,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(b)?oe.resolve():this.remoteDocumentCache.getEntry(e,b).next(R=>{_=_.insert(b,R)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,_,y,Wt())).next(b=>({batchId:h,changes:Lx(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=dh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=dh();return this.indexManager.getCollectionParents(e,i).next(c=>oe.forEach(c,h=>{const _=(y=t,b=h.child(i),new ds(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(y=>{y.forEach((b,S)=>{o=o.insert(b,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,_)=>{const y=_.getKey();null===o.get(y)&&(o=o.insert(y,Fn.newInvalidDocument(y)))});let c=dh();return o.forEach((h,_)=>{const y=i.get(h);void 0!==y&&t_(y.mutation,_,ls.empty(),rr.now()),Xm(t,_)&&(c=c.insert(h,_))}),c})}}class V3{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ri(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Qx(r.bundledQuery),readTime:ri(r.readTime)}),oe.resolve();var r}}class B3{constructor(){this.overlays=new Gn(Xe.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ea();return oe.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Ea(),o=t.length+1,c=new Xe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,y=_.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&_.largestBatchId>r&&i.set(_.getKey(),_)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Gn((y,b)=>y-b);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=o.get(y.largestBatchId);null===b&&(b=Ea(),o=o.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const h=Ea(),_=o.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((y,b)=>h.set(y,b)),!(h.size()>=i)););return oe.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qS(t,r));let o=this.ls.get(t);void 0===o&&(o=Wt(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class iR{constructor(){this.fs=new zn(Ki.ds),this.ws=new zn(Ki._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ki(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ki(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Xe(new hn([])),r=new Ki(t,e),i=new Ki(t,e+1),o=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),o.push(c.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xe(new hn([])),r=new Ki(t,e),i=new Ki(t,e+1);let o=Wt();return this.ws.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Ki(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ki{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xe.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Xe.comparator(e.key,t.key)}}class j3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new zn(Ki.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const c=new GS(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Rs=this.Rs.add(new Ki(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ki(t,0),i=new Ki(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],c=>{const h=this.Ps(c.As);o.push(h)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(Vt);return t.forEach(i=>{const o=new Ki(i,0),c=new Ki(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,c],h=>{r=r.add(h.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Xe.isDocumentKey(o)||(o=o.child(""));const c=new Ki(new Xe(o),0);let h=new zn(Vt);return this.Rs.forEachWhile(_=>{const y=_.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(_.As)),!0)},c),oe.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const o=new Ki(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ki(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class H3{constructor(e){this.Ds=e,this.docs=new Gn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Rs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Rs();const c=t.path,h=new Xe(c.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:y,value:{document:b}}=_.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||OC(cS(b),r)<=0||(i.has(b.key)||Xm(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){dt()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return oe.resolve(this.size)}}class $3 extends I2{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class G3{constructor(e){this.persistence=e,this.xs=new fu(t=>yp(t),Ym),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ns=0,this.ks=new iR,this.targetCount=0,this.Ms=l_.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new l_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class sR{constructor(e,t){this.$s={},this.overlays={},this.Os=new Bo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new G3(this),this.indexManager=new M3,this.remoteDocumentCache=new H3(r=>this.referenceDelegate.Ls(r)),this.serializer=new JF(t),this.qs=new V3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new j3(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new z3(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class z3 extends RC{constructor(e){super(),this.currentSequenceNumber=e}}class nA{constructor(e){this.persistence=e,this.Qs=new iR,this.js=null}static zs(e){return new nA(e)}get Ws(){if(this.js)return this.js;throw dt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Xe.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,_t.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class q3{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Gv("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",px,{unique:!0}),h.createObjectStore("documentMutations"),S2(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),S2(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",px,{unique:!0});const b=_.store("mutations"),S=y.map(R=>b.put(R));return oe.waitFor(S)})}(e,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(o))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:bx});_.createIndex("collectionPathOverlayIndex",LC,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Tx,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:mx});_.createIndex("documentKeyIndex",_x),_.createIndex("collectionGroupIndex",OF)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,o))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:wx}).createIndex("sequenceNumberIndex",Ix,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Cx}).createIndex("documentKeyIndex",Ex,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=JS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>oe.forEach(h,_=>{wt(_.userId===o.userId);const y=a_(this.serializer,_);return p2(e,o.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((c,h)=>{const _=new hn(c),y=[0,Zi(_)];o.push(t.get(y).next(b=>b?oe.resolve():t.put({targetId:0,path:Zi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:vx});const r=t.store("collectionParents"),i=new rR,o=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:Zi(_)})}};return t.store("remoteDocuments").X({Y:!0},(c,h)=>{const _=new hn(c);return o(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,h,_],y)=>{const b=oc(h);return o(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=iE(i),c=t2(this.serializer,o);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,c)=>{const h=t.store("remoteDocumentsV14"),_=(y=c,y.document?new Xe(hn.fromString(y.document.name).popFirst(5)):y.noDocument?Xe.fromSegments(y.noDocument.path):y.unknownDocument?Xe.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(b))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=C2(this.serializer),o=new sR(nA.zs,this.serializer.fe);return r.j().next(c=>{const h=new Map;return c.forEach(_=>{var y;let b=null!==(y=h.get(_.userId))&&void 0!==y?y:Wt();a_(this.serializer,_).keys().forEach(S=>b=b.add(S)),h.set(_.userId,b)}),oe.forEach(h,(_,y)=>{const b=new yi(y),S=KS.de(this.serializer,b),R=o.getIndexManager(b),F=eA.de(b,this.serializer,R,o.referenceDelegate);return new D2(i,F,S,R).recalculateAndSaveOverlaysForDocumentKeys(new FC(t,Bo.ct),_).next()})})}}function S2(n){n.createObjectStore("targetDocuments",{keyPath:qm}).createIndex("documentTargetsIndex",Zv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yx,{unique:!0}),n.createObjectStore("targetGlobal")}const oR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aR{constructor(e,t,r,i,o,c,h,_,y,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=c,this.document=h,this.ri=y,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=R=>Promise.resolve(),!aR.D())throw new Me(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k3(this,i),this.di=t+"main",this.serializer=new JF(_),this.wi=new cu(this.di,this.ui,new q3(this.serializer)),this.Bs=new x3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=C2(this.serializer),this.qs=new E3,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,oR);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Bo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,K.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,K.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,K.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(sh(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return lE(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return iA(e).delete(this.clientId)}bi(){var e=this;return(0,K.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vi(r,"clientMetadata");return i.j().next(o=>{const c=e.Si(o,18e5),h=o.filter(_=>-1===c.indexOf(_));return oe.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):lE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,oR);return!1}}return!(!this.networkEnabled||!this.inForeground)||iA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,K.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new FC(t,Bo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>iA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return eA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O3(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return KS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(c=this.ui)?Sx:14===c?gS:13===c?pS:12===c?Dx:11===c?fS:void dt();var c;let h;return this.wi.runTransaction(e,i,o,_=>(h=new FC(_,this.Os?this.Os.next():Bo.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Me(de.FAILED_PRECONDITION,xC);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Oi(e){return lE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(de.FAILED_PRECONDITION,oR)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lE(e).put("owner",t)}static D(){return cu.D()}Ai(e){const t=lE(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,N.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lE(n){return vi(n,"owner")}function iA(n){return vi(n,"clientMetadata")}function uR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Wt(),i=Wt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new cR(e,t.fromCache,r,i)}}class A2{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(r0(t))return oe.resolve(null);let r=xs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=WC(t,null,"F"),r=xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Wt(...o);return this.Ui.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const y=this.ji(t,h);return this.zi(t,y,c,_.readTime)?this.Ki(e,WC(t,null,"F")):this.Wi(e,y,t,_)}))})))}Gi(e,t,r,i){return r0(t)||i.isEqual(_t.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const c=this.ji(t,o);return this.zi(t,c,r,i)?this.Qi(e,t):(DC()<=cr.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ZC(t)),this.Wi(e,c,t,uS(i,-1)))})}ji(e,t){let r=new zn(KC(e));return t.forEach((i,o)=>{Xm(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return DC()<=cr.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",ZC(t)),this.Ui.getDocumentsMatchingQuery(e,t,Os.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class W3{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Gn(Vt),this.Yi=new fu(o=>yp(o),Ym),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D2(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function P2(n,e,t,r){return new W3(n,e,t,r)}function M2(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,K.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let _=Wt();for(const y of i){c.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}for(const y of o){h.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(y=>({er:y,removedBatchIds:c,addedBatchIds:h}))})})}),lR.apply(this,arguments)}function O2(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function x2(n,e,t){let r=Wt(),i=Wt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Rs();return t.forEach((h,_)=>{const y=o.get(h);_.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(_t.min())?(e.removeEntry(h,_.readTime),c=c.insert(h,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||0===_.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(_),c=c.insert(h,_)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",_.version)}),{nr:c,sr:i}})}function Y3(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l0(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new hh(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function d0(n,e,t){return dR.apply(this,arguments)}function dR(){return dR=(0,K.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!sh(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),dR.apply(this,arguments)}function sA(n,e,t){const r=Qe(n);let i=_t.min(),o=Wt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,y){const b=Qe(h),S=b.Yi.get(y);return void 0!==S?oe.resolve(b.Ji.get(S)):b.Bs.getTargetData(_,y)}(r,c,xs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,h.targetId).next(_=>{o=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:_t.min(),t?o:Wt())).next(h=>(k2(r,RS(e),h),{documents:h,ir:o})))}function R2(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(c=>c?c.target:null))}function N2(n,e){const t=Qe(n),r=t.Xi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,uS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(k2(t,e,i),i))}function k2(n,e,t){let r=n.Xi.get(e)||_t.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function hR(){return hR=(0,K.Z)(function*(n,e,t,r){const i=Qe(n);let o=Wt(),c=Rs();for(const y of t){const b=e.rr(y.metadata.name);y.document&&(o=o.add(b));const S=e.ur(y);S.setReadTime(e.cr(y.metadata.readTime)),c=c.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield l0(i,(y=r,xs(Ol(hn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>x2(y,h,c).next(b=>(h.apply(y),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(y,_.targetId).next(()=>i.Bs.addMatchingKeys(y,o,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.nr,b.sr)).next(()=>b.nr)))}),hR.apply(this,arguments)}function X3(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,K.Z)(function*(n,e,t=Wt()){const r=yield l0(n,xs(Qx(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=ri(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(o,e);const h=r.withResumeToken(un.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(o,h).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),fR.apply(this,arguments)}function L2(n,e){return`firestore_clients_${n}_${e}`}function F2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pR(n,e){return`firestore_targets_${n}_${e}`}class oA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Me(i.error.code,i.error.message))),c?new oA(e,t,i.state,o):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Me(r.error.code,r.error.message))),o?new dE(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=QC();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=NC(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new aA(e,o):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gR{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gR(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mR{constructor(){this.activeTargetIds=QC()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _R{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Gn(Vt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=L2(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new mR),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,K.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(L2(e.persistenceKey,i));if(o){const c=aA.ar(i,o);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pR(this.persistenceKey,e));if(r){const i=dE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pR(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,K.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let c=Bo.ct;if(null!=o)try{const h=JSON.parse(o);wt("number"==typeof h),c=h}catch(h){zr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Bo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new oA(this.currentUser,e,t,r),o=F2(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=F2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=pR(this.persistenceKey,e),o=new dE(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return aA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return oA.ar(new yi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return dE.ar(i,t)}br(e){return gR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,K.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),c=[],h=[];return o.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{o.has(_)||h.push(_)}),this.syncEngine.Wr(c,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=QC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class U2{constructor(){this.Hr=new mR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new mR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class J3{Yr(e){}shutdown(){}}class V2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uA=null;function yR(){return null===uA?uA=268435456+Math.round(2147483648*Math.random()):uA++,"0x"+uA.toString(16)}const e4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ls="WebChannelConnection";class n4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const c=yR(),h=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const _={};return this.Eo(_,i,o),this.Ao(e,h,_,r).then(y=>(Be("RestConnection",`Received RPC '${e}' ${c}: `,y),y),y=>{throw io("RestConnection",`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y})}vo(e,t,r,i,o,c){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${e4[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=yR();return new Promise((c,h)=>{const _=new tS;_.setWithCredentials(!0),_.listenOnce(JD.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Gm.NO_ERROR:const b=_.getResponseJson();Be(Ls,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),c(b);break;case Gm.TIMEOUT:Be(Ls,`RPC '${e}' ${o} timed out`),h(new Me(de.DEADLINE_EXCEEDED,"Request time out"));break;case Gm.HTTP_ERROR:const S=_.getStatus();if(Be(Ls,`RPC '${e}' ${o} failed with status:`,S,"response text:",_.getResponseText()),S>0){let R=_.getResponseJson();Array.isArray(R)&&(R=R[0]);const F=R?.error;if(F&&F.status&&F.message){const q=function(he){const ve=he.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ve)>=0?ve:de.UNKNOWN}(F.status);h(new Me(q,F.message))}else h(new Me(de.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Me(de.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Be(Ls,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);Be(Ls,`RPC '${e}' ${o} sending request:`,i),_.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=yR(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ox(),h=XD(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.xmlHttpFactory=new eS({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=o.join("");Be(Ls,`Creating RPC '${e}' stream ${i}: ${b}`,_);const S=c.createWebChannel(b,_);let R=!1,F=!1;const q=new t4({ro:ve=>{F?Be(Ls,`Not sending because RPC '${e}' stream ${i} is closed:`,ve):(R||(Be(Ls,`Opening RPC '${e}' stream ${i} transport.`),S.open(),R=!0),Be(Ls,`RPC '${e}' stream ${i} sending:`,ve),S.send(ve))},oo:()=>S.close()}),he=(ve,ze,ot)=>{ve.listen(ze,We=>{try{ot(We)}catch(ct){setTimeout(()=>{throw ct},0)}})};return he(S,Vv.EventType.OPEN,()=>{F||Be(Ls,`RPC '${e}' stream ${i} transport opened.`)}),he(S,Vv.EventType.CLOSE,()=>{F||(F=!0,Be(Ls,`RPC '${e}' stream ${i} transport closed`),q.wo())}),he(S,Vv.EventType.ERROR,ve=>{F||(F=!0,io(Ls,`RPC '${e}' stream ${i} transport errored:`,ve),q.wo(new Me(de.UNAVAILABLE,"The operation could not be completed")))}),he(S,Vv.EventType.MESSAGE,ve=>{var ze;if(!F){const ot=ve.data[0];wt(!!ot);const ct=ot.error||(null===(ze=ot[0])||void 0===ze?void 0:ze.error);if(ct){Be(Ls,`RPC '${e}' stream ${i} received error:`,ct);const At=ct.status;let Ht=function(fo){const zl=s[fo];if(void 0!==zl)return l(zl)}(At),jr=ct.message;void 0===Ht&&(Ht=de.INTERNAL,jr="Unknown error status: "+At+" with message "+ct.message),F=!0,q.wo(new Me(Ht,jr)),S.close()}else Be(Ls,`RPC '${e}' stream ${i} received:`,ot),q._o(ot)}}),he(h,ax.STAT_EVENT,ve=>{ve.stat===bC.PROXY?Be(Ls,`RPC '${e}' stream ${i} detected buffering proxy`):ve.stat===bC.NOPROXY&&Be(Ls,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function B2(){return typeof window<"u"?window:null}function cA(){return typeof document<"u"?document:null}function hE(n){return new Ep(n,!0)}class vR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class j2{constructor(e,t,r,i,o,c,h,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new vR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,K.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,K.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,K.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Me(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,K.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r4 extends j2{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function g3(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:dt(),i=e.targetChange.targetIds||[],o=function(_,y){return _.useProto3Json?(wt(void 0===y||"string"==typeof y),un.fromBase64String(y||"")):(wt(void 0===y||y instanceof Uint8Array),un.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const y=void 0===_.code?de.UNKNOWN:l(_.code);return new Me(y,_.message||"")}(c);t=new tt(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Nl(n,r.document.name),o=ri(r.document.updateTime),c=r.document.createTime?ri(r.document.createTime):_t.min(),h=new Ii({mapValue:{fields:r.document.fields}}),_=Fn.newFoundDocument(i,o,c,h);t=new Ie(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Nl(n,r.document),o=r.readTime?ri(r.readTime):_t.min(),c=Fn.newNoDocument(i,o);t=new Ie([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Nl(n,r.document);t=new Ie([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,{count:i=0,unchangedNames:o}=r,c=new HF(i,o);t=new Ue(r.targetId,c)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return _t.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?ri(o.readTime):_t.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=nE(this.serializer),t.addTarget=function(i,o){let c;const h=o.target;if(c=lh(h)?{documents:ZF(i,h)}:{query:Yx(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=WS(i,o.resumeToken);const _=i_(i,o.expectedCount);null!==_&&(c.expectedCount=_)}else if(o.snapshotVersion.compareTo(_t.min())>0){c.readTime=bp(i,o.snapshotVersion.toTimestamp());const _=i_(i,o.expectedCount);null!==_&&(c.expectedCount=_)}return c}(this.serializer,e);const r=function _3(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=nE(this.serializer),t.removeTarget=e,this.Wo(t)}}class i4 extends j2{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function m3(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let o=ri(r.updateTime?r.updateTime:i);return o.isEqual(_t.min())&&(o=ri(i)),new BF(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=nE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rE(this.serializer,r))};this.Wo(t)}}class s4 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.vo(e,t,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(de.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class a4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class u4{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,K.Z)(function*(){var _;Pp(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,K.Z)(function*(y){const b=Qe(y);b.vu.add(4),yield h0(b),b.bu.set("Unknown"),b.vu.delete(4),yield fE(b)}),function(y){return _.apply(this,arguments)})(c))}))}),this.bu=new a4(r,i)}}function fE(n){return IR.apply(this,arguments)}function IR(){return IR=(0,K.Z)(function*(n){if(Pp(n))for(const e of n.Ru)yield e(!0)}),IR.apply(this,arguments)}function h0(n){return CR.apply(this,arguments)}function CR(){return CR=(0,K.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),CR.apply(this,arguments)}function lA(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),TR(t)?bR(t):p0(t).Ko()&&ER(t,e))}function pE(n,e){const t=Qe(n),r=p0(t);t.Au.delete(e),r.Ko()&&H2(t,e),0===t.Au.size&&(r.Ko()?r.jo():Pp(t)&&t.bu.set("Unknown"))}function ER(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}p0(n).su(e)}function H2(n,e){n.Vu.qt(e),p0(n).iu(e)}function bR(n){n.Vu=new xe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),p0(n).start(),n.bu.gu()}function TR(n){return Pp(n)&&!p0(n).Uo()&&n.Au.size>0}function Pp(n){return 0===Qe(n).vu.size}function $2(n){n.Vu=void 0}function c4(n){return DR.apply(this,arguments)}function DR(){return DR=(0,K.Z)(function*(n){n.Au.forEach((e,t)=>{ER(n,e)})}),DR.apply(this,arguments)}function l4(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,K.Z)(function*(n,e){$2(n),TR(n)?(n.bu.Iu(e),bR(n)):n.bu.set("Unknown")}),SR.apply(this,arguments)}function d4(n,e,t){return AR.apply(this,arguments)}function AR(){return AR=(0,K.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof tt&&2===e.state&&e.cause)try{yield(r=(0,K.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dA(n,r)}else if(e instanceof Ie?n.Vu.Ht(e):e instanceof Ue?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(_t.min()))try{const r=yield O2(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.Vu.ce(o);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.Au.get(_);y&&i.Au.set(_,y.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach((h,_)=>{const y=i.Au.get(h);if(!y)return;i.Au.set(h,y.withResumeToken(un.EMPTY_BYTE_STRING,y.snapshotVersion)),H2(i,h);const b=new hh(y.target,h,_,y.sequenceNumber);ER(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield dA(n,r)}var r}),AR.apply(this,arguments)}function dA(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,K.Z)(function*(n,e,t){if(!sh(e))throw e;n.vu.add(1),yield h0(n),n.bu.set("Offline"),t||(t=()=>O2(n.localStore)),n.asyncQueue.enqueueRetryable((0,K.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield fE(n)}))}),PR.apply(this,arguments)}function G2(n,e){return e().catch(t=>dA(n,t,e))}function f0(n){return MR.apply(this,arguments)}function MR(){return MR=(0,K.Z)(function*(n){const e=Qe(n),t=Mp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;h4(e);)try{const i=yield Y3(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,f4(e,i)}catch(i){yield dA(e,i)}z2(e)&&q2(e)}),MR.apply(this,arguments)}function h4(n){return Pp(n)&&n.Eu.length<10}function f4(n,e){n.Eu.push(e);const t=Mp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function z2(n){return Pp(n)&&!Mp(n).Uo()&&n.Eu.length>0}function q2(n){Mp(n).start()}function p4(n){return OR.apply(this,arguments)}function OR(){return OR=(0,K.Z)(function*(n){Mp(n).hu()}),OR.apply(this,arguments)}function g4(n){return xR.apply(this,arguments)}function xR(){return xR=(0,K.Z)(function*(n){const e=Mp(n);for(const t of n.Eu)e.uu(t.mutations)}),xR.apply(this,arguments)}function m4(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,K.Z)(function*(n,e,t){const r=n.Eu.shift(),i=zS.from(r,e,t);yield G2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield f0(n)}),RR.apply(this,arguments)}function _4(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,K.Z)(function*(n,e){var t;e&&Mp(n).ou&&(yield(t=(0,K.Z)(function*(r,i){if(u(o=i.code)&&o!==de.ABORTED){const c=r.Eu.shift();Mp(r).Qo(),yield G2(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield f0(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),z2(n)&&q2(n)}),NR.apply(this,arguments)}function W2(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,K.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Pp(t);t.vu.add(3),yield h0(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield fE(t)}),kR.apply(this,arguments)}function LR(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,K.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield fE(t)):e||(t.vu.add(2),yield h0(t),t.bu.set("Unknown"))}),FR.apply(this,arguments)}function p0(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new r4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:c4.bind(null,n),ao:l4.bind(null,n),nu:d4.bind(null,n)}),n.Ru.push(function(){var e=(0,K.Z)(function*(t){t?(n.Su.Qo(),TR(n)?bR(n):n.bu.set("Unknown")):(yield n.Su.stop(),$2(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Mp(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new i4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:p4.bind(null,n),ao:_4.bind(null,n),au:g4.bind(null,n),cu:m4.bind(null,n)}),n.Ru.push(function(){var e=(0,K.Z)(function*(t){t?(n.Du.Qo(),yield f0(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class UR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new UR(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g0(n,e){if(zr("AsyncQueue",`${e}: ${n}`),sh(n))return new Me(de.UNAVAILABLE,`${e}: ${n}`);throw n}class m0{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=dh(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new m0(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof m0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new m0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Z2{constructor(){this.Cu=new Gn(Xe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):dt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _0{constructor(e,t,r,i,o,c,h,_,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new _0(e,t,m0.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class y4{constructor(){this.Nu=void 0,this.listeners=[]}}class v4{constructor(){this.queries=new fu(e=>xS(e),wp),this.onlineState="Unknown",this.ku=new Set}}function VR(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,K.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new y4),i)try{o.Nu=yield t.onListen(r)}catch(c){const h=g0(c,`Initialization of query '${ZC(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&$R(t)}),BR.apply(this,arguments)}function jR(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,K.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),HR.apply(this,arguments)}function w4(n,e){const t=Qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.$u(i)&&(r=!0);c.Nu=i}}r&&$R(t)}function I4(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function $R(n){n.ku.forEach(e=>{e.next()})}class GR{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=_0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class C4{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class K2{constructor(e){this.serializer=e}rr(e){return Nl(this.serializer,e)}ur(e){return e.metadata.exists?WF(this.serializer,e.document,!1):Fn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ri(e)}}class E4{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Y2(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=hn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new K2(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Wt()).add(o);t.set(c,h)}}return t}complete(){var e=this;return(0,K.Z)(function*(){const t=yield function Q3(n,e,t,r){return hR.apply(this,arguments)}(e.localStore,new K2(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield X3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Y2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Q2{constructor(e){this.key=e}}class X2{constructor(e){this.key=e}}class J2{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wt(),this.mutatedKeys=Wt(),this.tc=KC(e),this.ec=new m0(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Z2,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const R=i.get(b),F=Xm(this.query,S)?S:null,q=!!R&&this.mutatedKeys.has(R.key),he=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ve=!1;R&&F?R.data.isEqual(F.data)?q!==he&&(r.track({type:3,doc:F}),ve=!0):this.rc(R,F)||(r.track({type:2,doc:F}),ve=!0,(_&&this.tc(F,_)>0||y&&this.tc(F,y)<0)&&(h=!0)):!R&&F?(r.track({type:0,doc:F}),ve=!0):R&&!F&&(r.track({type:1,doc:R}),ve=!0,(_||y)&&(h=!0)),ve&&(F?(c=c.add(F),o=he?o.add(b):o.delete(b)):(c=c.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:h,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((y,b)=>function(S,R){const F=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return F(S)-F(R)}(y.type,b.type)||this.tc(y.doc,b.doc)),this.oc(r);const c=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,_=h!==this.Xu;return this.Xu=h,0!==o.length||_?{snapshot:new _0(this.query,e.ec,i,o,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Z2,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Wt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new X2(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Q2(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Wt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return _0.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class b4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class T4{constructor(e){this.key=e,this.fc=!1}}class D4{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new fu(h=>xS(h),wp),this._c=new Map,this.mc=new Set,this.gc=new Gn(Xe.comparator),this.yc=new Map,this.Ic=new iR,this.Tc={},this.Ec=new Map,this.Ac=l_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function S4(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,K.Z)(function*(n,e){const t=pN(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const c=yield l0(t.localStore,xs(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield qR(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&lA(t.remoteStore,c)}return i}),zR.apply(this,arguments)}function qR(n,e,t,r,i){return WR.apply(this,arguments)}function WR(){return WR=(0,K.Z)(function*(n,e,t,r,i){n.Rc=(S,R,F)=>{return(q=(0,K.Z)(function*(he,ve,ze,ot){let We=ve.view.sc(ze);We.zi&&(We=yield sA(he.localStore,ve.query,!1).then(({documents:Ht})=>ve.view.sc(Ht,We)));const ct=ot&&ot.targetChanges.get(ve.targetId),At=ve.view.applyChanges(We,he.isPrimaryClient,ct);return rN(he,ve.targetId,At.cc),At.snapshot}),function(he,ve,ze,ot){return q.apply(this,arguments)})(n,S,R,F);var q};const o=yield sA(n.localStore,e,!0),c=new J2(e,o.ir),h=c.sc(o.documents),_=Q.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=c.applyChanges(h,n.isPrimaryClient,_);rN(n,t,y.cc);const b=new b4(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),WR.apply(this,arguments)}function A4(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,K.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!wp(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield d0(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),pE(t.remoteStore,r.targetId),y0(t,r.targetId)}).catch(sc))):(y0(t,r.targetId),yield d0(t.localStore,r.targetId,!0))}),ZR.apply(this,arguments)}function KR(){return KR=(0,K.Z)(function*(n,e,t){const r=gN(n);try{const i=yield function(o,c){const h=Qe(o),_=rr.now(),y=c.reduce((R,F)=>R.add(F.key),Wt());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let F=Rs(),q=Wt();return h.Zi.getEntries(R,y).next(he=>{F=he,F.forEach((ve,ze)=>{ze.isValidDocument()||(q=q.add(ve))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,F)).next(he=>{b=he;const ve=[];for(const ze of c){const ot=Hx(ze,b.get(ze.key).overlayedDocument);null!=ot&&ve.push(new Rl(ze.key,ot,Ox(ot.value.mapValue),ir.exists(!0)))}return h.mutationQueue.addMutationBatch(R,_,ve,c)}).next(he=>{S=he;const ve=he.applyToLocalDocumentSet(b,q);return h.documentOverlayCache.saveOverlays(R,he.batchId,ve)})}).then(()=>({batchId:S.batchId,changes:Lx(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let _=o.Tc[o.currentUser.toKey()];_||(_=new Gn(Vt)),_=_.insert(c,h),o.Tc[o.currentUser.toKey()]=_}(r,i.batchId,t),yield fh(r,i.changes),yield f0(r.remoteStore)}catch(i){const o=g0(i,"Failed to persist write");t.reject(o)}}),KR.apply(this,arguments)}function eU(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,K.Z)(function*(n,e){const t=Qe(n);try{const r=yield function K3(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const R=i.get(S);if(!R)return;h.push(t.Bs.removeMatchingKeys(o,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(o,b.addedDocuments,S)));let F=R.withSequenceNumber(o.currentSequenceNumber);var q,he,ve;null!==e.targetMismatches.get(S)?F=F.withResumeToken(un.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),he=F,ve=b,(0===(q=R).resumeToken.approximateByteSize()||he.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(o,F))});let _=Rs(),y=Wt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),h.push(x2(o,c,e.documentUpdates).next(b=>{_=b.nr,y=b.sr})),!r.isEqual(_t.min())){const b=t.Bs.getLastRemoteSnapshotVersion(o).next(S=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(b)}return oe.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,_,y)).next(()=>_)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.yc.get(o);c&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?wt(c.fc):i.removedDocuments.size>0&&(wt(c.fc),c.fc=!1))}),yield fh(t,r,e)}catch(r){yield sc(r)}}),YR.apply(this,arguments)}function tU(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,c)=>{const h=c.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=Qe(o);h.onlineState=c;let _=!1;h.queries.forEach((y,b)=>{for(const S of b.listeners)S.Mu(c)&&(_=!0)}),_&&$R(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function M4(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,K.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let c=new Gn(Xe.comparator);c=c.insert(o,Fn.newNoDocument(o,_t.min()));const h=Wt().add(o),_=new W(_t.min(),new Map,new Gn(Vt),c,h);yield eU(r,_),r.gc=r.gc.remove(o),r.yc.delete(e),iN(r)}else yield d0(r.localStore,e,!1).then(()=>y0(r,e,t)).catch(sc)}),QR.apply(this,arguments)}function O4(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,K.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield function Z3(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,h,_,y){const b=_.batch,S=b.keys();let R=oe.resolve();return S.forEach(F=>{R=R.next(()=>y.getEntry(h,F)).next(q=>{const he=_.docVersions.get(F);wt(null!==he),q.version.compareTo(he)<0&&(b.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),y.addEntry(q)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Wt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(h=h.add(c.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);nN(t,r,null),tN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fh(t,i)}catch(i){yield sc(i)}}),XR.apply(this,arguments)}function x4(n,e,t){return JR.apply(this,arguments)}function JR(){return JR=(0,K.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,c){const h=Qe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let y;return h.mutationQueue.lookupMutationBatch(_,c).next(b=>(wt(null!==b),y=b.keys(),h.mutationQueue.removeMutationBatch(_,b))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,y)).next(()=>h.localDocuments.getDocuments(_,y))})}(r.localStore,e);nN(r,e,t),tN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fh(r,i)}catch(i){yield sc(i)}}),JR.apply(this,arguments)}function eN(){return eN=(0,K.Z)(function*(n,e){const t=Qe(n);Pp(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=Qe(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=g0(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eN.apply(this,arguments)}function tN(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function nN(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function y0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||nU(n,r)})}function nU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(pE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),iN(n))}function rN(n,e,t){for(const r of t)r instanceof Q2?(n.Ic.addReference(r.key,e),N4(n,r)):r instanceof X2?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||nU(n,r.key)):dt()}function N4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),iN(n))}function iN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Xe(hn.fromString(e)),r=n.Ac.next();n.yc.set(r,new T4(t)),n.gc=n.gc.insert(t,r),lA(n.remoteStore,new hh(xs(Ol(t.path)),r,"TargetPurposeLimboResolution",Bo.ct))}}function fh(n,e,t){return sN.apply(this,arguments)}function sN(){return sN=(0,K.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],c=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,_)=>{c.push(r.Rc(_,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=cR.Li(_.targetId,y);o.push(b)}}))}),yield Promise.all(c),r.dc.nu(i),yield(h=(0,K.Z)(function*(_,y){const b=Qe(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(y,R=>oe.forEach(R.Fi,F=>b.persistence.referenceDelegate.addReference(S,R.targetId,F)).next(()=>oe.forEach(R.Bi,F=>b.persistence.referenceDelegate.removeReference(S,R.targetId,F)))))}catch(S){if(!sh(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const F=b.Ji.get(R),he=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);b.Ji=b.Ji.insert(R,he)}}}),function(_,y){return h.apply(this,arguments)})(r.localStore,o))}),sN.apply(this,arguments)}function k4(n,e){return oN.apply(this,arguments)}function oN(){return oN=(0,K.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield M2(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(h=>{h.reject(new Me(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fh(t,r.er)}var i}),oN.apply(this,arguments)}function L4(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return Wt().add(r.key);{let i=Wt();const o=t._c.get(e);if(!o)return i;for(const c of o){const h=t.wc.get(c);i=i.unionWith(h.view.nc)}return i}}function F4(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,K.Z)(function*(n,e){const t=Qe(n),r=yield sA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&rN(t,e.targetId,i.cc),i}),aN.apply(this,arguments)}function U4(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,K.Z)(function*(n,e){const t=Qe(n);return N2(t.localStore,e).then(r=>fh(t,r))}),uN.apply(this,arguments)}function V4(n,e,t,r){return cN.apply(this,arguments)}function cN(){return cN=(0,K.Z)(function*(n,e,t,r){const i=Qe(n),o=yield function(c,h){const _=Qe(c),y=Qe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Sn(b,h).next(S=>S?_.localDocuments.getDocuments(b,S):oe.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield f0(i.remoteStore):"acknowledged"===t||"rejected"===t?(nN(i,e,r||null),tN(i,e),h=e,Qe(Qe(i.localStore).mutationQueue).Cn(h)):dt(),yield fh(i,o)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),cN.apply(this,arguments)}function lN(){return lN=(0,K.Z)(function*(n,e){const t=Qe(n);if(pN(t),gN(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rU(t,r.toArray());t.vc=!0,yield LR(t.remoteStore,!0);for(const o of i)lA(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(y0(t,c),d0(t.localStore,c,!0))),pE(t.remoteStore,c)}),yield i,yield rU(t,r),function(o){const c=Qe(o);c.yc.forEach((h,_)=>{pE(c.remoteStore,_)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Gn(Xe.comparator)}(t),t.vc=!1,yield LR(t.remoteStore,!1)}}),lN.apply(this,arguments)}function rU(n,e,t){return dN.apply(this,arguments)}function dN(){return dN=(0,K.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[];for(const c of e){let h;const _=r._c.get(c);if(_&&0!==_.length){h=yield l0(r.localStore,xs(_[0]));for(const y of _){const b=r.wc.get(y),S=yield F4(r,b);S.snapshot&&o.push(S.snapshot)}}else{const y=yield R2(r.localStore,c);h=yield l0(r.localStore,y),yield qR(r,iU(y),c,!1,h.resumeToken)}i.push(h)}return r.dc.nu(o),i}),dN.apply(this,arguments)}function iU(n){return zC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j4(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function H4(n,e,t,r){return hN.apply(this,arguments)}function hN(){return hN=(0,K.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield N2(i.localStore,RS(o[0])),h=W.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,un.EMPTY_BYTE_STRING);yield fh(i,c,h);break}case"rejected":yield d0(i.localStore,e,!0),y0(i,e,r);break;default:dt()}}),hN.apply(this,arguments)}function $4(n,e,t){return fN.apply(this,arguments)}function fN(){return fN=(0,K.Z)(function*(n,e,t){const r=pN(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const o=yield R2(r.localStore,i),c=yield l0(r.localStore,o);yield qR(r,iU(o),c.targetId,!1,c.resumeToken),lA(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield d0(r.localStore,i,!1).then(()=>{pE(r.remoteStore,i),y0(r,i)}).catch(sc))}}),fN.apply(this,arguments)}function pN(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M4.bind(null,e),e.dc.nu=w4.bind(null,e.eventManager),e.dc.Pc=I4.bind(null,e.eventManager),e}function gN(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x4.bind(null,e),e}class gE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,K.Z)(function*(){t.serializer=hE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return P2(this.persistence,new A2,e.initialUser,this.serializer)}createPersistence(e){return new sR(nA.zs,this.serializer)}createSharedClientState(e){return new U2}terminate(){var e=this;return(0,K.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mN extends gE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,K.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield gN(r.Vc.syncEngine),yield f0(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return P2(this.persistence,new A2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new v2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new MF(t,this.persistence);return new PF(e.asyncQueue,r)}createPersistence(e){const t=uR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new aR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,B2(),cA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new U2}}class sU extends mN{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,K.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof _R&&(r.sharedClientState.syncEngine={jr:V4.bind(null,i),zr:H4.bind(null,i),Wr:$4.bind(null,i),$i:j4.bind(null,i),Qr:U4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,K.Z)(function*(c){yield function B4(n,e){return lN.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=B2();if(!_R.D(t))throw new Me(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _R(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class v0{initialize(e,t){var r=this;return(0,K.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=k4.bind(null,r.syncEngine),yield LR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new v4}createDatastore(e){const t=hE(e.databaseInfo.databaseId),r=new n4(e.databaseInfo);return new s4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>tU(this.syncEngine,h,0),c=V2.D()?new V2:new J3,new u4(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,h,_,y){const b=new D4(r,i,o,c,h,_);return y&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,K.Z)(function*(t){const r=Qe(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield h0(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function oU(n,e=10240){let t=0;return{read:()=>(0,K.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,K.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class hA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class q4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,K.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,K.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,K.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new C4(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,K.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,K.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,K.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class W4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,K.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,K.Z)(function*(o,c){const h=Qe(o),_=nE(h.serializer)+"/documents",y={documents:c.map(F=>tE(h.serializer,F))},b=yield h.vo("BatchGetDocuments",_,y,c.length),S=new Map;b.forEach(F=>{const q=function p3(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=Nl(t,r.found.name),o=ri(r.found.updateTime),c=r.found.createTime?ri(r.found.createTime):_t.min(),h=new Ii({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,o,c,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=Nl(t,r.missing),o=ri(r.readTime);return Fn.newNoDocument(i,o)}(n,e):dt()}(h.serializer,F);S.set(q.key.toString(),q)});const R=[];return c.forEach(F=>{const q=S.get(F.toString());wt(!!q),R.push(q)}),R}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new r_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,K.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Xe.fromPath(i);e.mutations.push(new $S(o,e.precondition(o)))}),yield(r=(0,K.Z)(function*(i,o){const c=Qe(i),h=nE(c.serializer)+"/documents",_={writes:o.map(y=>rE(c.serializer,y))};yield c.Io("Commit",h,_)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Me(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Z4{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new vR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,K.Z)(function*(){const t=new W4(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!u(t)}return!1}}class K4{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=PC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,K.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,K.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=g0(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function fA(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,K.Z)(function*(o){r.isEqual(o)||(yield M2(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),_N.apply(this,arguments)}function yN(n,e){return vN.apply(this,arguments)}function vN(){return vN=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wN(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>W2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>W2(e.remoteStore,o)),n._onlineComponents=e}),vN.apply(this,arguments)}function aU(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function wN(n){return IN.apply(this,arguments)}function IN(){return IN=(0,K.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!aU(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),yield fA(n,new gE)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield fA(n,new gE);return n._offlineComponents}),IN.apply(this,arguments)}function pA(n){return CN.apply(this,arguments)}function CN(){return CN=(0,K.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield yN(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield yN(n,new v0))),n._onlineComponents}),CN.apply(this,arguments)}function uU(n){return wN(n).then(e=>e.persistence)}function gA(n){return wN(n).then(e=>e.localStore)}function cU(n){return pA(n).then(e=>e.remoteStore)}function EN(n){return pA(n).then(e=>e.syncEngine)}function w0(n){return bN.apply(this,arguments)}function bN(){return bN=(0,K.Z)(function*(n){const e=yield pA(n),t=e.eventManager;return t.onListen=S4.bind(null,e.syncEngine),t.onUnlisten=A4.bind(null,e.syncEngine),t}),bN.apply(this,arguments)}function dU(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(i,o,c,h,_){const y=new hA({next:S=>{o.enqueueAndForget(()=>jR(i,b));const R=S.docs.has(c);!R&&S.fromCache?_.reject(new Me(de.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new GR(Ol(c.path),y,{includeMetadataChanges:!0,Ku:!0});return VR(i,b)}(yield w0(n),n.asyncQueue,e,t,r)})),r.promise}function hU(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(i,o,c,h,_){const y=new hA({next:S=>{o.enqueueAndForget(()=>jR(i,b)),S.fromCache&&"server"===h.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new GR(c,y,{includeMetadataChanges:!0,Ku:!0});return VR(i,b)}(yield w0(n),n.asyncQueue,e,t,r)})),r.promise}function fU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const pU=new Map;function TN(n,e,t){if(!t)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gU(n,e,t,r){if(!0===e&&!0===r)throw new Me(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mU(n){if(!Xe.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _U(n){if(Xe.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mA(n);throw new Me(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function yU(n,e){if(e<=0)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=fU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Me(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Me(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Me(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cx;switch(t.type){case"firstParty":return new rS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pU.get(e);t&&(Be("ComponentProvider","Removing Datastore"),pU.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class kl extends hs{constructor(e,t,r){super(e,t,Ol(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new Xe(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function IU(n,e,...t){if(n=(0,N.m9)(n),TN("collection","path",e),n instanceof mE){const r=hn.fromString(e,...t);return _U(r),new kl(n,null,r)}{if(!(n instanceof dr||n instanceof kl))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return _U(r),new kl(n.firestore,null,r)}}function _A(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=PC.A()),TN("doc","path",e),n instanceof mE){const r=hn.fromString(e,...t);return mU(r),new dr(n,null,new Xe(r))}{if(!(n instanceof dr||n instanceof kl))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return mU(r),new dr(n.firestore,n instanceof kl?n.converter:null,new Xe(r))}}function CU(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof dr||n instanceof kl)&&(e instanceof dr||e instanceof kl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DN(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof hs&&e instanceof hs&&n.firestore===e.firestore&&wp(n._query,e._query)&&n.converter===e.converter}class s${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new vR(this,"async_queue_retry"),this.Xc=()=>{const t=cA();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=cA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=cA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ti;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,K.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!sh(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,zr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=UR.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&dt()}verifyOperationInProgress(){}sa(){var e=this;return(0,K.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function SN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class o${constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends mE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new s$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||EU(this),this._firestoreClient.terminate()}}function ii(n){return n._firestoreClient||EU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EU(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Mx(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fU(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new K4(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function bU(n,e,t){const r=new ti;return n.asyncQueue.enqueue((0,K.Z)(function*(){try{yield fA(n,t),yield yN(n,e),r.resolve()}catch(i){const o=i;if(!aU(o))throw o;io("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function TU(n){if(n._initialized||n._terminated)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ll(un.fromBase64String(e))}catch(t){throw new Me(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ll(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ph{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class h_{constructor(e){this._methodName=e}}class yA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const _$=/^__.*__$/;class y${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new n_(e,this.data,t,this.fieldTransforms)}}class DU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class vA{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new vA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return CA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(SU(this.ca)&&_$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class v${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hE(e)}ya(e,t,r,i=!1){return new vA({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f_(n){const e=n._freezeSettings(),t=hE(n._databaseId);return new v$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wA(n,e,t,r,i,o={}){const c=n.ya(o.merge||o.mergeFields?2:0,e,t,i);ON("Data must be an object, but it was:",c,r);const h=MU(r,c);let _,y;if(o.merge)_=new ls(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const b=[];for(const S of o.mergeFields){const R=vE(e,S,t);if(!c.contains(R))throw new Me(de.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);xU(b,R)||b.push(R)}_=new ls(b),y=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,y=c.fieldTransforms;return new y$(new Ii(h),_,y)}class yE extends h_{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yE}}function AU(n,e,t){return new vA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AN extends h_{_toFieldTransform(e){return new Cp(e.path,new Ip)}isEqual(e){return e instanceof AN}}class w$ extends h_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=AU(this,e,!0),r=this.pa.map(o=>p_(o,t)),i=new pc(r);return new Cp(e.path,i)}isEqual(e){return this===e}}class I$ extends h_{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=AU(this,e,!0),r=this.pa.map(o=>p_(o,t)),i=new xl(r);return new Cp(e.path,i)}isEqual(e){return this===e}}class C$ extends h_{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new gc(e.serializer,XC(e.serializer,this.Ia));return new Cp(e.path,t)}isEqual(e){return this===e}}function PN(n,e,t,r){const i=n.ya(1,e,t);ON("Data must be an object, but it was:",i,r);const o=[],c=Ii.empty();ac(r,(_,y)=>{const b=IA(e,_,t);y=(0,N.m9)(y);const S=i.da(b);if(y instanceof yE)o.push(b);else{const R=p_(y,S);null!=R&&(o.push(b),c.set(b,R))}});const h=new ls(o);return new DU(c,h,i.fieldTransforms)}function MN(n,e,t,r,i,o){const c=n.ya(1,e,t),h=[vE(e,r,t)],_=[i];if(o.length%2!=0)throw new Me(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(vE(e,o[R])),_.push(o[R+1]);const y=[],b=Ii.empty();for(let R=h.length-1;R>=0;--R)if(!xU(y,h[R])){const F=h[R];let q=_[R];q=(0,N.m9)(q);const he=c.da(F);if(q instanceof yE)y.push(F);else{const ve=p_(q,he);null!=ve&&(y.push(F),b.set(F,ve))}}const S=new ls(y);return new DU(b,S,c.fieldTransforms)}function PU(n,e,t,r=!1){return p_(t,n.ya(r?4:3,e))}function p_(n,e){if(OU(n=(0,N.m9)(n)))return ON("Unsupported field value:",e,n),MU(n,e);if(n instanceof h_)return function(t,r){if(!SU(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let h=p_(c,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return XC(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=rr.fromDate(t);return{timestampValue:bp(r.serializer,i)}}if(t instanceof rr){const i=new rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bp(r.serializer,i)}}if(t instanceof yA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ll)return{bytesValue:WS(r.serializer,t._byteString)};if(t instanceof dr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${mA(t)}`)}(n,e)}function MU(n,e){const t={};return Kv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ac(n,(r,i)=>{const o=p_(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function OU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof yA||n instanceof Ll||n instanceof dr||n instanceof h_)}function ON(n,e,t){if(!OU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function vE(n,e,t){if((e=(0,N.m9)(e))instanceof ph)return e._internalPath;if("string"==typeof e)return IA(n,e);throw CA("Field path arguments must be of type string or ",n,!1,void 0,t)}const E$=new RegExp("[~\\*/\\[\\]]");function IA(n,e,t){if(e.search(E$)>=0)throw CA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ph(...e.split("."))._internalPath}catch{throw CA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CA(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(o||c)&&(_+=" (found",o&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Me(de.INVALID_ARGUMENT,h+n+_)}function xU(n,e){return n.some(t=>t.isEqual(e))}class wE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class b$ extends wE{data(){return super.data()}}function EA(n,e){return"string"==typeof e?IA(n,e):e instanceof ph?e._internalPath:e._delegate._internalPath}function RU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xN{}class IE extends xN{}function Op(n,e,...t){let r=[];e instanceof xN&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof I0).length,c=i.filter(h=>h instanceof CE).length;if(o>1||o>0&&c>0)throw new Me(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class CE extends IE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new CE(e,t,r)}_apply(e){const t=this._parse(e);return FU(e._query,t),new hs(e.firestore,e.converter,OS(e._query,t))}_parse(e){const t=f_(e.firestore);return function(i,o,c,h,_,y,b){let S;if(_.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){LU(b,y);const R=[];for(const F of b)R.push(kU(h,i,F));S={arrayValue:{values:R}}}else S=kU(h,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||LU(b,y),S=PU(c,"where",b,"in"===y||"not-in"===y);return Jt.create(_,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class I0 extends xN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new I0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const c=i.getFlattenedFilters();for(const h of c)FU(o,h),o=OS(o,h)}(e._query,t),new hs(e.firestore,e.converter,OS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RN extends IE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new RN(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ah(i,o);return function(h,_){if(null===qC(h)){const y=vp(h);null!==y&&UU(0,y,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ds(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bA extends IE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new bA(e,t,r)}_apply(e){return new hs(e.firestore,e.converter,WC(e._query,this._limit,this._limitType))}}class TA extends IE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new TA(e,t,r)}_apply(e){const t=NU(e,this.type,this._docOrFields,this._inclusive);return new hs(e.firestore,e.converter,(i=t,new ds((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class DA extends IE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new DA(e,t,r)}_apply(e){const t=NU(e,this.type,this._docOrFields,this._inclusive);return new hs(e.firestore,e.converter,(i=t,new ds((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function NU(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof wE)return function(i,o,c,h,_){if(!h)throw new Me(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const b of hu(i))if(b.field.isKeyField())y.push(hc(o,h.key));else{const S=h.data.field(b.field);if(pp(S))throw new Me(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=b.field.canonicalString();throw new Me(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new fc(y,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=f_(n.firestore);return function(o,c,h,_,y,b){const S=o.explicitOrderBy;if(y.length>S.length)throw new Me(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let F=0;F<y.length;F++){const q=y[F];if(S[F].field.isKeyField()){if("string"!=typeof q)throw new Me(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!Qm(o)&&-1!==q.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const he=o.path.child(hn.fromString(q));if(!Xe.isDocumentKey(he))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${he}' is not because it contains an odd number of segments.`);const ve=new Xe(he);R.push(hc(c,ve))}else{const he=PU(h,_,q);R.push(he)}}return new fc(R,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kU(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Me(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qm(e)&&-1!==t.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!Xe.isDocumentKey(r))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hc(n,new Xe(r))}if(t instanceof dr)return hc(n,t._key);throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mA(t)}.`)}function LU(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FU(n,e){if(e.isInequality()){const r=vp(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Me(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=qC(n);null!==o&&UU(0,i,o)}const t=function(r,i){for(const o of r)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function UU(n,e,t){if(!t.isEqual(e))throw new Me(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class NN{convertValue(e,t="none"){switch(dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ac(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new yA(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){const t=lu(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);wt(XF(r));const i=new cc(r.get(1),r.get(3)),o=new Xe(r.popFirst(5));return i.isEqual(t)||zr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function SA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class R$ extends NN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}class g_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gh extends wE{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new EE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(EA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class EE extends gh{data(e={}){return super.data(e)}}class xp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new g_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new EE(this._firestore,this._userDataWriter,r.key,r,new g_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new g_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new g_(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,y=-1;return 0!==c.type&&(_=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:k$(c.type),doc:h,oldIndex:_,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function k$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function BU(n,e){return n instanceof gh&&e instanceof gh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xp&&e instanceof xp&&n._firestore===e._firestore&&DN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Rp extends NN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function jU(n,e,t){n=cn(n,dr);const r=cn(n.firestore,hr),i=SA(n.converter,e,t);return C0(r,[wA(f_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function HU(n,e,t,...r){n=cn(n,dr);const i=cn(n.firestore,hr),o=f_(i);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof ph?MN(o,"updateDoc",n._key,e,t,r):PN(o,"updateDoc",n._key,e),C0(i,[c.toMutation(n._key,ir.exists(!0))])}function $U(n,...e){var t,r,i;n=(0,N.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||SN(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(SN(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,y,b;if(n instanceof dr)y=cn(n.firestore,hr),b=Ol(n._key.path),_={next:S=>{e[c]&&e[c](kN(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=cn(n,hs);y=cn(S.firestore,hr),b=S._query;const R=new Rp(y);_={next:F=>{e[c]&&e[c](new xp(y,R,S,F))},error:e[c+1],complete:e[c+2]},RU(n._query)}return function(S,R,F,q){const he=new hA(q),ve=new GR(R,he,F);return S.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return VR(yield w0(S),ve)})),()=>{he.Dc(),S.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return jR(yield w0(S),ve)}))}}(ii(y),b,h,_)}function C0(n,e){return function(t,r){const i=new ti;return t.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function P4(n,e,t){return KR.apply(this,arguments)}(yield EN(t),r,i)})),i.promise}(ii(n),e)}function kN(n,e,t){const r=t.docs.get(e._key),i=new Rp(n);return new gh(n,i,e._key,r,new g_(t.hasPendingWrites,t.fromCache),e.converter)}const J$={maxAttempts:5};class GU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=f_(e)}set(e,t,r){this._verifyNotCommitted();const i=Np(e,this._firestore),o=SA(i.converter,t,r),c=wA(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Np(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof ph?MN(this._dataReader,"WriteBatch.update",o._key,t,r,i):PN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Np(e,this._firestore);return this._mutations=this._mutations.concat(new r_(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Np(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Me(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class eG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=f_(e)}get(e){const t=Np(e,this._firestore),r=new R$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const o=i[0];if(o.isFoundDocument())return new wE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new wE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Np(e,this._firestore),o=SA(i.converter,t,r),c=wA(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=Np(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof ph?MN(this._dataReader,"Transaction.update",o._key,t,r,i):PN(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Np(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Np(e,this._firestore),r=new Rp(this._firestore);return super.get(e).then(i=>new gh(this._firestore,r,t._key,i._document,new g_(!1,!1),t.converter))}}function LN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qU(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function WU(){if(!function xF(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gr=fn.SDK_VERSION,(0,fn._registerComponent)(new ur.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),c=new hr(new dx(t.getProvider("auth-internal")),new Bv(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Me(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(h.options.projectId,_)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(TC,"3.13.0",n),(0,fn.registerVersion)(TC,"3.13.0","esm2017")}();class bE{constructor(e){this._delegate=e}static fromBase64String(e){return WU(),new bE(Ll.fromBase64String(e))}static fromUint8Array(e){return qU(),new bE(Ll.fromUint8Array(e))}toBase64(){return WU(),this._delegate.toBase64()}toUint8Array(){return qU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FN(n){return function cG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lG{enableIndexedDbPersistence(e,t){return function u$(n,e){TU(n=cn(n,hr));const t=ii(n);if(t._uninitializedComponentsProvider)throw new Me(de.FAILED_PRECONDITION,"SDK cache is already specified.");io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new v0;return bU(t,i,new mN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function c$(n){TU(n=cn(n,hr));const e=ii(n);if(e._uninitializedComponentsProvider)throw new Me(de.FAILED_PRECONDITION,"SDK cache is already specified.");io("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new v0;return bU(e,r,new sU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function l$(n){if(n._initialized&&!n._terminated)throw new Me(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{yield(t=(0,K.Z)(function*(r){if(!cu.D())return Promise.resolve();const i=r+"main";yield cu.delete(i)}),function(r){return t.apply(this,arguments)})(uR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof cc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wU(n,e,t,r={}){var i;const o=(n=cn(n,mE))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==c&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=yi.MOCK_USER;else{h=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Me(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new yi(y)}n._authCredentials=new lx(new SC(h,_))}}(this._delegate,e,t,r)}enableNetwork(){return function h$(n){return function Y4(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield uU(n),t=yield cU(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),fE(i)}(t)}))}(ii(n=cn(n,hr)))}(this._delegate)}disableNetwork(){return function f$(n){return function Q4(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield uU(n),t=yield cU(n);return e.setNetworkEnabled(!1),(r=(0,K.Z)(function*(i){const o=Qe(i);o.vu.add(0),yield h0(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ii(n=cn(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function d$(n){return function(e){const t=new ti;return e.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function R4(n,e){return eN.apply(this,arguments)}(yield EN(e),t)})),t.promise}(ii(n=cn(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function G$(n,e){return function e$(n,e){const t=new hA(e);return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return r=yield w0(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return r=yield w0(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(ii(n=cn(n,hr)),SN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new E0(this,IU(this._delegate,e))}catch(t){throw oo(t,"collection()","Firestore.collection()")}}doc(e){try{return new pu(this,_A(this._delegate,e))}catch(t){throw oo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ao(this,function i$(n,e){if(n=cn(n,mE),TN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(t=e,new ds(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw oo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tG(n,e,t){n=cn(n,hr);const r=Object.assign(Object.assign({},J$),t);return function(i){if(i.maxAttempts<1)throw new Me(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,c){const h=new ti;return i.asyncQueue.enqueueAndForget((0,K.Z)(function*(){const _=yield function lU(n){return pA(n).then(e=>e.datastore)}(i);new Z4(i.asyncQueue,_,c,o,h).run()})),h.promise}(ii(n),i=>e(new eG(n,i)),r)}(this._delegate,t=>e(new KU(this,t)))}batch(){return ii(this._delegate),new YU(new GU(this._delegate,e=>C0(this._delegate,e)))}loadBundle(e){return function p$(n,e){const t=ii(n=cn(n,hr)),r=new o$;return function t$(n,e,t,r){const i=function(o,c){let h;return h="string"==typeof o?v().encode(o):o,_=function(_,y){if(_ instanceof Uint8Array)return oU(_,y);if(_ instanceof ArrayBuffer)return oU(new Uint8Array(_),y);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new q4(_,c);var _}(t,hE(e));n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){!function G4(n,e,t){const r=Qe(n);var i;(i=(0,K.Z)(function*(o,c,h){try{const _=yield c.getMetadata();if(yield function(R,F){const q=Qe(R),he=ri(F.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",ve=>q.qs.getBundleMetadata(ve,F.id)).then(ve=>!!ve&&ve.createTime.compareTo(he)>=0)}(o.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=_).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(Y2(_));const y=new E4(_,o.localStore,c.serializer);let b=yield c.bc();for(;b;){const R=yield y.zu(b);R&&h._updateProgress(R),b=yield c.bc()}const S=yield y.complete();return yield fh(o,S.Ju,void 0),yield function(R,F){const q=Qe(R);return q.persistence.runTransaction("Save bundle","readwrite",he=>q.qs.saveBundleMetadata(he,F))}(o.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return io("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var R}),function(o,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield EN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function g$(n,e){return function n$(n,e){return n.asyncQueue.enqueue((0,K.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield gA(n),e)}))}(ii(n=cn(n,hr)),e).then(t=>t?new hs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ao(this,t):null)}}class AA extends NN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bE(new Ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pu.forKey(t,this.firestore,null)}}class KU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}get(e){const t=__(e);return this._delegate.get(t).then(r=>new TE(this._firestore,new gh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=__(e);return r?(LN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=__(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=__(e);return this._delegate.delete(t),this}}class YU{constructor(e){this._delegate=e}set(e,t,r){const i=__(e);return r?(LN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=__(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=__(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class m_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new EE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=m_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new m_(e,new AA(e),t),i.set(t,o)),o}}m_.INSTANCES=new WeakMap;class pu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pu(t,new dr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new pu(t,new dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new E0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new E0(this.firestore,IU(this._delegate,e))}catch(t){throw oo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof dr&&CU(this._delegate,e)}set(e,t){t=LN("DocumentReference.set",t);try{return t?jU(this._delegate,e,t):jU(this._delegate,e)}catch(r){throw oo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HU(this._delegate,e):HU(this._delegate,e,t,...r)}catch(i){throw oo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function H$(n){return C0(cn(n.firestore,hr),[new r_(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=QU(e),r=XU(e,i=>new TE(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $U(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function F$(n){n=cn(n,dr);const e=cn(n.firestore,hr),t=ii(e),r=new Rp(e);return function X4(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(r=(0,K.Z)(function*(i,o,c){try{const h=yield function(_,y){const b=Qe(_);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,y))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Me(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=g0(h,`Failed to get document '${o} from cache`);c.reject(_)}}),function(i,o,c){return r.apply(this,arguments)})(yield gA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new gh(e,r,n._key,i,new g_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function U$(n){n=cn(n,dr);const e=cn(n.firestore,hr);return dU(ii(e),n._key,{source:"server"}).then(t=>kN(e,n,t))}(this._delegate):function L$(n){n=cn(n,dr);const e=cn(n.firestore,hr);return dU(ii(e),n._key).then(t=>kN(e,n,t))}(this._delegate),t.then(r=>new TE(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pu(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}function oo(n,e,t){return n.message=n.message.replace(e,t),n}function QU(n){for(const e of n)if("object"==typeof e&&!FN(e))return e;return{}}function XU(n,e){var t,r;let i;return i=FN(n[0])?n[0]:FN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class TE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BU(this._delegate,e._delegate)}}class DE extends TE{data(e){const t=this._delegate.data(e);return function DF(n,e){n||dt()}(void 0!==t),t}}class ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}where(e,t,r){try{return new ao(this.firestore,Op(this._delegate,function T$(n,e,t){const r=e,i=EA("where",n);return CE._create(i,r,t)}(e,t,r)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ao(this.firestore,Op(this._delegate,function D$(n,e="asc"){const t=e,r=EA("orderBy",n);return RN._create(r,t)}(e,t)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ao(this.firestore,Op(this._delegate,function S$(n){return yU("limit",n),bA._create("limit",n,"F")}(e)))}catch(t){throw oo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ao(this.firestore,Op(this._delegate,function A$(n){return yU("limitToLast",n),bA._create("limitToLast",n,"L")}(e)))}catch(t){throw oo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ao(this.firestore,Op(this._delegate,function P$(...n){return TA._create("startAt",n,!0)}(...e)))}catch(t){throw oo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ao(this.firestore,Op(this._delegate,function M$(...n){return TA._create("startAfter",n,!1)}(...e)))}catch(t){throw oo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ao(this.firestore,Op(this._delegate,function O$(...n){return DA._create("endBefore",n,!1)}(...e)))}catch(t){throw oo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ao(this.firestore,Op(this._delegate,function x$(...n){return DA._create("endAt",n,!0)}(...e)))}catch(t){throw oo(t,"endAt()","Query.endAt()")}}isEqual(e){return DN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function B$(n){n=cn(n,hs);const e=cn(n.firestore,hr),t=ii(e),r=new Rp(e);return function J4(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(r=(0,K.Z)(function*(i,o,c){try{const h=yield sA(i,o,!0),_=new J2(o,h.ir),y=_.sc(h.documents),b=_.applyChanges(y,!1);c.resolve(b.snapshot)}catch(h){const _=g0(h,`Failed to execute query '${o} against cache`);c.reject(_)}}),function(i,o,c){return r.apply(this,arguments)})(yield gA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xp(e,r,n,i))}(this._delegate):"server"===e?.source?function j$(n){n=cn(n,hs);const e=cn(n.firestore,hr),t=ii(e),r=new Rp(e);return hU(t,n._query,{source:"server"}).then(i=>new xp(e,r,n,i))}(this._delegate):function V$(n){n=cn(n,hs);const e=cn(n.firestore,hr),t=ii(e),r=new Rp(e);return RU(n._query),hU(t,n._query).then(i=>new xp(e,r,n,i))}(this._delegate),t.then(r=>new UN(this.firestore,new xp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QU(e),r=XU(e,i=>new UN(this.firestore,new xp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $U(this._delegate,t,r)}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}class hG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new DE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new DE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new hG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new DE(this._firestore,r))})}isEqual(e){return BU(this._delegate,e._delegate)}}class E0 extends ao{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pu(this.firestore,e):null}doc(e){try{return new pu(this.firestore,void 0===e?_A(this._delegate):_A(this._delegate,e))}catch(t){throw oo(t,"doc()","CollectionReference.doc()")}}add(e){return function $$(n,e){const t=cn(n.firestore,hr),r=_A(n),i=SA(n.converter,e);return C0(t,[wA(f_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pu(this.firestore,t))}isEqual(e){return CU(this._delegate,e._delegate)}withConverter(e){return new E0(this.firestore,this._delegate.withConverter(e?m_.getInstance(this.firestore,e):null))}}function __(n){return cn(n,dr)}class VN{constructor(...e){this._delegate=new ph(...e)}static documentId(){return new VN(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof ph&&this._delegate._internalPath.isEqual(e._internalPath)}}class y_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rG(){return new AN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new y_(e)}static delete(){const e=function nG(){return new yE("deleteField")}();return e._methodName="FieldValue.delete",new y_(e)}static arrayUnion(...e){const t=function iG(...n){return new w$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new y_(t)}static arrayRemove(...e){const t=function sG(...n){return new I$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new y_(t)}static increment(e){const t=function oG(n){return new C$("increment",n)}(e);return t._methodName="FieldValue.increment",new y_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fG={Firestore:ZU,GeoPoint:yA,Timestamp:rr,Blob:bE,Transaction:KU,WriteBatch:YU,DocumentReference:pu,DocumentSnapshot:TE,Query:ao,QueryDocumentSnapshot:DE,QuerySnapshot:UN,CollectionReference:E0,FieldPath:VN,FieldValue:y_,setLogLevel:function dG(n){!function ux(n){ro.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function JU(n,e){return function mG(n,e=_s.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function BN(n,e){return JU(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function PA(n,e){return BN(n,e).pipe(Em(void 0),lv(),(0,Et.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(b=>b.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function eV(n,e,t){return PA(n,t).pipe(kr((r,i)=>function yG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,Lr.x)(),(0,Et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function jN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function gG(n){(function pG(n,e){n.INTERNAL.registerComponent(new ur.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},fG)))})(n,(e,t)=>new ZU(e,t,new lG)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(xu.Z);class nV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Em(void 0),lv(),va(([r,i])=>i.length>0||!r),(0,Et.U)(([r,i])=>i),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tV(e);return eV(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return BN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new rV(this.ref.doc(e),this.afs)}}class rV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=oV(r,t);return new nV(i,o,this.afs)}snapshotChanges(){return function _G(n,e){return JU(n,e).pipe(Em(void 0),lv(),(0,Et.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,$n.D)(this.ref.get(e)).pipe(on.iC)}}class wG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),va(t=>t.length>0),on.iC):PA(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tV(e);return eV(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return BN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),on.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(on.iC)}}const iV=new f.OlP("angularfire2.enableFirestorePersistence"),sV=new f.OlP("angularfire2.firestore.persistenceSettings"),IG=new f.OlP("angularfire2.firestore.settings"),CG=new f.OlP("angularfire2.firestore.use-emulator");function oV(n,e=(t=>t)){return{query:e(n),ref:n}}let aV=(()=>{class n{constructor(t,r,i,o,c,h,_,y,b,S,R,F,q,he,ve,ze,ot){this.schedulers=_;const We=(0,er.on)(t,h,r),ct=b;S&&Im(We,h,R,q,he,ve,F,ze),[this.firestore,this.persistenceEnabled$]=(0,er.cc)(`${We.name}.firestore`,"AngularFirestore",We.name,()=>{const At=h.runOutsideAngular(()=>We.firestore());if(o&&At.settings(o),ct&&At.useEmulator(...ct),i&&!Gs(c)){const Ht=()=>{try{return(0,$n.D)(At.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(jr){return typeof console<"u"&&console.warn(jr),(0,ft.of)(!1)}};return[At,h.runOutsideAngular(Ht)]}return[At,(0,ft.of)(!1)]},[o,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=oV(i,r),h=this.schedulers.ngZone.run(()=>o);return new nV(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new wG(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(er.Dh),f.LFG(er.xv,8),f.LFG(iV,8),f.LFG(IG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(sV,8),f.LFG(CG,8),f.LFG(to,8),f.LFG(DI,8),f.LFG(sv,8),f.LFG(SI,8),f.LFG(ov,8),f.LFG(jT,8),f.LFG(av,8),f.LFG(wm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EG=(()=>{class n{constructor(){Il.Z.registerVersion("angularfire",on.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:iV,useValue:!0},{provide:sV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[aV]}),n})();const uV="firebasestorage.googleapis.com",cV="storageBucket";class Vr extends N.ZR{constructor(e,t,r=0){super(HN(e),`Firebase Storage: ${t} (${HN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return HN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Sr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Sr||{});function HN(n){return"storage/"+n}function $N(){return new Vr(Sr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lV(){return new Vr(Sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dV(){return new Vr(Sr.CANCELED,"User canceled the upload/download.")}function hV(){return new Vr(Sr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b0(n){return new Vr(Sr.INVALID_ARGUMENT,n)}function fV(){return new Vr(Sr.APP_DELETED,"The Firebase app was deleted.")}function pV(n){return new Vr(Sr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function SE(n,e){return new Vr(Sr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function AE(n){throw new Vr(Sr.INTERNAL_ERROR,"Internal error: "+n)}class Fs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fs.makeFromUrl(e,t)}catch{return new Fs(e,"")}if(""===r.path)return r;throw function NG(n){return new Vr(Sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ct){ct.path_=decodeURIComponent(ct.path)}const S=t.replace(/[.]/g,"\\."),We=[{regex:h,indices:{bucket:1,path:3},postModify:function o(ct){"/"===ct.path.charAt(ct.path.length-1)&&(ct.path_=ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===uV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ct=0;ct<We.length;ct++){const At=We[ct],Ht=At.regex.exec(e);if(Ht){let fo=Ht[At.indices.path];fo||(fo=""),r=new Fs(Ht[At.indices.bucket],fo),At.postModify(r);break}}if(null==r)throw function RG(n){return new Vr(Sr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class VG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MA(n){return"string"==typeof n||n instanceof String}function gV(n){return GN()&&n instanceof Blob}function GN(){return typeof Blob<"u"&&!(0,N.UG)()}function zN(n,e,t,r){if(r<e)throw b0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw b0(`Invalid value for '${n}'. Expected ${t} or less.`)}function mh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function mV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var T0=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(T0||{});function _V(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class zG{constructor(e,t,r,i,o,c,h,_,y,b,S,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=_,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,q)=>{this.resolve_=F,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function HG(n){return void 0!==n}(_)?o():o(_)}catch(_){c(_)}else if(null!==h){const _=$N();_.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,_):_)}else c(i.canceled?this.appDelete_?fV():dV():lV())};this.canceled_?t(0,new OA(!1,null,!0)):this.backoffId_=function BG(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function _(){return 2===h}let y=!1;function b(...ve){y||(y=!0,e.apply(null,ve))}function S(ve){i=setTimeout(()=>{i=null,n(F,_())},ve)}function R(){o&&clearTimeout(o)}function F(ve,...ze){if(y)return void R();if(ve)return R(),void b.call(null,ve,...ze);if(_()||c)return R(),void b.call(null,ve,...ze);let We;r<64&&(r*=2),1===h?(h=2,We=0):We=1e3*(r+Math.random()),S(We)}let q=!1;function he(ve){q||(q=!0,R(),!y&&(null!==i?(ve||(h=2),clearTimeout(i),S(0)):ve||(h=1)))}return S(0),o=setTimeout(()=>{c=!0,he(!0)},t),he}((r,i)=>{if(i)return void r(!1,new OA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===T0.NO_ERROR,_=o.getStatus();if(!h||_V(_,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===T0.ABORT;return void r(!1,new OA(!1,null,b))}const y=-1!==this.successCodes_.indexOf(_);r(!0,new OA(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function jG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class OA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function XG(...n){const e=function QG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(GN())return new Blob(n);throw new Vr(Sr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ba={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qN{constructor(e,t){this.data=e,this.contentType=t||null}}function WN(n,e){switch(n){case ba.RAW:return new qN(yV(e));case ba.BASE64:case ba.BASE64URL:return new qN(vV(n,e));case ba.DATA_URL:return new qN(function n6(n){const e=new wV(n);return e.base64?vV(ba.BASE64,e.rest):function t6(n){let e;try{e=decodeURIComponent(n)}catch{throw SE(ba.DATA_URL,"Malformed data URL.")}return yV(e)}(e.rest)}(e),function r6(n){return new wV(n).contentType}(e))}throw $N()}function yV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function vV(n,e){switch(n){case ba.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw SE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ba.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw SE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function e6(n){if(typeof atob>"u")throw function UG(n){return new Vr(Sr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:SE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class wV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw SE(ba.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function i6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Fl{constructor(e,t){let r=0,i="";gV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(gV(this.data_)){const i=function JG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Fl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Fl(r,!0)}}static getBlob(...e){if(GN()){const t=e.map(r=>r instanceof Fl?r.data_:r);return new Fl(XG.apply(null,t))}{const t=e.map(c=>MA(c)?WN(ba.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new Fl(i,!0)}}uploadData(){return this.data_}}function ZN(n){let e;try{e=JSON.parse(n)}catch{return null}return function GG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function IV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function a6(n,e){return e}class uo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||a6}}let xA=null;function PE(){if(xA)return xA;const n=[];n.push(new uo("bucket")),n.push(new uo("generation")),n.push(new uo("metageneration")),n.push(new uo("name","fullPath",!0));const t=new uo("name");t.xform=function e(o,c){return function u6(n){return!MA(n)||n.length<2?n:IV(n)}(c)},n.push(t);const i=new uo("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new uo("timeCreated")),n.push(new uo("updated")),n.push(new uo("md5Hash",null,!0)),n.push(new uo("cacheControl",null,!0)),n.push(new uo("contentDisposition",null,!0)),n.push(new uo("contentEncoding",null,!0)),n.push(new uo("contentLanguage",null,!0)),n.push(new uo("contentType",null,!0)),n.push(new uo("metadata","customMetadata",!0)),xA=n,xA}function CV(n,e,t){const r=ZN(e);return null===r?null:function l6(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return function c6(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Fs(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function KN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const EV="prefixes",bV="items";class Ul{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vl(n){if(!n)throw $N()}function RA(n,e){return function t(r,i){const o=CV(n,i,e);return Vl(null!==o),o}}function D0(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function OG(){return new Vr(Sr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function MG(){return new Vr(Sr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function PG(n){return new Vr(Sr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function xG(n){return new Vr(Sr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ME(n){const e=D0(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function AG(n){return new Vr(Sr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function TV(n,e,t){const i=mh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ul(i,"GET",RA(n,t),c);return h.errorHandler=ME(e),h}function m6(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=mh(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new Ul(h,"GET",function p6(n,e){return function t(r,i){const o=function f6(n,e,t){const r=ZN(t);return null===r?null:function h6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[EV])for(const i of t[EV]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new Fs(e,o));r.prefixes.push(c)}if(t[bV])for(const i of t[bV]){const o=n._makeStorageReference(new Fs(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Vl(null!==o),o}}(n,e.bucket),y);return b.urlParams=o,b.errorHandler=D0(e),b}function SV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function w6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class NA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function YN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vl(!1)}return Vl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const b6={STATE_CHANGED:"state_changed"},co={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QN(n){switch(n){case"running":case"pausing":case"canceling":return co.RUNNING;case"paused":return co.PAUSED;case"success":return co.SUCCESS;case"canceled":return co.CANCELED;default:return co.ERROR}}class T6{constructor(e,t,r){if(function $G(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function S0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let MV=null;class D6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=T0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=T0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=T0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw AE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw AE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw AE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw AE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw AE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class S6 extends D6{initXhr(){this.xhr_.responseType="text"}}function _c(){return MV?MV():new S6}class OV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=PE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Sr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(_V(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=lV()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Sr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function I6(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c=SV(e,r,i),h={name:c.fullPath},_=mh(o,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=KN(c,t),q=new Ul(_,"POST",function F(he){let ve;YN(he);try{ve=he.getResponseHeader("X-Goog-Upload-URL")}catch{Vl(!1)}return Vl(MA(ve)),ve},n.maxUploadRetryTime);return q.urlParams=h,q.headers=b,q.body=S,q.errorHandler=D0(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_c,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function C6(n,e,t,r){const _=new Ul(t,"POST",function o(y){const b=YN(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vl(!1)}S||Vl(!1);const R=Number(S);return Vl(!isNaN(R)),new NA(R,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=D0(e),_}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,_c,t,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new NA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function E6(n,e,t,r,i,o,c,h){const _=new NA(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function LG(){return new Vr(Sr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=_.total-_.current;let b=y;i>0&&(b=Math.min(b,i));const S=_.current;let F="";F=0===b?"finalize":y===b?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${_.current}`},he=r.slice(S,S+b);if(null===he)throw hV();const We=new Ul(t,"POST",function ve(ct,At){const Ht=YN(ct,["active","final"]),jr=_.current+b,fo=r.size();let zl;return zl="final"===Ht?RA(e,o)(ct,At):null,new NA(jr,fo,"final"===Ht,zl)},e.maxUploadRetryTime);return We.headers=q,We.body=he.uploadData(),We.progressCallback=h||null,We.errorHandler=D0(n),We}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(c,_c,i,o,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=TV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,_c,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function AV(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let We="";for(let ct=0;ct<2;ct++)We+=Math.random().toString().slice(2);return We}();c["Content-Type"]="multipart/related; boundary="+_;const y=SV(e,r,i),b=KN(y,t),F=Fl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===F)throw hV();const q={name:y.fullPath},he=mh(o,n.host,n._protocol),ze=n.maxUploadRetryTime,ot=new Ul(he,"POST",RA(n,t),ze);return ot.urlParams=q,ot.headers=c,ot.body=F.uploadData(),ot.errorHandler=D0(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_c,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=QN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new T6(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(QN(this._state)){case co.SUCCESS:S0(this._resolve.bind(null,this.snapshot))();break;case co.CANCELED:case co.ERROR:S0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(QN(this._state)){case co.RUNNING:case co.PAUSED:e.next&&S0(e.next.bind(e,this.snapshot))();break;case co.SUCCESS:e.complete&&S0(e.complete.bind(e))();break;default:e.error&&S0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class v_{constructor(e,t){this._service=e,this._location=t instanceof Fs?t:Fs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new v_(e,t)}get root(){const e=new Fs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IV(this._location.path)}get storage(){return this._service}get parent(){const e=function s6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Fs(this._location.bucket,e);return new v_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw pV(e)}}function RV(n,e,t){return XN.apply(this,arguments)}function XN(){return XN=(0,K.Z)(function*(n,e,t){const i=yield NV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield RV(n,e,i.nextPageToken))}),XN.apply(this,arguments)}function NV(n,e){null!=e&&"number"==typeof e.maxResults&&zN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=m6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,_c)}function V6(n){n._throwIfRoot("getDownloadURL");const e=function _6(n,e,t){const i=mh(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ul(i,"GET",function g6(n,e){return function t(r,i){const o=CV(n,i,e);return Vl(null!==o),function d6(n,e,t,r){const i=ZN(e);if(null===i||!MA(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(y=>{const S=n.fullPath;return mh("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+mV({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=ME(e),h}(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,_c).then(t=>{if(null===t)throw function FG(){return new Vr(Sr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function kV(n,e){const t=function o6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Fs(n._location.bucket,t);return new v_(n.storage,r)}function LV(n,e){if(n instanceof JN){const t=n;if(null==t._bucket)throw function kG(){return new Vr(Sr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cV+"' property when initializing the app?")}();const r=new v_(t,t._bucket);return null!=e?LV(r,e):r}return void 0!==e?kV(n,e):n}function $6(n,e){if(e&&function j6(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof JN)return function H6(n,e){return new v_(n,e)}(n,e);throw b0("To use ref(service, url), the first argument must be a Storage instance.")}return LV(n,e)}function FV(n,e){const t=e?.[cV];return null==t?null:Fs.makeFromBucketSpec(t,n)}class JN{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=uV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Fs.makeFromBucketSpec(i,this._host):FV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Fs.makeFromBucketSpec(this._url,e):FV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,K.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,K.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new v_(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new VG(fV());{const c=function YG(n,e,t,r,i,o,c=!0){const h=mV(n.urlParams),_=n.url+h,y=Object.assign({},n.headers);return function ZG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function qG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function WG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,o),function KG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new zG(_,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,K.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const UV="@firebase/storage";function jV(n,e){return $6(n=(0,N.m9)(n),e)}function J6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new JN(t,r,i,e,fn.SDK_VERSION)}!function ez(){(0,fn._registerComponent)(new ur.wA("storage",J6,"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(UV,"0.11.2",""),(0,fn.registerVersion)(UV,"0.11.2","esm2017")}();class kA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $V{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new kA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new kA(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?c=>t(new kA(c,this,this._ref)):{next:t.next?c=>t.next(new kA(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class GV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new _h(e,this._service))}get items(){return this._delegate.items.map(e=>new _h(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _h{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function X6(n,e){return kV(n,e)}(this._delegate,e);return new _h(t,this.storage)}get root(){return new _h(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new _h(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $V(function z6(n,e,t){return function N6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new OV(n,new Fl(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ba.RAW,r){this._throwIfRoot("putString");const i=WN(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new $V(new OV(this._delegate,new Fl(i.data,!0),o),this)}listAll(){return function K6(n){return function L6(n){const e={prefixes:[],items:[]};return RV(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new GV(e,this.storage))}list(e){return function Z6(n,e){return NV(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new GV(t,this.storage))}getMetadata(){return function q6(n){return function F6(n){n._throwIfRoot("getMetadata");const e=TV(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,_c)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function W6(n,e){return function U6(n,e){n._throwIfRoot("updateMetadata");const t=function y6(n,e,t,r){const o=mh(e.fullServerUrl(),n.host,n._protocol),h=KN(t,r),y=n.maxOperationRetryTime,b=new Ul(o,"PATCH",RA(n,r),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=ME(e),b}(n.storage,n._location,e,PE());return n.storage.makeRequestWithTokens(t,_c)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Y6(n){return V6(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Q6(n){return function B6(n){n._throwIfRoot("deleteObject");const e=function v6(n,e){const r=mh(e.fullServerUrl(),n.host,n._protocol),h=new Ul(r,"DELETE",function c(_,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=ME(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,_c)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw pV(e)}}class zV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qV(e))throw b0("ref() expected a child path but got a URL, use refFromURL instead.");return new _h(jV(this._delegate,e),this)}refFromURL(e){if(!qV(e))throw b0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Fs.makeFromUrl(e,this._delegate.host)}catch{throw b0("refFromUrl() expected a valid full URL but got an invalid one.")}return new _h(jV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function HV(n,e,t,r={}){!function G6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,N.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function qV(n){return/^[A-Za-z]+:\/\//.test(n)}function iz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new zV(t,r)}function WV(n){const e=function oz(n){return new Er.y(e=>{const t=c=>e.next(c);t(n.snapshot);const o=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){o()}}).pipe(function bG(n,e=_s.z){return(0,ar.e)((t,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function _(){const y=c+n,b=e.now();if(b<y)return i=this.schedule(void 0,y-b),void r.add(i);h()}t.subscribe((0,tr.x)(r,y=>{o=y,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Et.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LA(n){return{getDownloadURL:()=>(0,ft.of)(void 0).pipe(on.fc,(0,On.w)(()=>n.getDownloadURL()),on.iC),getMetadata:()=>(0,ft.of)(void 0).pipe(on.fc,(0,On.w)(()=>n.getMetadata()),on.iC),delete:()=>(0,$n.D)(n.delete()),child:e=>LA(n.child(e)),updateMetadata:e=>(0,$n.D)(n.updateMetadata(e)),put:(e,t)=>WV(n.put(e,t)),putString:(e,t,r)=>WV(n.putString(e,t,r)),list:e=>(0,$n.D)(n.list(e)),listAll:()=>(0,$n.D)(n.listAll())}}!function sz(n){const e={TaskState:co,TaskEvent:b6,StringFormat:ba,Storage:zV,Reference:_h};n.INTERNAL.registerComponent(new ur.wA("storage-compat",iz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(xu.Z);const az=new f.OlP("angularfire2.storageBucket"),uz=new f.OlP("angularfire2.storage.maxUploadRetryTime"),cz=new f.OlP("angularfire2.storage.maxOperationRetryTime"),lz=new f.OlP("angularfire2.storage.use-emulator");let dz=(()=>{class n{constructor(t,r,i,o,c,h,_,y,b,S){const R=(0,er.on)(t,c,r);this.storage=(0,er.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const F=c.runOutsideAngular(()=>R.storage(i||void 0)),q=b;return q&&F.useEmulator(...q),_&&F.setMaxUploadRetryTime(_),y&&F.setMaxOperationRetryTime(y),F},[_,y])}ref(t){return LA(this.storage.ref(t))}refFromURL(t){return LA(this.storage.refFromURL(t))}upload(t,r,i){return LA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(er.Dh),f.LFG(er.xv,8),f.LFG(az,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(uz,8),f.LFG(cz,8),f.LFG(lz,8),f.LFG(wm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),fz=(()=>{class n{constructor(){Il.Z.registerVersion("angularfire",on.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[dz],imports:[hz]}),n})();var yc=k(5619);const{isArray:gz}=Array,{getPrototypeOf:mz,prototype:_z,keys:yz}=Object;function ZV(n){if(1===n.length){const e=n[0];if(gz(e))return{args:e,keys:null};if(function vz(n){return n&&"object"==typeof n&&mz(n)===_z}(e)){const t=yz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:wz}=Array;function KV(n){return(0,Et.U)(e=>function Iz(n,e){return wz(e)?n(...e):n(e)}(n,e))}function YV(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Cz=k(7103);function ek(...n){const e=(0,Do.yG)(n),t=(0,Do.jO)(n),{args:r,keys:i}=ZV(n);if(0===r.length)return(0,$n.D)([],e);const o=new Er.y(function Ez(n,e,t=Ou.y){return r=>{QV(e,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)QV(e,()=>{const y=(0,$n.D)(n[_],e);let b=!1;y.subscribe((0,tr.x)(r,S=>{o[_]=S,b||(b=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>YV(i,c):Ou.y));return t?o.pipe(KV(t)):o}function QV(n,e,t){n?(0,Cz.f)(t,n,e):e()}function XV(n){return new Er.y(e=>{(0,$a.Xf)(n()).subscribe(e)})}var bz=k(8407);function OE(n,e){const t=(0,sm.m)(n)?n:()=>n,r=i=>i.error(t());return new Er.y(e?i=>e.schedule(r,0,i):r)}var tk=k(7394);function nk(){return(0,ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,tr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class JV extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tk.w0;const t=this.getSubject();e.add(this.source.subscribe((0,tr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tk.w0.EMPTY)}return e}refCount(){return nk()(this)}}var lo=k(1631);function xE(n,e){return(0,sm.m)(e)?(0,lo.z)(n,e,1):(0,lo.z)(n,1)}var Us=k(9397);function w_(n){return(0,ar.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,tr.x)(t,void 0,void 0,c=>{o=(0,$a.Xf)(n(c,w_(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function rk(n){return n<=0?()=>Gd.E:(0,ar.e)((e,t)=>{let r=[];e.subscribe((0,tr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ik(n){return(0,ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",RE=Symbol("RouteTitle");class Az{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function A0(n){return new Az(n)}function Pz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!eB(n[i],e[i]))return!1;return!0}function eB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function tB(n){return n.length>0?n[n.length-1]:null}function kp(n){return function pz(n){return!!n&&(n instanceof Er.y||(0,sm.m)(n.lift)&&(0,sm.m)(n.subscribe))}(n)?n:(0,f.QGY)(n)?(0,$n.D)(Promise.resolve(n)):(0,ft.of)(n)}const Oz={exact:function iB(n,e,t){if(!I_(n.segments,e.segments)||!FA(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!iB(n.children[r],e.children[r],t))return!1;return!0},subset:sB},nB={exact:function xz(n,e){return Bl(n,e)},subset:function Rz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>eB(n[t],e[t]))},ignored:()=>!0};function rB(n,e,t){return Oz[t.paths](n.root,e.root,t.matrixParams)&&nB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sB(n,e,t){return oB(n,e,e.segments,t)}function oB(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!I_(i,t)||e.hasChildren()||!FA(i,t,r))}if(n.segments.length===t.length){if(!I_(n.segments,t)||!FA(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sB(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(I_(n.segments,i)&&FA(n.segments,i,r)&&n.children[Xt])&&oB(n.children[Xt],e,o,r)}}function FA(n,e,t){return e.every((r,i)=>nB[t](n[i].parameters,r.parameters))}class P0{constructor(e=new Un([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=A0(this.queryParams)),this._queryParamMap}toString(){return Lz.serialize(this)}}class Un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return UA(this)}}class NE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=A0(this.parameters)),this._parameterMap}toString(){return cB(this)}}function I_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kE=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new sk},providedIn:"root"}),e})();class sk{parse(e){const t=new Wz(e);return new P0(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${LE(e.root,!0)}`,r=function Vz(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${VA(t)}=${VA(i)}`).join("&"):`${VA(t)}=${VA(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Fz(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Lz=new sk;function UA(n){return n.segments.map(e=>cB(e)).join("/")}function LE(n,e){if(!n.hasChildren())return UA(n);if(e){const t=n.children[Xt]?LE(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Xt&&r.push(`${i}:${LE(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Xt?[LE(n.children[Xt],!1)]:[`${i}:${LE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${UA(n)}/${t[0]}`:`${UA(n)}/(${t.join("//")})`}}function aB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VA(n){return aB(n).replace(/%3B/gi,";")}function ok(n){return aB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function BA(n){return decodeURIComponent(n)}function uB(n){return BA(n.replace(/\+/g,"%20"))}function cB(n){return`${ok(n.path)}${function Uz(n){return Object.keys(n).map(e=>`;${ok(e)}=${ok(n[e])}`).join("")}(n.parameters)}`}const Bz=/^[^\/()?;#]+/;function ak(n){const e=n.match(Bz);return e?e[0]:""}const jz=/^[^\/()?;=#]+/,$z=/^[^=?&#]+/,zz=/^[^&#]+/;class Wz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Un([],{}):new Un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Un(e,t)),r}parseSegment(){const e=ak(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new NE(BA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Hz(n){const e=n.match(jz);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ak(this.remaining);i&&(r=i,this.capture(r))}e[BA(t)]=BA(r)}parseQueryParam(e){const t=function Gz(n){const e=n.match($z);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function qz(n){const e=n.match(zz);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=uB(t),o=uB(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ak(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Xt);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[Xt]:new Un([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function lB(n){return n.segments.length>0?new Un([],{[Xt]:n}):n}function dB(n){const e={};for(const r of Object.keys(n.children)){const o=dB(n.children[r]);if(r===Xt&&0===o.segments.length&&o.hasChildren())for(const[c,h]of Object.entries(o.children))e[c]=h;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Zz(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Un(n.segments.concat(e.segments),e.children)}return n}(new Un(n.segments,e))}function C_(n){return n instanceof P0}function hB(n){let e;const i=lB(function t(o){const c={};for(const _ of o.children){const y=t(_);c[_.outlet]=y}const h=new Un(o.url,c);return o===n&&(e=h),h}(n.root));return e??i}function fB(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return uk(i,i,i,t,r);const o=function Yz(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gB(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([_,y])=>{h[_]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new gB(t,e,r)}(e);if(o.toRoot())return uk(i,i,new Un([],{}),t,r);const c=function Qz(n,e,t){if(n.isAbsolute)return new HA(e,!0,0);if(!t)return new HA(e,!1,NaN);if(null===t.parent)return new HA(t,!0,0);const r=jA(n.commands[0])?0:1;return function Xz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new HA(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),h=c.processChildren?UE(c.segmentGroup,c.index,o.commands):mB(c.segmentGroup,c.index,o.commands);return uk(i,c.segmentGroup,h,t,r)}function jA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function FE(n){return"object"==typeof n&&null!=n&&n.outlets}function uk(n,e,t,r,i){let c,o={};r&&Object.entries(r).forEach(([_,y])=>{o[_]=Array.isArray(y)?y.map(b=>`${b}`):`${y}`}),c=n===e?t:pB(n,e,t);const h=lB(dB(c));return new P0(h,o,i)}function pB(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:pB(o,e,t)}),new Un(n.segments,r)}class gB{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&jA(r[0]))throw new f.vHH(4003,!1);const i=r.find(FE);if(i&&i!==tB(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class HA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mB(n,e,t){if(n||(n=new Un([],{})),0===n.segments.length&&n.hasChildren())return UE(n,e,t);const r=function e5(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],h=t[r];if(FE(h))break;const _=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&y&&"object"==typeof y&&void 0===y.outlets){if(!yB(_,y,c))return o;r+=2}else{if(!yB(_,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Un(n.segments.slice(0,r.pathIndex),{});return o.children[Xt]=new Un(n.segments.slice(r.pathIndex),n.children),UE(o,0,i)}return r.match&&0===i.length?new Un(n.segments,{}):r.match&&!n.hasChildren()?ck(n,e,t):r.match?UE(n,0,i):ck(n,e,t)}function UE(n,e,t){if(0===t.length)return new Un(n.segments,{});{const r=function Jz(n){return FE(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Xt)&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const o=UE(n.children[Xt],e,t);return new Un(n.segments,o.children)}return Object.entries(r).forEach(([o,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[o]=mB(n.children[o],e,c))}),Object.entries(n.children).forEach(([o,c])=>{void 0===r[o]&&(i[o]=c)}),new Un(n.segments,i)}}function ck(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(FE(o)){const _=t5(o.outlets);return new Un(r,_)}if(0===i&&jA(t[0])){r.push(new NE(n.segments[e].path,_B(t[0]))),i++;continue}const c=FE(o)?o.outlets[Xt]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&jA(h)?(r.push(new NE(c,_B(h))),i+=2):(r.push(new NE(c,{})),i++)}return new Un(r,{})}function t5(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ck(new Un([],{}),0,r))}),e}function _B(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yB(n,e,t){return n==t.path&&Bl(e,t.parameters)}const VE="imperative";class jl{constructor(e,t){this.id=e,this.url=t}}class $A extends jl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lp extends jl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class BE extends jl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class M0 extends jl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class GA extends jl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vB extends jl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n5 extends jl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r5 extends jl{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class i5 extends jl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s5 extends jl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o5{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class a5{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class u5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lk{}class dk{constructor(e){this.url=e}}class h5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new jE,this.attachRef=null}}let jE=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new h5,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class IB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hk(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fk(e,this._root).map(t=>t.value)}}function hk(n,e){if(n===e.value)return e;for(const t of e.children){const r=hk(n,t);if(r)return r}return null}function fk(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fk(n,t);if(r.length)return r.unshift(e),r}return[]}class yh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function O0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class CB extends IB{constructor(e,t){super(e),this.snapshot=t,pk(this,e)}toString(){return this.snapshot.toString()}}function EB(n,e){const t=function f5(n,e){const c=new zA([],{},{},"",{},Xt,e,null,{});return new TB("",new yh(c,[]))}(0,e),r=new yc.X([new NE("",{})]),i=new yc.X({}),o=new yc.X({}),c=new yc.X({}),h=new yc.X(""),_=new x0(r,i,c,h,o,Xt,e,t.root);return _.snapshot=t.root,new CB(new yh(_,[]),t)}class x0{constructor(e,t,r,i,o,c,h,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=h,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Et.U)(y=>y[RE]))??(0,ft.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>A0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>A0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bB(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function p5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zA{get title(){return this.data?.[RE]}constructor(e,t,r,i,o,c,h,_,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=_,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=A0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=A0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TB extends IB{constructor(e,t){super(t),this.url=e,pk(this,t)}toString(){return DB(this._root)}}function pk(n,e){e.value._routerState=n,e.children.forEach(t=>pk(n,t))}function DB(n){const e=n.children.length>0?` { ${n.children.map(DB).join(", ")} } `:"";return`${n.value}${e}`}function gk(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bl(e.params,t.params)||n.paramsSubject.next(t.params),function Mz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Bl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mk(n,e){const t=Bl(n.params,e.params)&&function Nz(n,e){return I_(n,e)&&n.every((t,r)=>Bl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mk(n.parent,e.parent))}let _k=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(jE),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(qA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=r;const o=this.location,h=r.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,y=new g5(r,_,o.injector);this.activated=o.createComponent(h,{index:o.length,injector:y,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),e})();class g5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===x0?this.route:e===jE?this.childContexts:this.parent.get(e,t)}}const qA=new f.OlP("");let SB=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=ek([i.queryParams,i.params,i.data]).pipe((0,On.w)(([c,h,_],y)=>(_={...c,...h,..._},0===y?(0,ft.of)(_):Promise.resolve(_)))).subscribe(c=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const h=(0,f.qFp)(i.component);if(h)for(const{templateName:_}of h.inputs)r.activatedComponentRef.setInput(_,c[_]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function HE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return HE(n,r,i);return HE(n,r)})}(n,e,t);return new yh(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>HE(n,h)),c}}const r=function y5(n){return new x0(new yc.X(n.url),new yc.X(n.params),new yc.X(n.queryParams),new yc.X(n.fragment),new yc.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>HE(n,o));return new yh(r,i)}}const yk="ngNavigationCancelingError";function AB(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=C_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PB(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function PB(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[yk]=!0,r.cancellationCode=e,t&&(r.url=t),r}function MB(n){return n&&n[yk]}let OB=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(r,i){1&r&&f._UZ(0,"router-outlet")},dependencies:[_k],encapsulation:2}),e})();function vk(n){const e=n.children&&n.children.map(vk),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=OB),t}function vc(n){return n.outlet||Xt}function $E(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class D5{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),gk(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=O0(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=O0(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=O0(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=O0(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new d5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new c5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(gk(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),gk(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=$E(i.snapshot);c.attachRef=null,c.route=i,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class xB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class WA{constructor(e,t){this.component=e,this.route=t}}function S5(n,e,t){const r=n._root;return GE(r,e?e._root:null,t,[r.value])}function R0(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function GE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=O0(e);return n.children.forEach(c=>{(function P5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const _=function M5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!I_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!I_(n.url,e.url)||!Bl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mk(n,e)||!Bl(n.queryParams,e.queryParams);default:return!mk(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new xB(r)):(o.data=c.data,o._resolvedData=c._resolvedData),GE(n,e,o.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new WA(h.outlet.component,c))}else c&&zE(e,h,i),i.canActivateChecks.push(new xB(r)),GE(n,null,o.component?h?h.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,h])=>zE(h,t.getContext(c),i)),i}function zE(n,e,t){const r=O0(n),i=n.value;Object.entries(r).forEach(([o,c])=>{zE(c,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new WA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qE(n){return"function"==typeof n}function RB(n){return n instanceof rm||"EmptyError"===n?.name}const ZA=Symbol("INITIAL_VALUE");function N0(){return(0,On.w)(n=>ek(n.map(e=>e.pipe(zd(1),Em(ZA)))).pipe((0,Et.U)(e=>{for(const t of e)if(!0!==t){if(t===ZA)return ZA;if(!1===t||t instanceof P0)return t}return!0}),va(e=>e!==ZA),zd(1)))}function NB(n){return(0,bz.z)((0,Us.b)(e=>{if(C_(e))throw AB(0,e)}),(0,Et.U)(e=>!0===e))}class KA{constructor(e){this.segmentGroup=e||null}}class kB{constructor(e){this.urlTree=e}}function k0(n){return OE(new KA(n))}function LB(n){return OE(new kB(n))}class Y5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ft.of)(r);if(i.numberOfChildren>1||!i.children[Xt])return OE(new f.vHH(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new P0(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([h,_])=>{c[h]=this.createSegmentGroup(e,_,r,i)}),new Un(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const wk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Q5(n,e,t,r,i){const o=Ik(n,e,t);return o.matched?(r=function w5(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function W5(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ft.of)(!0);const o=i.map(c=>{const h=R0(c,n);return kp(function L5(n){return n&&qE(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,ft.of)(o).pipe(N0(),NB())}(r,e,t).pipe((0,Et.U)(c=>!0===c?o:{...wk}))):(0,ft.of)(o)}function Ik(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...wk}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Pz)(t,n,e);if(!i)return{...wk};const o={};Object.entries(i.posParams??{}).forEach(([h,_])=>{o[h]=_.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function FB(n,e,t,r){return t.length>0&&function e9(n,e,t){return t.some(r=>YA(n,e,r)&&vc(r)!==Xt)}(n,t,r)?{segmentGroup:new Un(e,J5(r,new Un(t,n.children))),slicedSegments:[]}:0===t.length&&function t9(n,e,t){return t.some(r=>YA(n,e,r))}(n,t,r)?{segmentGroup:new Un(n.segments,X5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Un(n.segments,n.children),slicedSegments:t}}function X5(n,e,t,r,i){const o={};for(const c of r)if(YA(n,t,c)&&!i[vc(c)]){const h=new Un([],{});o[vc(c)]=h}return{...i,...o}}function J5(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&vc(r)!==Xt){const i=new Un([],{});t[vc(r)]=i}return t}function YA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class s9{constructor(e,t,r,i,o,c,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new Y5(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=FB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe(w_(t=>{if(t instanceof kB)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof KA?this.noMatchError(t):t}),(0,Et.U)(t=>{const r=new zA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),i=new yh(r,t),o=new TB("",i),c=function Kz(n,e,t=null,r=null){return fB(hB(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(o._root),{state:o,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Xt).pipe(w_(r=>{throw r instanceof KA?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=bB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,$n.D)(i).pipe(xE(o=>{const c=r.children[o],h=function b5(n,e){const t=n.filter(r=>vc(r)===e);return t.push(...n.filter(r=>vc(r)!==e)),t}(t,o);return this.processSegmentGroup(e,h,c,o)}),kr((o,c)=>(o.push(...c),o)),im(null),function Tz(n,e){const t=arguments.length>=2;return r=>r.pipe(n?va((i,o)=>n(i,o,r)):Ou.y,rk(1),t?im(e):HM(()=>new rm))}(),(0,lo.z)(o=>{if(null===o)return k0(r);const c=UB(o);return function o9(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,ft.of)(c)}))}processSegment(e,t,r,i,o,c){return(0,$n.D)(t).pipe(xE(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,o,c).pipe(w_(_=>{if(_ instanceof KA)return(0,ft.of)(null);throw _}))),ml(h=>!!h),w_(h=>{if(RB(h))return function r9(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,ft.of)([]):k0(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,o,c,h){return function n9(n,e,t,r){return!!(vc(n)===r||r!==Xt&&YA(e,t,n))&&("**"===n.path||Ik(e,n,t).matched)}(r,i,o,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,c):k0(i):k0(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?LB(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,lo.z)(c=>{const h=new Un(c,{});return this.processSegment(e,t,h,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:h,consumedSegments:_,remainingSegments:y,positionalParamSegments:b}=Ik(t,i,o);if(!h)return k0(t);const S=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?LB(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,lo.z)(R=>this.processSegment(e,r,t,R.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,c){let h;if("**"===r.path){const _=i.length>0?tB(i).parameters:{},y=new zA(i,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VB(r),vc(r),r.component??r._loadedComponent??null,r,BB(r));h=(0,ft.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=Q5(t,r,i,e).pipe((0,Et.U)(({matched:_,consumedSegments:y,remainingSegments:b,parameters:S})=>_?{snapshot:new zA(y,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VB(r),vc(r),r.component??r._loadedComponent??null,r,BB(r)),consumedSegments:y,remainingSegments:b}:null));return h.pipe((0,On.w)(_=>null===_?k0(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,On.w)(({routes:y})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:R,remainingSegments:F}=_,{segmentGroup:q,slicedSegments:he}=FB(t,R,F,y);if(0===he.length&&q.hasChildren())return this.processChildren(b,y,q).pipe((0,Et.U)(ze=>null===ze?null:[new yh(S,ze)]));if(0===y.length&&0===he.length)return(0,ft.of)([new yh(S,[])]);const ve=vc(r)===o;return this.processSegment(b,y,q,he,ve?Xt:o,!0).pipe((0,Et.U)(ze=>[new yh(S,ze)]))}))))}getChildConfig(e,t,r){return t.children?(0,ft.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ft.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function q5(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ft.of)(!0);const o=i.map(c=>{const h=R0(c,n);return kp(function x5(n){return n&&qE(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,ft.of)(o).pipe(N0(),NB())}(e,t,r).pipe((0,lo.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Us.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function K5(n){return OE(PB(!1,3))}())):(0,ft.of)({routes:[],injector:e})}}function a9(n){const e=n.value.routeConfig;return e&&""===e.path}function UB(n){const e=[],t=new Set;for(const r of n){if(!a9(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=UB(r.children);e.push(new yh(r.value,i))}return e.filter(r=>!t.has(r))}function VB(n){return n.data||{}}function BB(n){return n.resolve||{}}function jB(n){return"string"==typeof n.title||null===n.title}function Ck(n){return(0,On.w)(e=>{const t=n(e);return t?(0,$n.D)(t).pipe((0,Et.U)(()=>e)):(0,ft.of)(e)})}const L0=new f.OlP("ROUTES");let Ek=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,ft.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=kp(r.loadComponent()).pipe((0,Et.U)(HB),(0,Us.b)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=c}),ik(()=>{this.componentLoaders.delete(r)})),o=new JV(i,()=>new Ju.x).pipe(nk());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,ft.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const c=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Et.U)(_=>{this.onLoadEndListener&&this.onLoadEndListener(i);let y,b;return Array.isArray(_)?b=_:(y=_.create(r).injector,b=y.get(L0,[],f.XFs.Self|f.XFs.Optional).flat()),{routes:b.map(vk),injector:y}}),ik(()=>{this.childrenLoaders.delete(i)})),h=new JV(c,()=>new Ju.x).pipe(nk());return this.childrenLoaders.set(i,h),h}loadModuleFactoryOrRoutes(r){return kp(r()).pipe((0,Et.U)(HB),(0,lo.z)(i=>i instanceof f.YKP||Array.isArray(i)?(0,ft.of)(i):(0,$n.D)(this.compiler.compileModuleAsync(i))))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function HB(n){return function p9(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let QA=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ju.x,this.transitionAbortSubject=new Ju.x,this.configLoader=(0,f.f3M)(Ek),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(kE),this.rootContexts=(0,f.f3M)(jE),this.inputBindingEnabled=null!==(0,f.f3M)(qA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ft.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new a5(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new o5(o))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r,i,o){return this.transitions=new yc.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:r.urlHandlingStrategy.extract(i),urlAfterRedirects:r.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:VE,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(va(c=>0!==c.id),(0,Et.U)(c=>({...c,extractedUrl:r.urlHandlingStrategy.extract(c.rawUrl)})),(0,On.w)(c=>{this.currentTransition=c;let h=!1,_=!1;return(0,ft.of)(c).pipe((0,Us.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.rawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,On.w)(y=>{const b=y.currentBrowserUrl.toString(),S=!r.navigated||y.extractedUrl.toString()!==b||b!==y.currentUrlTree.toString();if(!S&&"reload"!==(y.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const F="";return this.events.next(new M0(y.id,this.urlSerializer.serialize(y.rawUrl),F,0)),y.resolve(null),Gd.E}if(r.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return(0,ft.of)(y).pipe((0,On.w)(F=>{const q=this.transitions?.getValue();return this.events.next(new $A(F.id,this.urlSerializer.serialize(F.extractedUrl),F.source,F.restoredState)),q!==this.transitions?.getValue()?Gd.E:Promise.resolve(F)}),function u9(n,e,t,r,i,o){return(0,lo.z)(c=>function i9(n,e,t,r,i,o,c="emptyOnly"){return new s9(n,e,t,r,i,c,o).recognize()}(n,e,t,r,c.extractedUrl,i,o).pipe((0,Et.U)(({state:h,tree:_})=>({...c,targetSnapshot:h,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,Us.b)(F=>{c.targetSnapshot=F.targetSnapshot,c.urlAfterRedirects=F.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:F.urlAfterRedirects};const q=new vB(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(q)}));if(S&&r.urlHandlingStrategy.shouldProcessUrl(y.currentRawUrl)){const{id:F,extractedUrl:q,source:he,restoredState:ve,extras:ze}=y,ot=new $A(F,this.urlSerializer.serialize(q),he,ve);this.events.next(ot);const We=EB(0,this.rootComponentType).snapshot;return this.currentTransition=c={...y,targetSnapshot:We,urlAfterRedirects:q,extras:{...ze,skipLocationChange:!1,replaceUrl:!1}},(0,ft.of)(c)}{const F="";return this.events.next(new M0(y.id,this.urlSerializer.serialize(y.extractedUrl),F,1)),y.resolve(null),Gd.E}}),(0,Us.b)(y=>{const b=new n5(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(b)}),(0,Et.U)(y=>(this.currentTransition=c={...y,guards:S5(y.targetSnapshot,y.currentSnapshot,this.rootContexts)},c)),function U5(n,e){return(0,lo.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?(0,ft.of)({...t,guardsResult:!0}):function V5(n,e,t,r){return(0,$n.D)(n).pipe((0,lo.z)(i=>function z5(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,ft.of)(!0);const c=o.map(h=>{const _=$E(e)??i,y=R0(h,_);return kp(function k5(n){return n&&qE(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):_.runInContext(()=>y(n,e,t,r))).pipe(ml())});return(0,ft.of)(c).pipe(N0())}(i.component,i.route,t,e,r)),ml(i=>!0!==i,!0))}(c,r,i,n).pipe((0,lo.z)(h=>h&&function O5(n){return"boolean"==typeof n}(h)?function B5(n,e,t,r){return(0,$n.D)(e).pipe(xE(i=>cv(function H5(n,e){return null!==n&&e&&e(new u5(n)),(0,ft.of)(!0)}(i.route.parent,r),function j5(n,e){return null!==n&&e&&e(new l5(n)),(0,ft.of)(!0)}(i.route,r),function G5(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function A5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>XV(()=>{const h=c.guards.map(_=>{const y=$E(c.node)??t,b=R0(_,y);return kp(function N5(n){return n&&qE(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(ml())});return(0,ft.of)(h).pipe(N0())}));return(0,ft.of)(o).pipe(N0())}(n,i.path,t),function $5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ft.of)(!0);const i=r.map(o=>XV(()=>{const c=$E(e)??t,h=R0(o,c);return kp(function R5(n){return n&&qE(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(ml())}));return(0,ft.of)(i).pipe(N0())}(n,i.route,t))),ml(i=>!0!==i,!0))}(r,o,n,e):(0,ft.of)(h)),(0,Et.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,y=>this.events.next(y)),(0,Us.b)(y=>{if(c.guardsResult=y.guardsResult,C_(y.guardsResult))throw AB(0,y.guardsResult);const b=new r5(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.events.next(b)}),va(y=>!!y.guardsResult||(this.cancelNavigationTransition(y,"",3),!1)),Ck(y=>{if(y.guards.canActivateChecks.length)return(0,ft.of)(y).pipe((0,Us.b)(b=>{const S=new i5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}),(0,On.w)(b=>{let S=!1;return(0,ft.of)(b).pipe(function c9(n,e){return(0,lo.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ft.of)(t);let o=0;return(0,$n.D)(i).pipe(xE(c=>function l9(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!jB(i)&&(o[RE]=i.title),function d9(n,e,t,r){const i=function h9(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ft.of)({});const o={};return(0,$n.D)(i).pipe((0,lo.z)(c=>function f9(n,e,t,r){const i=$E(e)??r,o=R0(n,i);return kp(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[c],e,t,r).pipe(ml(),(0,Us.b)(h=>{o[c]=h}))),rk(1),function Dz(n){return(0,Et.U)(()=>n)}(o),w_(c=>RB(c)?Gd.E:OE(c)))}(o,n,e,r).pipe((0,Et.U)(c=>(n._resolvedData=c,n.data=bB(n,t).resolve,i&&jB(i)&&(n.data[RE]=i.title),null)))}(c.route,r,n,e)),(0,Us.b)(()=>o++),rk(1),(0,lo.z)(c=>o===i.length?(0,ft.of)(t):Gd.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,Us.b)({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(b,"",2)}}))}),(0,Us.b)(b=>{const S=new s5(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}))}),Ck(y=>{const b=S=>{const R=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&R.push(this.configLoader.loadComponent(S.routeConfig).pipe((0,Us.b)(F=>{S.component=F}),(0,Et.U)(()=>{})));for(const F of S.children)R.push(...b(F));return R};return ek(b(y.targetSnapshot.root)).pipe(im(),zd(1))}),Ck(()=>this.afterPreactivation()),(0,Et.U)(y=>{const b=function m5(n,e,t){const r=HE(n,e._root,t?t._root:void 0);return new CB(r,e)}(r.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return this.currentTransition=c={...y,targetRouterState:b},c}),(0,Us.b)(()=>{this.events.next(new lk)}),((n,e,t,r)=>(0,Et.U)(i=>(new D5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,r.routeReuseStrategy,y=>this.events.next(y),this.inputBindingEnabled),zd(1),(0,Us.b)({next:y=>{h=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lp(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects))),r.titleStrategy?.updateTitle(y.targetRouterState.snapshot),y.resolve(!0)},complete:()=>{h=!0}}),function Sz(n){return(0,ar.e)((e,t)=>{(0,$a.Xf)(n).subscribe((0,tr.x)(t,()=>t.complete(),aa.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Us.b)(y=>{throw y}))),ik(()=>{h||_||this.cancelNavigationTransition(c,"",1),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),w_(y=>{if(_=!0,MB(y))this.events.next(new BE(c.id,this.urlSerializer.serialize(c.extractedUrl),y.message,y.cancellationCode)),function v5(n){return MB(n)&&C_(n.url)}(y)?this.events.next(new dk(y.url)):c.resolve(!1);else{this.events.next(new GA(c.id,this.urlSerializer.serialize(c.extractedUrl),y,c.targetSnapshot??void 0));try{c.resolve(r.errorHandler(y))}catch(b){c.reject(b)}}return Gd.E}))}))}cancelNavigationTransition(r,i,o){const c=new BE(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(c),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function $B(n){return n!==VE}let GB=(()=>{var n;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(c=>c.outlet===Xt);return i}getResolvedTitleForRoute(r){return r.data[RE]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(g9)},providedIn:"root"}),e})(),g9=(()=>{var n;class e extends GB{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(Ba))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),m9=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(y9)},providedIn:"root"}),e})();class _9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let y9=(()=>{var n;class e extends _9{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=f.n5z(n)))(i||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const XA=new f.OlP("",{providedIn:"root",factory:()=>({})});let v9=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(w9)},providedIn:"root"}),e})(),w9=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var WE=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(WE||{});function zB(n,e){n.events.pipe(va(t=>t instanceof Lp||t instanceof BE||t instanceof GA||t instanceof M0),(0,Et.U)(t=>t instanceof Lp||t instanceof M0?WE.COMPLETE:t instanceof BE&&(0===t.code||1===t.code)?WE.REDIRECTING:WE.FAILED),va(t=>t!==WE.REDIRECTING),zd(1)).subscribe(()=>{e()})}function I9(n){throw n}function C9(n,e,t){return e.parse("/")}const E9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jo=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this._events=new Ju.x,this.options=(0,f.f3M)(XA,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||I9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||C9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(v9),this.routeReuseStrategy=(0,f.f3M)(m9),this.titleStrategy=(0,f.f3M)(GB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(L0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(QA),this.urlSerializer=(0,f.f3M)(kE),this.location=(0,f.f3M)(qe),this.componentInputBindingEnabled=!!(0,f.f3M)(qA,{optional:!0}),this.eventsSubscription=new tk.w0,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new P0,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=EB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(qB(i)&&this._events.next(i));if(i instanceof $A)$B(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(i instanceof M0)this.rawUrlTree=o.rawUrl;else if(i instanceof vB){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const c=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(c,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(i instanceof lk)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(i instanceof BE)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(o);else if(i instanceof dk){const c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),h={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$B(o.source)};this.scheduleNavigation(c,VE,null,h,{resolve:o.resolve,reject:o.reject,promise:o.promise})}i instanceof GA&&this.restoreHistory(o,!0),i instanceof Lp&&(this.navigated=!0),qB(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),VE,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,o){const c={replaceUrl:!0},h=o?.navigationId?o:null;if(o){const y={...o};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(c.state=y)}const _=this.parseUrl(r);this.scheduleNavigation(_,i,h,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(vk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:_,preserveFragment:y}=i,b=y?this.currentUrlTree.fragment:h;let R,S=null;switch(_){case"merge":S={...this.currentUrlTree.queryParams,...c};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=c||null}null!==S&&(S=this.removeEmptyProps(S));try{R=hB(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),R=this.currentUrlTree.root}return fB(R,r,S,b??null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=C_(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,VE,null,i)}navigate(r,i={skipLocationChange:!1}){return function T9(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new f.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return i}isActive(r,i){let o;if(o=!0===i?{...E9}:!1===i?{...b9}:i,C_(r))return rB(this.currentUrlTree,r,o);const c=this.parseUrl(r);return rB(this.currentUrlTree,c,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{const c=r[o];return null!=c&&(i[o]=c),i},{})}scheduleNavigation(r,i,o,c,h){if(this.disposed)return Promise.resolve(!1);let _,y,b;h?(_=h.resolve,y=h.reject,b=h.promise):b=new Promise((R,F)=>{_=R,y=F});const S=this.pendingTasks.add();return zB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:r,extras:c,resolve:_,reject:y,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const h={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",h)}else{const c={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",c)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-this.browserPageId;0!==c?this.location.historyGo(c):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===c&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function qB(n){return!(n instanceof lk||n instanceof dk)}class WB{}let A9=(()=>{var n;class e{constructor(r,i,o,c,h){this.router=r,this.injector=o,this.preloadingStrategy=c,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(va(r=>r instanceof Lp),xE(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const c of i){c.providers&&!c._injector&&(c._injector=(0,f.MMx)(c.providers,r,`Route: ${c.path}`));const h=c._injector??r,_=c._loadedInjector??h;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&o.push(this.preloadConfig(h,c)),(c.children||c._loadedRoutes)&&o.push(this.processRoutes(_,c.children??c._loadedRoutes))}return(0,$n.D)(o).pipe((0,Wd.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,ft.of)(null);const c=o.pipe((0,lo.z)(h=>null===h?(0,ft.of)(void 0):(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,this.processRoutes(h.injector??r,h.routes))));if(i.loadComponent&&!i._loadedComponent){const h=this.loader.loadComponent(i);return(0,$n.D)([c,h]).pipe((0,Wd.J)())}return c})}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(jo),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(WB),f.LFG(Ek))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const Tk=new f.OlP("");let ZB=(()=>{var n;class e{constructor(r,i,o,c,h={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=c,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof $A?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Lp?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof M0&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof wB&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wB(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(r){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),e})();function vh(n,e){return{\u0275kind:n,\u0275providers:e}}function YB(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(jo),i=n.get(QB);1===n.get(Dk)&&r.initialNavigation(),n.get(XB,null,f.XFs.Optional)?.setUpPreloading(),n.get(Tk,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const QB=new f.OlP("",{factory:()=>new Ju.x}),Dk=new f.OlP("",{providedIn:"root",factory:()=>1}),XB=new f.OlP("");function x9(n){return vh(0,[{provide:XB,useExisting:A9},{provide:WB,useExisting:n}])}const JB=new f.OlP("ROUTER_FORROOT_GUARD"),N9=[qe,{provide:kE,useClass:sk},jo,jE,{provide:x0,useFactory:function KB(n){return n.routerState.root},deps:[jo]},Ek,[]];function k9(){return new f.PXZ("Router",jo)}let ej=(()=>{var n;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[N9,[],{provide:L0,multi:!0,useValue:r},{provide:JB,useFactory:V9,deps:[[jo,new f.FiY,new f.tp0]]},{provide:XA,useValue:i||{}},i?.useHash?{provide:Ve,useClass:Ne}:{provide:Ve,useClass:Ye},{provide:Tk,useFactory:()=>{const n=(0,f.f3M)(_r),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(XA),r=(0,f.f3M)(QA),i=(0,f.f3M)(kE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZB(i,r,n,e,t)}},i?.preloadingStrategy?x9(i.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:k9},i?.initialNavigation?B9(i):[],i?.bindToComponentInputs?vh(8,[SB,{provide:qA,useExisting:SB}]).\u0275providers:[],[{provide:tj,useFactory:YB},{provide:f.tb,multi:!0,useExisting:tj}]]}}static forChild(r){return{ngModule:e,providers:[{provide:L0,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(JB,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();function V9(n){return"guarded"}function B9(n){return["disabled"===n.initialNavigation?vh(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(jo);return()=>{e.setUpLocationChangeListener()}}},{provide:Dk,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vh(2,[{provide:Dk,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(ke,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(jo),o=e.get(QB);zB(i,()=>{r(!0)}),e.get(QA).afterPreactivation=()=>(r(!0),o.closed?(0,ft.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const tj=new f.OlP("");let nj=(()=>{var n;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),e})(),E_=(()=>{var n;class e extends nj{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=f.n5z(n)))(i||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),e})();const Hl=new f.OlP("NgValueAccessor"),G9={provide:Hl,useExisting:(0,f.Gpc)(()=>JA),multi:!0},q9=new f.OlP("CompositionEventMode");let JA=(()=>{var n;class e extends nj{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function z9(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(q9,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&f.NdJ("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[f._Bn([G9]),f.qOj]}),e})();function Fp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ij(n){return null!=n&&"number"==typeof n.length}const Vs=new f.OlP("NgValidators"),Up=new f.OlP("NgAsyncValidators"),W9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class sj{static min(e){return function oj(n){return e=>{if(Fp(e.value)||Fp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function aj(n){return e=>{if(Fp(e.value)||Fp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function uj(n){return Fp(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function cj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lj(n){return Fp(n.value)||W9.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dj(n){return e=>Fp(e.value)||!ij(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hj(n){return e=>ij(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fj(n){if(!n)return eP;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vj(e)}static composeAsync(e){return wj(e)}}function eP(n){return null}function pj(n){return null!=n}function gj(n){return(0,f.QGY)(n)?(0,$n.D)(n):n}function mj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _j(n,e){return e.map(t=>t(n))}function yj(n){return n.map(e=>function Z9(n){return!n.validate}(e)?e:t=>e.validate(t))}function vj(n){if(!n)return null;const e=n.filter(pj);return 0==e.length?null:function(t){return mj(_j(t,e))}}function Sk(n){return null!=n?vj(yj(n)):null}function wj(n){if(!n)return null;const e=n.filter(pj);return 0==e.length?null:function(t){return function H9(...n){const e=(0,Do.jO)(n),{args:t,keys:r}=ZV(n),i=new Er.y(o=>{const{length:c}=t;if(!c)return void o.complete();const h=new Array(c);let _=c,y=c;for(let b=0;b<c;b++){let S=!1;(0,$a.Xf)(t[b]).subscribe((0,tr.x)(o,R=>{S||(S=!0,y--),h[b]=R},()=>_--,void 0,()=>{(!_||!S)&&(y||o.next(r?YV(r,h):h),o.complete())}))}});return e?i.pipe(KV(e)):i}(_j(t,e).map(gj)).pipe((0,Et.U)(mj))}}function Ak(n){return null!=n?wj(yj(n)):null}function Ij(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Cj(n){return n._rawValidators}function Ej(n){return n._rawAsyncValidators}function Pk(n){return n?Array.isArray(n)?n:[n]:[]}function tP(n,e){return Array.isArray(n)?n.includes(e):n===e}function bj(n,e){const t=Pk(e);return Pk(n).forEach(i=>{tP(t,i)||t.push(i)}),t}function Tj(n,e){return Pk(e).filter(t=>!tP(n,t))}class Dj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ak(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ho extends Dj{get formDirective(){return null}get path(){return null}}class Vp extends Dj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Sj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Aj=(()=>{var n;class e extends Sj{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(Vp,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[f.qOj]}),e})(),Mk=(()=>{var n;class e extends Sj{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(ho,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&f.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[f.qOj]}),e})();const ZE="VALID",rP="INVALID",F0="PENDING",KE="DISABLED";function Rk(n){return(iP(n)?n.validators:n)||null}function Nk(n,e){return(iP(e)?e.asyncValidators:n)||null}function iP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class xj{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ZE}get invalid(){return this.status===rP}get pending(){return this.status==F0}get disabled(){return this.status===KE}get enabled(){return this.status!==KE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tj(e,this._rawAsyncValidators))}hasValidator(e){return tP(this._rawValidators,e)}hasAsyncValidator(e){return tP(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=F0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=KE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ZE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ZE||this.status===F0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?KE:ZE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=F0,this._hasOwnPendingAsyncValidator=!0;const t=gj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?KE:this.errors?rP:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(F0)?F0:this._anyControlsHaveStatus(rP)?rP:ZE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iP(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function X9(n){return Array.isArray(n)?Sk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function J9(n){return Array.isArray(n)?Ak(n):n||null}(this._rawAsyncValidators)}}class sP extends xj{constructor(e,t,r){super(Rk(t),Nk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Oj(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Mj(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const b_=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>YE}),YE="always";function QE(n,e,t=YE){kk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function nq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Rj(n,e)})}(n,e),function iq(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Rj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tq(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function aP(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cP(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function uP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kk(n,e){const t=Cj(n);null!==e.validator?n.setValidators(Ij(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ej(n);null!==e.asyncValidator?n.setAsyncValidators(Ij(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();uP(e._rawValidators,i),uP(e._rawAsyncValidators,i)}function cP(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Cj(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=Ej(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return uP(e._rawValidators,r),uP(e._rawAsyncValidators,r),t}function Rj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Nj(n,e){kk(n,e)}function kj(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const cq={provide:ho,useExisting:(0,f.Gpc)(()=>lP)},XE=(()=>Promise.resolve())();let lP=(()=>{var n;class e extends ho{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new sP({},Sk(r),Ak(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){XE.then(()=>{const i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),QE(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){XE.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){XE.then(()=>{const i=this._findContainer(r.path),o=new sP({});Nj(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){XE.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){XE.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,kj(this.form,this._directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(Vs,10),f.Y36(Up,10),f.Y36(b_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&f.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([cq]),f.qOj]}),e})();function Lj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Fj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const dP=class extends xj{constructor(e=null,t,r){super(Rk(t),Nk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iP(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Fj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Fj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Vk=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),$j=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),e})();const Bk=new f.OlP("NgModelWithFormControlWarning"),yq={provide:ho,useExisting:(0,f.Gpc)(()=>hP)};let hP=(()=>{var n;class e extends ho{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cP(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return QE(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){aP(r.control||null,r,!1),function uq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,kj(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,o=this.form.get(r.path);i!==o&&(aP(i||null,r),(n=>n instanceof dP)(o)&&(QE(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);Nj(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function sq(n,e){return cP(n,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kk(this.form,this),this._oldForm&&cP(this._oldForm,this)}_checkFormPresent(){}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(Vs,10),f.Y36(Up,10),f.Y36(b_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&f.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([yq]),f.qOj,f.TTD]}),e})();const Iq={provide:Vp,useExisting:(0,f.Gpc)(()=>$k)};let $k=(()=>{var n;class e extends Vp{set isDisabled(r){}constructor(r,i,o,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.name=null,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function Uk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===JA?t=o:function aq(n){return Object.getPrototypeOf(n.constructor)===E_}(o)?r=o:i=o}),i||r||t||null}(0,c)}ngOnChanges(r){this._added||this._setUpControl(),function Fk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return function oP(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(n=e)._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(f.Y36(ho,13),f.Y36(Vs,10),f.Y36(Up,10),f.Y36(Hl,10),f.Y36(Bk,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Iq]),f.qOj,f.TTD]}),e})(),sH=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[$j]}),e})(),Fq=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:b_,useValue:r.callSetDisabledState??YE}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[sH]}),e})(),Uq=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:Bk,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:b_,useValue:r.callSetDisabledState??YE}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[sH]}),e})();var Wk=k(7582);const Vq=function cH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lH=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fP=new cr.Yd("@firebase/auth");function pP(n,...e){fP.logLevel<=cr.in.ERROR&&fP.error(`Auth (${fn.SDK_VERSION}): ${n}`,...e)}function Ho(n,...e){throw Zk(n,...e)}function $l(n,...e){return Zk(n,...e)}function Zk(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lH.create(n,...e)}function Je(n,e,...t){if(!n)throw Zk(e,...t)}function Gl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pP(e),new Error(e)}function Bp(n,e){n||Gl(e)}function hH(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class eb{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bp(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function jq(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Kk(){return"http:"===hH()||"https:"===hH()}()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class fH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Gq=new eb(3e4,6e4);function Ar(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Br(n,e,t,r){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,K.Z)(function*(n,e,t,r,i={}){return pH(n,i,(0,K.Z)(function*(){let o={},c={};r&&("GET"===e?c=r:o={body:JSON.stringify(r)});const h=(0,N.xO)(Object.assign({key:n.config.apiKey},c)).slice(1),_=yield n._getAdditionalHeaders();return _["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode),fH.fetch()(gH(n,n.config.apiHost,t,h),Object.assign({method:e,headers:_,referrerPolicy:"no-referrer"},o))}))}),Qk.apply(this,arguments)}function pH(n,e,t){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,K.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},$q),e);try{const i=new zq(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield o.json();if("needConfirmation"in c)throw tb(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[_,y]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_)throw tb(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===_)throw tb(n,"email-already-in-use",c);if("USER_DISABLED"===_)throw tb(n,"user-disabled",c);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw function dH(n,e,t){const r=Object.assign(Object.assign({},Vq()),{[e]:t});return new N.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,b,y);Ho(n,b)}}catch(i){if(i instanceof N.ZR)throw i;Ho(n,"network-request-failed",{message:String(i)})}}),Xk.apply(this,arguments)}function Jk(){return Jk=(0,K.Z)(function*(n,e,t,r,i={}){const o=yield Br(n,e,t,r,i);return"mfaPendingCredential"in o&&Ho(n,"multi-factor-auth-required",{_serverResponse:o}),o}),Jk.apply(this,arguments)}function gH(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function Yk(n,e){Bp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class zq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($l(this.auth,"network-request-failed")),Gq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tb(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=$l(n,e,r);return i.customData._tokenResponse=t,i}function n1(){return n1=(0,K.Z)(function*(n,e){return Br(n,"POST","/v1/accounts:delete",e)}),n1.apply(this,arguments)}function i1(){return i1=(0,K.Z)(function*(n,e){return Br(n,"POST","/v1/accounts:lookup",e)}),i1.apply(this,arguments)}function nb(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function s1(){return s1=(0,K.Z)(function*(n,e=!1){const t=(0,N.m9)(n),r=yield t.getIdToken(e),i=gP(r);Je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:nb(o1(i.auth_time)),issuedAtTime:nb(o1(i.iat)),expirationTime:nb(o1(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}),s1.apply(this,arguments)}function o1(n){return 1e3*Number(n)}function gP(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return pP("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,N.tV)(t);return i?JSON.parse(i):(pP("Failed to decode base64 JWT payload"),null)}catch(i){return pP("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ih(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,K.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof N.ZR&&function Xq({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),a1.apply(this,arguments)}class Jq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,K.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,K.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class _H{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nb(this.lastLoginAt),this.creationTime=nb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rb(n){return u1.apply(this,arguments)}function u1(){return u1=(0,K.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Ih(n,function Kq(n,e){return i1.apply(this,arguments)}(t,{idToken:r}));Je(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const c=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function nW(n){return n.map(e=>{var{providerId:t}=e,r=(0,Wk._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],h=function tW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,c),b=!!n.isAnonymous&&!(n.email&&o.passwordHash||h?.length),S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new _H(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(n,S)}),u1.apply(this,arguments)}function c1(){return c1=(0,K.Z)(function*(n){const e=(0,N.m9)(n);yield rb(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),c1.apply(this,arguments)}function l1(){return l1=(0,K.Z)(function*(n,e){const t=yield pH(n,{},(0,K.Z)(function*(){const r=(0,N.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=gH(n,i,"/v1/token",`key=${o}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",fH.fetch()(c,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),l1.apply(this,arguments)}class ib{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Qq(n){const e=gP(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,K.Z)(function*(){return Je(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,K.Z)(function*(){const{accessToken:i,refreshToken:o,expiresIn:c}=yield function rW(n,e){return l1.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new ib;return r&&(Je("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(Je("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),o&&(Je("number"==typeof o,"internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ib,this.toJSON())}_performRefresh(){return Gl("not implemented")}}function jp(n,e){Je("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class D_{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,Wk._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _H(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,K.Z)(function*(){const r=yield Ih(t,t.stsTokenManager.getToken(t.auth,e));return Je(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Yq(n){return s1.apply(this,arguments)}(this,e)}reload(){return function eW(n){return c1.apply(this,arguments)}(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new D_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,K.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield rb(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,K.Z)(function*(){const t=yield e.getIdToken();return yield Ih(e,function Wq(n,e){return n1.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,h,_,y,b;const S=null!==(r=t.displayName)&&void 0!==r?r:void 0,R=null!==(i=t.email)&&void 0!==i?i:void 0,F=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,q=null!==(c=t.photoURL)&&void 0!==c?c:void 0,he=null!==(h=t.tenantId)&&void 0!==h?h:void 0,ve=null!==(_=t._redirectEventId)&&void 0!==_?_:void 0,ze=null!==(y=t.createdAt)&&void 0!==y?y:void 0,ot=null!==(b=t.lastLoginAt)&&void 0!==b?b:void 0,{uid:We,emailVerified:ct,isAnonymous:At,providerData:Ht,stsTokenManager:jr}=t;Je(We&&jr,e,"internal-error");const fo=ib.fromJSON(this.name,jr);Je("string"==typeof We,e,"internal-error"),jp(S,e.name),jp(R,e.name),Je("boolean"==typeof ct,e,"internal-error"),Je("boolean"==typeof At,e,"internal-error"),jp(F,e.name),jp(q,e.name),jp(he,e.name),jp(ve,e.name),jp(ze,e.name),jp(ot,e.name);const zl=new D_({uid:We,auth:e,email:R,emailVerified:ct,displayName:S,isAnonymous:At,photoURL:q,phoneNumber:F,tenantId:he,stsTokenManager:fo,createdAt:ze,lastLoginAt:ot});return Ht&&Array.isArray(Ht)&&(zl.providerData=Ht.map(P7=>Object.assign({},P7))),ve&&(zl._redirectEventId=ve),zl}static _fromIdTokenResponse(e,t,r=!1){return(0,K.Z)(function*(){const i=new ib;i.updateFromServerResponse(t);const o=new D_({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rb(o),o})()}}const yH=new Map;function Ch(n){Bp(n instanceof Function,"Expected a class definition");let e=yH.get(n);return e?(Bp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yH.set(n,e),e)}const vH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,K.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,K.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,K.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,K.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function mP(n,e,t){return`firebase:${n}:${e}:${t}`}class V0{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=mP(this.userKey,i.apiKey,o),this.fullPersistenceKey=mP("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,K.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?D_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,K.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,K.Z)(function*(){if(!t.length)return new V0(Ch(vH),e,r);const i=(yield Promise.all(t.map(function(){var y=(0,K.Z)(function*(b){if(yield b._isAvailable())return b});return function(b){return y.apply(this,arguments)}}()))).filter(y=>y);let o=i[0]||Ch(vH);const c=mP(r,e.config.apiKey,e.name);let h=null;for(const y of t)try{const b=yield y._get(c);if(b){const S=D_._fromJSON(e,b);y!==o&&(h=S),o=y;break}}catch{}const _=i.filter(y=>y._shouldAllowMigration);return o._shouldAllowMigration&&_.length?(o=_[0],h&&(yield o._set(c,h.toJSON())),yield Promise.all(t.map(function(){var y=(0,K.Z)(function*(b){if(b!==o)try{yield b._remove(c)}catch{}});return function(b){return y.apply(this,arguments)}}())),new V0(o,e,r)):new V0(o,e,r)})()}}function wH(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function EH(n=(0,N.z$)()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function IH(n=(0,N.z$)()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function TH(n=(0,N.z$)()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function DH(n=(0,N.z$)()){return/webos/i.test(n)}(e))return"Webos";if(function d1(n=(0,N.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function CH(n=(0,N.z$)()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function bH(n=(0,N.z$)()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function SH(n,e=[]){let t;switch(n){case"Browser":t=wH((0,N.z$)());break;case"Worker":t=`${wH((0,N.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fn.SDK_VERSION}/${r}`}class oW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{c(e(o))}catch(_){h(_)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,K.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function h1(){return h1=(0,K.Z)(function*(n,e={}){return Br(n,"GET","/v2/passwordPolicy",Ar(n,e))}),h1.apply(this,arguments)}class cW{constructor(e){var t,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=c.minPasswordLength)&&void 0!==t?t:6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),void 0!==c.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),void 0!==c.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),void 0!==c.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),void 0!==c.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,h;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,_),this.validatePasswordCharacterOptions(e,_),_.isValid&&(_.isValid=null===(t=_.meetsMinPasswordLength)||void 0===t||t),_.isValid&&(_.isValid=null===(r=_.meetsMaxPasswordLength)||void 0===r||r),_.isValid&&(_.isValid=null===(i=_.containsLowercaseLetter)||void 0===i||i),_.isValid&&(_.isValid=null===(o=_.containsUppercaseLetter)||void 0===o||o),_.isValid&&(_.isValid=null===(c=_.containsNumericCharacter)||void 0===c||c),_.isValid&&(_.isValid=null===(h=_.containsNonAlphanumericCharacter)||void 0===h||h),_}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class lW{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AH(this),this.idTokenSubscription=new AH(this),this.beforeStateQueue=new oW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Ch(t)),this._initializationPromise=this.queue((0,K.Z)(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield V0.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,K.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,K.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,_=o?._redirectEventId,y=yield t.tryRedirectSignIn(e);(!h||h===_)&&y?.user&&(o=y.user,c=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(o)}catch(h){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return Je(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return(0,K.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,K.Z)(function*(){try{yield rb(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Hq(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,K.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,K.Z)(function*(){const r=e?(0,N.m9)(e):null;return r&&Je(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,K.Z)(function*(){if(!r._deleted)return e&&Je(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,K.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,K.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,K.Z)(function*(){yield t.assertedPersistence.setPersistence(Ch(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,K.Z)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,K.Z)(function*(){const t=yield function aW(n){return h1.apply(this,arguments)}(e),r=new cW(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new N.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,K.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,K.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Ch(e)||t._popupRedirectResolver;Je(r,t,"argument-error"),t.redirectPersistenceManager=yield V0.create(t,[Ch(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,K.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,K.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,K.Z)(function*(){if(e===t.currentUser)return t.queue((0,K.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),"function"==typeof t){const _=e.addObserver(t,r,i);return()=>{c=!0,_()}}{const _=e.addObserver(t);return()=>{c=!0,_()}}}directlySetCurrentUser(e){var t=this;return(0,K.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,K.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return(0,K.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Bq(n,...e){fP.logLevel<=cr.in.WARN&&fP.warn(`Auth (${fn.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class AH{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,N.ne)(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class IW{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gl("not implemented")}_getIdTokenResponse(e){return Gl("not implemented")}_linkToIdToken(e,t){return Gl("not implemented")}_getReauthenticationResolver(e){return Gl("not implemented")}}function Eh(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,K.Z)(function*(n,e){return function wh(n,e,t,r){return Jk.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Ar(n,e))}),O1.apply(this,arguments)}class B0 extends IW{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new B0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ho("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=(0,Wk._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new B0(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){return Eh(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Eh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,N.xO)(t)}return e}}class $p{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class LH extends $p{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let kW=(()=>{class n extends LH{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return B0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function PH(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new eb(3e4,6e4),new eb(2e3,1e4),new eb(3e4,6e4),new eb(5e3,15e3),encodeURIComponent("fac");var o3="@firebase/auth";class u7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,K.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,N.Pz)("authIdTokenMaxAge"),function l7(n){(0,fn._registerComponent)(new ur.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Je(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SH(n)},y=new lW(r,i,o,_);return function _W(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ch);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,fn._registerComponent)(new ur.wA("auth-internal",e=>{const t=function Ci(n){return(0,N.m9)(n)}(e.getProvider("auth").getImmediate());return new u7(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fn.registerVersion)(o3,"1.3.0",function c7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,fn.registerVersion)(o3,"1.3.0","esm2017")}("Browser");let c3=(()=>{var n;class e{constructor(r,i,o,c){this.afAuth=r,this.afs=i,this.ngZone=o,this.router=c,this.afAuth.authState.subscribe(h=>{h?(console.log("Here"),this.SetUserData(h),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(r,i){return this.afAuth.signInWithEmailAndPassword(r,i).then(o=>{this.SetUserData(o.user),this.afAuth.authState.subscribe(c=>{c&&this.router.navigate([""])})}).catch(o=>{window.alert(o.message)})}get isLoggedIn(){const i="undefined"!==localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null;return null!==i&&!1!==i.emailVerified}AuthLogin(r){return this.afAuth.signInWithPopup(r).then(i=>{this.router.navigate([""]),this.SetUserData(i.user)}).catch(i=>window.alert(i.message))}SetUserData(r){return this.afs.doc(`users/${r.uid}`).set({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},{merge:!0})}SignUp(r,i){return this.afAuth.createUserWithEmailAndPassword(r,i).then(o=>{this.SendEmailVerification(),this.SetUserData(o.user)}).catch(o=>window.alert(o.message))}SendEmailVerification(){return this.afAuth.currentUser.then(r=>r.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}GoogleAuth(){return this.AuthLogin(new kW).then(r=>{this.router.navigate([""])})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["signIn"])})}}return(n=e).\u0275fac=function(r){return new(r||n)(f.LFG(to),f.LFG(aV),f.LFG(f.R0b),f.LFG(jo))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),l3=(()=>{var n;class e{constructor(r,i){this.router=r,this.authService=i}ngOnInit(){this.authService.isLoggedIn?(console.log("User signed in"),this.router.navigate([""])):(console.log("User is not signed in"),this.createLoginForm())}createLoginForm(){this.loginForm=new sP({email:new dP("",sj.required),password:new dP("",sj.required)})}login(){this.loginForm.valid&&this.authService.SignIn(this.loginForm.value.email,this.loginForm.value.password)}}return(n=e).\u0275fac=function(r){return new(r||n)(f.Y36(jo),f.Y36(c3))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:22,vars:1,consts:[[1,"sidenav"],[1,"login-main-text"],[1,"main"],[1,"col-md-6","col-sm-12"],[1,"login-form"],[3,"formGroup","submit"],[1,"form-group"],["type","text","name","email","formControlName","email","placeholder","User Name",1,"form-control"],["type","password","name","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-black"]],template:function(r,i){1&r&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h2"),f._uU(3,"Application"),f._UZ(4,"br"),f._uU(5," Login Page"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Login or register from here to access."),f.qZA()()(),f.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"form",5),f.NdJ("submit",function(){return i.login()}),f.TgZ(12,"div",6)(13,"label"),f._uU(14,"User Name"),f.qZA(),f._UZ(15,"input",7),f.qZA(),f.TgZ(16,"div",6)(17,"label"),f._uU(18,"Password"),f.qZA(),f._UZ(19,"input",8),f.qZA(),f.TgZ(20,"button",9),f._uU(21,"Login"),f.qZA()()()()()),2&r&&(f.xp6(11),f.Q6J("formGroup",i.loginForm))},dependencies:[Vk,JA,Aj,Mk,hP,$k],styles:["body[_ngcontent-%COMP%]{font-family:Lato,sans-serif}.main-head[_ngcontent-%COMP%]{height:150px;background:#FFF}.sidenav[_ngcontent-%COMP%]{height:100%;background-color:#000;overflow-x:hidden;padding-top:20px}.main[_ngcontent-%COMP%]{padding:0 10px}@media screen and (max-height: 450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}}@media screen and (max-width: 450px){.login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]{margin-top:10%}}@media screen and (min-width: 768px){.main[_ngcontent-%COMP%]{margin-left:40%}.sidenav[_ngcontent-%COMP%]{width:40%;position:fixed;z-index:1;top:0;left:0}.login-form[_ngcontent-%COMP%]{margin-top:80%}.register-form[_ngcontent-%COMP%]{margin-top:20%}}.login-main-text[_ngcontent-%COMP%]{margin-top:20%;padding:60px;color:#fff}.login-main-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:300}.btn-black[_ngcontent-%COMP%]{background-color:#000!important;color:#fff}"]}),e})();const p7=[{path:"signIn",component:l3}];let g7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ej.forRoot(p7),ej]}),e})();function rF(){return rF=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rF.apply(this,arguments)}var m7={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,e){},onStringTyped:function(n,e){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,e){},onTypingResumed:function(n,e){},onReset:function(n){},onStop:function(n,e){},onStart:function(n,e){},onDestroy:function(n){}},_7=new(function(){function n(){}var e=n.prototype;return e.load=function(t,r,i){if(t.el="string"==typeof i?document.querySelector(i):i,t.options=rF({},m7,r),t.isInput="input"===t.el.tagName.toLowerCase(),t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(y){return y.trim()}),t.stringsElement="string"==typeof t.options.stringsElement?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var o=Array.prototype.slice.apply(t.stringsElement.children),c=o.length;if(c)for(var h=0;h<c;h+=1)t.strings.push(o[h].innerHTML.trim())}for(var _ in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[_]=_;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:"html"===t.contentType?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var r="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+r+"]")){var i=document.createElement("style");i.setAttribute(r,"true"),i.innerHTML="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ",document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var r="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+r+"]")){var i=document.createElement("style");i.setAttribute(r,"true"),i.innerHTML="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ",document.body.appendChild(i)}},n}()),d3=new(function(){function n(){}var e=n.prototype;return e.typeHtmlChars=function(t,r,i){if("html"!==i.contentType)return r;var o=t.substring(r).charAt(0);if("<"===o||"&"===o){var c;for(c="<"===o?">":";";t.substring(r+1).charAt(0)!==c&&!(1+ ++r>t.length););r++}return r},e.backSpaceHtmlChars=function(t,r,i){if("html"!==i.contentType)return r;var o=t.substring(r).charAt(0);if(">"===o||";"===o){var c;for(c=">"===o?"<":"&";t.substring(r-1).charAt(0)!==c&&!(--r<0););r--}return r},n}()),y7=function(){function n(t,r){_7.load(this,r,t),this.begin()}var e=n.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){void 0===t&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){0===t.strPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,r){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var o=this.humanizer(this.typeSpeed),c=1;!0!==this.pause.status?this.timeout=setTimeout(function(){r=d3.typeHtmlChars(t,r,i);var h=0,_=t.substring(r);if("^"===_.charAt(0)&&/^\^\d+/.test(_)){var y=1;y+=(_=/\d+/.exec(_)[0]).length,h=parseInt(_),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,r)+t.substring(r+y),i.toggleBlinking(!0)}if("`"===_.charAt(0)){for(;"`"!==t.substring(r+c).charAt(0)&&(c++,!(r+c>t.length)););var b=t.substring(0,r),S=t.substring(b.length+1,r+c),R=t.substring(r+c+1);t=b+S+R,c--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),r>=t.length?i.doneTyping(t,r):i.keepTyping(t,r,c),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},h)},o):this.setPauseStatus(t,r,!0)},e.keepTyping=function(t,r,i){0===r&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var o=t.substring(0,r+=i);this.replaceText(o),this.typewrite(t,r)},e.doneTyping=function(t,r){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,r)},this.backDelay))},e.backspace=function(t,r){var i=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var o=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=d3.backSpaceHtmlChars(t,r,i);var c=t.substring(0,r);if(i.replaceText(c),i.smartBackspace){var h=i.strings[i.arrayPos+1];i.stopNum=h&&c===h.substring(0,r)?r:0}r>i.stopNum?(r--,i.backspace(t,r)):r<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],r))},o)}else this.setPauseStatus(t,r,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,r,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=r},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:"html"===this.contentType?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(r){t.stop()}),this.el.addEventListener("blur",function(r){t.el.value&&0!==t.el.value.length||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();let v7=(()=>{var n;class e{constructor(){}ngOnInit(){const r=document.querySelector(".typed");if(r){let i=r.getAttribute("data-typed-items");if(i){const o=i.split(",");new y7(".typed",{strings:o,loop:!0,typeSpeed:100,backSpeed:50,backDelay:2e3})}}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-hero"]],decls:7,vars:0,consts:[["id","hero",1,"d-flex","flex-column","justify-content-center"],["data-aos","fade-in",1,"hero-container"],["data-typed-items","Ethical Hacker, Designer, web Developer, Editor, Photographer",1,"typed"]],template:function(r,i){1&r&&(f.TgZ(0,"section",0)(1,"div",1)(2,"h1"),f._uU(3,"Surya Prakash"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"I'm "),f._UZ(6,"span",2),f.qZA()()())},styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}#hero[_ngcontent-%COMP%]{width:80%;height:100vh;background:url(SP-Background.e88976b1bf52b843.jpg) top center;background-size:cover;translate:300px}#hero[_ngcontent-%COMP%]:before{content:"";background:rgba(5,13,24,.3);position:absolute;inset:0;z-index:1}#hero[_ngcontent-%COMP%]   .hero-container[_ngcontent-%COMP%]{position:relative;z-index:2;min-width:300px;margin-left:33px}#hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;font-size:64px;font-weight:700;line-height:56px;color:#fff}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin-bottom:50px;font-size:26px;font-family:Poppins,sans-serif}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding-bottom:4px;letter-spacing:1px;border-bottom:3px solid #149ddd}@media (min-width: 1024px){#hero[_ngcontent-%COMP%]{background-attachment:fixed}}@media (max-width: 768px){#hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;line-height:36px}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;line-height:24px;margin-bottom:30px}}']}),e})(),w7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about"]],decls:95,vars:0,consts:[["id","main"],["id","about",1,"about"],[1,"container"],[1,"section-title"],[1,"row"],["data-aos","fade-right",1,"col-lg-4"],["src","../../assets/img/SP-Library.jpg","alt","",1,"img-fluid"],["data-aos","fade-left",1,"col-lg-8","pt-4","pt-lg-0","content"],[1,"col-lg-6"],[1,"bi","bi-chevron-right"],[1,"skills-bar"],[1,"bar"],[1,"info"],[1,"progress-line","html"],[1,"progress-line","javascript"],[1,"progress-line","php"],[1,"progress-line","python"],[1,"progress-line","mysql"]],template:function(r,i){1&r&&(f.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2"),f._uU(5,"About"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"I'm a passionate software developer with expertise in Python, JavaScript, C, HTML, CSS and Java. I enjoy tackling complex challenges and building innovative solutions. My repositories showcase projects in web development, Cyber Security and machine learning. I believe in the power of collaboration and welcome contributions to my projects. Let's connect and make an impact in the world of software development. "),f.qZA()(),f.TgZ(8,"div",4)(9,"div",5),f._UZ(10,"img",6),f.qZA(),f.TgZ(11,"div",7)(12,"h3"),f._uU(13,"Software developer & Web Developer."),f.qZA(),f.TgZ(14,"div",4)(15,"div",8)(16,"ul")(17,"li"),f._UZ(18,"i",9),f.TgZ(19,"strong"),f._uU(20,"Birthday:"),f.qZA(),f.TgZ(21,"span"),f._uU(22,"11 Oct 2003"),f.qZA()(),f.TgZ(23,"li"),f._UZ(24,"i",9),f.TgZ(25,"strong"),f._uU(26,"Website:"),f.qZA(),f.TgZ(27,"span"),f._uU(28,"www.ariessurya.com"),f.qZA()(),f.TgZ(29,"li"),f._UZ(30,"i",9),f.TgZ(31,"strong"),f._uU(32,"Phone:"),f.qZA(),f.TgZ(33,"span"),f._uU(34,"8124509710"),f.qZA()(),f.TgZ(35,"li"),f._UZ(36,"i",9),f.TgZ(37,"strong"),f._uU(38,"City:"),f.qZA(),f.TgZ(39,"span"),f._uU(40,"Chennai, Tamil Nadu"),f.qZA()()()(),f.TgZ(41,"div",8)(42,"ul")(43,"li"),f._UZ(44,"i",9),f.TgZ(45,"strong"),f._uU(46,"Age:"),f.qZA(),f.TgZ(47,"span"),f._uU(48,"20"),f.qZA()(),f.TgZ(49,"li"),f._UZ(50,"i",9),f.TgZ(51,"strong"),f._uU(52,"Degree:"),f.qZA(),f.TgZ(53,"span"),f._uU(54,"BE-CSE"),f.qZA()(),f.TgZ(55,"li"),f._UZ(56,"i",9),f.TgZ(57,"strong"),f._uU(58,"Email:"),f.qZA(),f.TgZ(59,"span"),f._uU(60,"ariessurya8124@gmail.com"),f.qZA()()()()()()()()(),f.TgZ(61,"body")(62,"h2"),f._uU(63,"Skills"),f.qZA(),f.TgZ(64,"div",10)(65,"div",11)(66,"div",12)(67,"span"),f._uU(68,"HTML/CSS"),f.qZA()(),f.TgZ(69,"div",13),f._UZ(70,"span"),f.qZA()(),f.TgZ(71,"div",11)(72,"div",12)(73,"span"),f._uU(74,"JAVASCRIPT"),f.qZA()(),f.TgZ(75,"div",14),f._UZ(76,"span"),f.qZA()(),f.TgZ(77,"div",11)(78,"div",12)(79,"span"),f._uU(80,"PHP"),f.qZA()(),f.TgZ(81,"div",15),f._UZ(82,"span"),f.qZA()(),f.TgZ(83,"div",11)(84,"div",12)(85,"span"),f._uU(86,"PYTHON"),f.qZA()(),f.TgZ(87,"div",16),f._UZ(88,"span"),f.qZA()(),f.TgZ(89,"div",11)(90,"div",12)(91,"span"),f._uU(92,"MYSQL"),f.qZA()(),f.TgZ(93,"div",17),f._UZ(94,"span"),f.qZA()()()()())},styles:['@import"https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap";body[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fff;position:relative;display:grid;height:100%;place-items:center;justify-content:center}h2[_ngcontent-%COMP%]{font-family:Alex Brush;font-size:45px;font-weight:500;color:#173b6c;margin-bottom:1rem}.skills-bar[_ngcontent-%COMP%]{width:600px;background-color:#fff;border-radius:10px;padding:25px 30px;box-shadow:5px 5px 10px #0003}.skills-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{margin:20px 0}.skills-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:first-child{margin-top:0}.skills-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-bottom:5px}.skills-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:17px;font-weight:500;opacity:0;animation:_ngcontent-%COMP%_showText .5s 1.5s linear forwards}@keyframes _ngcontent-%COMP%_showText{to{opacity:1}}.skills-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]{position:relative;height:10px;width:100%;background-color:#f0f0f0;border-radius:10px;transform:scaleX(0);transform-origin:left;box-shadow:inset 0 1px 1px #0000000d,0 1px #fffc;animation:_ngcontent-%COMP%_animate 1s cubic-bezier(1,0,.5,1) forwards}.bar[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;width:80%;background:#149ddd;position:absolute;border-radius:10px;transform:scaleX(0);transform-origin:left;animation:_ngcontent-%COMP%_animate 1s 1s cubic-bezier(1,0,.5,1) forwards}@keyframes _ngcontent-%COMP%_animate{to{transform:scaleX(1)}}.progress-line.html[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:80%}.progress-line.javascript[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:75%}.progress-line.php[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:55%}.progress-line.python[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:60%}.progress-line.mysql[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:73%}.bar[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{position:absolute;content:"";right:0;top:-10px;height:0;width:0;border:7px solid transparent;border-bottom-width:0px;border-right-width:0px;border-top-color:#000;opacity:0;animation:_ngcontent-%COMP%_showText2 .5s 1.5s linear forwards}.bar[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{position:absolute;right:0;top:-28px;background:#000;color:#fff;font-size:12px;font-weight:500;padding:1px 8px;border-radius:3px;opacity:0;animation:_ngcontent-%COMP%_showText2 .5s 1.5s linear forwards}@keyframes _ngcontent-%COMP%_showText2{to{opacity:1}}.progress-line.html[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"80%"}.progress-line.javascript[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"75%"}.progress-line.php[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"55%"}.progress-line.python[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"60%"}.progress-line.mysql[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"73%"}body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}#main[_ngcontent-%COMP%]{margin-left:300px}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}@media (max-width: 1199px){#header[_ngcontent-%COMP%]{left:-300px}#main[_ngcontent-%COMP%]{margin-left:0}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#173b6c}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:10px}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-right:5px;color:#149ddd;line-height:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}']}),e})(),I7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-resume"]],decls:86,vars:0,consts:[["id","main"],["id","resume",1,"resume"],[1,"container"],[1,"section-title"],[1,"row"],["data-aos","fade-up",1,"col-lg-6"],[1,"resume-title"],[1,"resume-item","pb-0"],[1,"resume-item"],["data-aos","fade-up","data-aos-delay","100",1,"col-lg-6"]],template:function(r,i){1&r&&(f.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2"),f._uU(5,"Resume"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Will be updated soon..!"),f.qZA()(),f.TgZ(8,"div",4)(9,"div",5)(10,"h3",6),f._uU(11,"Sumary"),f.qZA(),f.TgZ(12,"div",7)(13,"h4"),f._uU(14,"Surya Prakash"),f.qZA(),f.TgZ(15,"p")(16,"em"),f._uU(17,"Will be updated soon..!"),f.qZA()(),f.TgZ(18,"ul")(19,"li"),f._uU(20,"No12, Pandian Street, Senthamizh Nagar, Pattabiram, Chennai-600072"),f.qZA(),f.TgZ(21,"li"),f._uU(22,"8124509710"),f.qZA(),f.TgZ(23,"li"),f._uU(24,"ariessurya8124@gmail.com"),f.qZA()()(),f.TgZ(25,"h3",6),f._uU(26,"Education"),f.qZA(),f.TgZ(27,"div",8)(28,"h4"),f._uU(29,"Bachelor of Computer Science & Engineering"),f.qZA(),f.TgZ(30,"h5"),f._uU(31,"2021 - 2025"),f.qZA(),f.TgZ(32,"p")(33,"em"),f._uU(34,"S. A. Engineering College"),f.qZA()(),f.TgZ(35,"p"),f._uU(36,"about will be updated soon..!"),f.qZA()(),f.TgZ(37,"div",8)(38,"h4"),f._uU(39,"Higher Secondary Education"),f.qZA(),f.TgZ(40,"h5"),f._uU(41,"2020- 2021"),f.qZA(),f.TgZ(42,"p")(43,"em"),f._uU(44,"Jaya Matriculation Hr Sec School"),f.qZA()(),f.TgZ(45,"p"),f._uU(46,"about will be updated soon..!"),f.qZA()(),f.TgZ(47,"div",8)(48,"h4"),f._uU(49,"SSLC"),f.qZA(),f.TgZ(50,"h5"),f._uU(51,"2019- 2020"),f.qZA(),f.TgZ(52,"p")(53,"em"),f._uU(54,"Jaya Matriculation Hr Sec School"),f.qZA()(),f.TgZ(55,"p"),f._uU(56,"about will be updated soon..!"),f.qZA()()(),f.TgZ(57,"div",9)(58,"h3",6),f._uU(59,"Professional Experience"),f.qZA(),f.TgZ(60,"div",8)(61,"h4"),f._uU(62,"Job Professional"),f.qZA(),f.TgZ(63,"h5"),f._uU(64,"Year"),f.qZA(),f.TgZ(65,"p")(66,"em"),f._uU(67,"Location"),f.qZA()(),f.TgZ(68,"ul"),f._UZ(69,"li")(70,"li")(71,"li")(72,"li"),f.qZA()(),f.TgZ(73,"div",8)(74,"h4"),f._uU(75,"Job Professional"),f.qZA(),f.TgZ(76,"h5"),f._uU(77,"Year"),f.qZA(),f.TgZ(78,"p")(79,"em"),f._uU(80,"Location"),f.qZA()(),f.TgZ(81,"ul"),f._UZ(82,"li")(83,"li")(84,"li")(85,"li"),f.qZA()()()()()()())},styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#149ddd;color:#fff;text-decoration:none}#main[_ngcontent-%COMP%]{margin-left:300px}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}@media (max-width: 1199px){#header[_ngcontent-%COMP%]{left:-300px}#main[_ngcontent-%COMP%]{margin-left:0}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}}.resume[_ngcontent-%COMP%]   .resume-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-top:20px;margin-bottom:20px;color:#050d18}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]{padding:0 0 20px 20px;margin-top:-2px;border-left:2px solid #1f5297;position:relative}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:18px;font-size:18px;font-weight:600;text-transform:uppercase;font-family:Poppins,sans-serif;color:#050d18;margin-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;background:#e4edf9;padding:5px 15px;display:inline-block;font-weight:600;margin-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;border-radius:50px;left:-9px;top:0;background:#fff;border:2px solid #1f5297}']}),e})(),C7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-portfolio"]],decls:19,vars:0,consts:[["id","main"],["id","portfolio",1,"portfolio","section-bg"],[1,"container"],[1,"section-title"],["data-aos","fade-up",1,"row"],[1,"col-lg-12","d-flex","justify-content-center"],["id","portfolio-flters"],["data-filter","*",1,"filter-active"],["data-filter",".filter-app"],["data-filter",".filter-card"],["data-filter",".filter-web"]],template:function(r,i){1&r&&(f.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2"),f._uU(5,"Portfolio"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Will be updated soon...!"),f.qZA()(),f.TgZ(8,"div",4)(9,"div",5)(10,"ul",6)(11,"li",7),f._uU(12,"All"),f.qZA(),f.TgZ(13,"li",8),f._uU(14,"App"),f.qZA(),f.TgZ(15,"li",9),f._uU(16,"Card"),f.qZA(),f.TgZ(17,"li",10),f._uU(18,"Web"),f.qZA()()()()()()())},styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}.back-to-top[_ngcontent-%COMP%]{position:fixed;visibility:hidden;opacity:0;right:15px;bottom:15px;z-index:996;background:#149ddd;width:40px;height:40px;border-radius:50px;transition:all .4s}.back-to-top[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;color:#fff;line-height:0}.back-to-top[_ngcontent-%COMP%]:hover{background:#2eafec;color:#fff}.back-to-top.active[_ngcontent-%COMP%]{visibility:visible;opacity:1}#header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;width:300px;transition:all ease-in-out .5s;z-index:9997;transition:all .5s;padding:0 15px;background:#040b14;overflow-y:auto}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:15px auto;display:block;width:120px;border:8px solid #2c2f3f}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin:0;padding:0;font-weight:600;text-align-last:center;font-family:Poppins,sans-serif}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:none}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;display:inline-block;background:#212431;color:#fff;line-height:1;padding:8px 0;margin-right:4px;border-radius:50%;text-align:center;width:36px;height:36px;transition:.3s}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#149ddd;color:#fff;text-decoration:none}#main[_ngcontent-%COMP%]{margin-left:300px}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}@media (max-width: 1199px){#header[_ngcontent-%COMP%]{left:-300px}#main[_ngcontent-%COMP%]{margin-left:0}.container[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}}.nav-menu[_ngcontent-%COMP%]{padding:30px 0 0}.nav-menu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.nav-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;white-space:nowrap}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{display:flex;align-items:center;color:#a8a9b4;padding:12px 15px;margin-bottom:8px;transition:.3s;font-size:15px}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:24px;padding-right:8px;color:#6f7180}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus, .nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%], .nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#149ddd}.mobile-nav-toggle[_ngcontent-%COMP%]{position:fixed;right:15px;top:15px;z-index:9998;border:0;font-size:24px;transition:all .4s;outline:none!important;background-color:#149ddd;color:#fff;width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;line-height:0;border-radius:50px;cursor:pointer}.mobile-nav-active[_ngcontent-%COMP%]{overflow:hidden}.mobile-nav-active[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{left:0}#hero[_ngcontent-%COMP%]{width:80%;height:100vh;background-size:cover;translate:300px}#hero[_ngcontent-%COMP%]:before{content:"";background:rgba(5,13,24,.3);position:absolute;inset:0;z-index:1}#hero[_ngcontent-%COMP%]   .hero-container[_ngcontent-%COMP%]{position:relative;z-index:2;min-width:300px;margin-left:33px}#hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;font-size:64px;font-weight:700;line-height:56px;color:#fff}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin-bottom:50px;font-size:26px;font-family:Poppins,sans-serif}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding-bottom:4px;letter-spacing:1px;border-bottom:3px solid #149ddd}@media (min-width: 1024px){#hero[_ngcontent-%COMP%]{background-attachment:fixed}}@media (max-width: 768px){#hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;line-height:36px}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;line-height:24px;margin-bottom:30px}}section[_ngcontent-%COMP%]{padding:60px 0;overflow:hidden}.section-bg[_ngcontent-%COMP%]{background:#f5f8fd}.section-title[_ngcontent-%COMP%]{padding-bottom:30px}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:20px;padding-bottom:20px;position:relative;color:#173b6c}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;width:50px;height:3px;background:#149ddd;bottom:0;left:0}.section-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#173b6c}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:10px}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-right:5px;color:#149ddd;line-height:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.facts[_ngcontent-%COMP%]{padding-bottom:30px}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]{padding:30px;width:100%}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:44px;color:#149ddd;float:left;line-height:0}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:48px;line-height:40px;display:block;font-weight:700;color:#050d18;margin-left:60px}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:15px 0 0;margin:0 0 0 60px;font-family:Raleway,sans-serif;font-size:14px;color:#122f57}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;display:block;margin-top:20px;color:#122f57;font-size:15px;font-family:Poppins,sans-serif;transition:ease-in-out .3s}.facts[_ngcontent-%COMP%]   .count-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1f5297}.skills[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:60px;display:block;background:none;border-radius:0}.skills[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{padding:0;margin:0 0 6px;text-transform:uppercase;display:block;font-weight:600;font-family:Poppins,sans-serif;color:#050d18}.skills[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]   .val[_ngcontent-%COMP%]{float:right;font-style:normal}.skills[_ngcontent-%COMP%]   .progress-bar-wrap[_ngcontent-%COMP%]{background:#dce8f8;height:10px}.skills[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:1px;height:10px;transition:.9s;background-color:#149ddd}.resume[_ngcontent-%COMP%]   .resume-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-top:20px;margin-bottom:20px;color:#050d18}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]{padding:0 0 20px 20px;margin-top:-2px;border-left:2px solid #1f5297;position:relative}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:18px;font-size:18px;font-weight:600;text-transform:uppercase;font-family:Poppins,sans-serif;color:#050d18;margin-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;background:#e4edf9;padding:5px 15px;display:inline-block;font-weight:600;margin-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;border-radius:50px;left:-9px;top:0;background:#fff;border:2px solid #1f5297}.portfolio[_ngcontent-%COMP%]   .portfolio-item[_ngcontent-%COMP%]{margin-bottom:30px}.portfolio[_ngcontent-%COMP%]   #portfolio-flters[_ngcontent-%COMP%]{margin:0 auto 35px;list-style:none;text-align:center;background:#fff;border-radius:50px;padding:2px 15px}.portfolio[_ngcontent-%COMP%]   #portfolio-flters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;padding:10px 15px 8px;font-size:14px;font-weight:600;line-height:1;text-transform:uppercase;color:#272829;margin-bottom:5px;transition:all .3s ease-in-out}.portfolio[_ngcontent-%COMP%]   #portfolio-flters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .portfolio[_ngcontent-%COMP%]   #portfolio-flters[_ngcontent-%COMP%]   li.filter-active[_ngcontent-%COMP%]{color:#149ddd}.portfolio[_ngcontent-%COMP%]   #portfolio-flters[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]{transition:.3s;position:relative;overflow:hidden;z-index:1}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]:before{content:"";background:rgba(255,255,255,.5);position:absolute;inset:0;transition:all ease-in-out .3s;z-index:2;opacity:0}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]   .portfolio-links[_ngcontent-%COMP%]{opacity:1;left:0;right:0;bottom:-60px;z-index:3;position:absolute;transition:all ease-in-out .3s;display:flex;justify-content:center}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]   .portfolio-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:28px;text-align:center;background:rgba(20,157,221,.75);transition:.3s;width:50%}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]   .portfolio-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:rgba(20,157,221,.95)}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]   .portfolio-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{border-left:1px solid #37b3ed}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]:hover:before{inset:0;opacity:1}.portfolio[_ngcontent-%COMP%]   .portfolio-wrap[_ngcontent-%COMP%]:hover   .portfolio-links[_ngcontent-%COMP%]{opacity:1;bottom:0}.portfolio-details[_ngcontent-%COMP%]{padding-top:40px}.portfolio-details[_ngcontent-%COMP%]   .portfolio-details-slider[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.portfolio-details[_ngcontent-%COMP%]   .portfolio-details-slider[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{margin-top:20px;position:relative}.portfolio-details[_ngcontent-%COMP%]   .portfolio-details-slider[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]   .swiper-pagination-bullet[_ngcontent-%COMP%]{width:12px;height:12px;background-color:#fff;opacity:1;border:1px solid #149ddd}.portfolio-details[_ngcontent-%COMP%]   .portfolio-details-slider[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]   .swiper-pagination-bullet-active[_ngcontent-%COMP%]{background-color:#149ddd}.portfolio-details[_ngcontent-%COMP%]   .portfolio-info[_ngcontent-%COMP%]{padding:30px;box-shadow:0 0 30px #050d1814}.portfolio-details[_ngcontent-%COMP%]   .portfolio-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #eee}.portfolio-details[_ngcontent-%COMP%]   .portfolio-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;font-size:15px}.portfolio-details[_ngcontent-%COMP%]   .portfolio-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:10px}.portfolio-details[_ngcontent-%COMP%]   .portfolio-description[_ngcontent-%COMP%]{padding-top:30px}.portfolio-details[_ngcontent-%COMP%]   .portfolio-description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:20px}.portfolio-details[_ngcontent-%COMP%]   .portfolio-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{margin-bottom:20px}.services[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{float:left;display:flex;align-items:center;justify-content:center;width:54px;height:54px;background:#149ddd;border-radius:50%;transition:.5s;border:1px solid #149ddd}.services[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:24px;line-height:0}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background:#fff}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#149ddd}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:80px;font-weight:700;margin-bottom:15px;font-size:18px}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#343a40}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#149ddd}.services[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:80px;line-height:24px;font-size:14px}.testimonials[_ngcontent-%COMP%]   .testimonials-carousel[_ngcontent-%COMP%], .testimonials[_ngcontent-%COMP%]   .testimonials-slider[_ngcontent-%COMP%]{overflow:hidden}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]{box-sizing:content-box;text-align:center;min-height:320px}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   .testimonial-img[_ngcontent-%COMP%]{width:90px;border-radius:50%;margin:0 auto}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:10px 0 5px;color:#111}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   .quote-icon-left[_ngcontent-%COMP%], .testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   .quote-icon-right[_ngcontent-%COMP%]{color:#c3e8fa;font-size:26px}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   .quote-icon-left[_ngcontent-%COMP%]{display:inline-block;left:-5px;position:relative}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   .quote-icon-right[_ngcontent-%COMP%]{display:inline-block;right:-5px;position:relative;top:10px}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic;margin:0 15px 35px;padding:20px;background:#fff;position:relative;border-radius:6px;box-shadow:0 2px 15px #0000001a}.testimonials[_ngcontent-%COMP%]   .testimonial-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:after{content:"";width:0;height:0;border-top:20px solid #fff;border-right:20px solid transparent;border-left:20px solid transparent;position:absolute;bottom:-20px;left:calc(50% - 20px)}.testimonials[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{margin-top:20px;position:relative}.testimonials[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]   .swiper-pagination-bullet[_ngcontent-%COMP%]{width:12px;height:12px;background-color:#fff;opacity:1;border:1px solid #149ddd}.testimonials[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]   .swiper-pagination-bullet-active[_ngcontent-%COMP%]{background-color:#149ddd}.contact[_ngcontent-%COMP%]{padding-bottom:130px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:30px;background:#fff;width:100%;box-shadow:0 0 24px #0000001f}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#149ddd;float:left;width:44px;height:44px;background:#dff3fc;display:flex;justify-content:center;align-items:center;border-radius:50px;transition:all .3s ease-in-out}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding:0 0 0 60px;font-size:22px;font-weight:600;margin-bottom:5px;color:#050d18}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 0 10px 60px;margin-bottom:20px;font-size:14px;color:#173b6c}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{padding-left:60px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;display:inline-block;background:#333;color:#fff;line-height:1;padding:8px 0;border-radius:50%;text-align:center;width:36px;height:36px;transition:.3s;margin-right:10px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{background:#149ddd;color:#fff}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]{width:100%;padding:30px;background:#fff;box-shadow:0 0 24px #0000001f}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding-bottom:8px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .validate[_ngcontent-%COMP%]{display:none;color:red;margin:0 0 15px;font-weight:400;font-size:13px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:none;color:#fff;background:#ed3c0d;text-align:left;padding:15px;font-weight:600}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   br[_ngcontent-%COMP%] + br[_ngcontent-%COMP%]{margin-top:25px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .sent-message[_ngcontent-%COMP%]{display:none;color:#fff;background:#18d26e;text-align:center;padding:15px;font-weight:600}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:none;background:#fff;text-align:center;padding:15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]:before{content:"";display:inline-block;border-radius:50%;width:24px;height:24px;margin:0 10px -6px 0;border:3px solid #18d26e;border-top-color:#eee;animation:_ngcontent-%COMP%_animate-loading 1s linear infinite}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:8px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0;box-shadow:none;font-size:14px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:44px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:#149ddd;border:0;padding:10px 24px;color:#fff;transition:.4s;border-radius:4px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#37b3ed}@keyframes _ngcontent-%COMP%_animate-loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.breadcrumbs[_ngcontent-%COMP%]{padding:20px 0;background:#f9f9f9}.breadcrumbs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:300}.breadcrumbs[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0;font-size:15px}.breadcrumbs[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{padding-left:10px}.breadcrumbs[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{display:inline-block;padding-right:10px;color:#0e2442;content:"/"}@media (max-width: 768px){.breadcrumbs[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:block!important}.breadcrumbs[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{display:block}.breadcrumbs[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}}#footer[_ngcontent-%COMP%]{padding:15px;color:#f4f6fd;font-size:14px;position:fixed;left:0;bottom:0;width:300px;z-index:9999;background:#040b14}#footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{text-align:center}#footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{padding-top:5px;text-align:center;font-size:13px;color:#eaebf0}@media (max-width: 1199px){#footer[_ngcontent-%COMP%]{position:static;width:auto;padding-right:20px 15px}}']}),e})(),E7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-services"]],decls:8,vars:0,consts:[["id","main"],["id","services",1,"services"],[1,"container"],[1,"section-title"]],template:function(r,i){1&r&&(f.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2"),f._uU(5,"Services"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"will be updated soon..!"),f.qZA()()()()())},styles:["body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}#main[_ngcontent-%COMP%]{margin-left:318px}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{margin-bottom:20px}.services[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{float:left;display:flex;align-items:center;justify-content:center;width:54px;height:54px;background:#149ddd;border-radius:50%;transition:.5s;border:1px solid #149ddd}.services[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:24px;line-height:0}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background:#fff}.services[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#149ddd}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:80px;font-weight:700;margin-bottom:15px;font-size:18px}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#343a40}.services[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#149ddd}.services[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:80px;line-height:24px;font-size:14px}"]}),e})(),b7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact"]],decls:58,vars:0,consts:[["id","main"],["id","contact",1,"contact"],[1,"container"],[1,"section-title"],["data-aos","fade-in",1,"row"],[1,"col-lg-5","d-flex","align-items-stretch"],[1,"info"],[1,"address"],[1,"bi","bi-geo-alt"],[1,"email"],[1,"bi","bi-envelope"],[1,"phone"],[1,"bi","bi-phone"],["src","https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3885.5693951250573!2d80.07759307507915!3d13.126442987203296!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTPCsDA3JzM1LjIiTiA4MMKwMDQnNDguNiJF!5e0!3m2!1sen!2sin!4v1692850930969!5m2!1sen!2sin","width","400","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"col-lg-7","mt-5","mt-lg-0","d-flex","align-items-stretch"],["action","forms/contact.php","method","post","role","form",1,"php-email-form"],[1,"row"],[1,"form-group","col-md-6"],["for","name"],["type","text","name","name","id","name","required","",1,"form-control"],["type","email","name","email","id","email","required","",1,"form-control"],[1,"form-group"],["type","text","name","subject","id","subject","required","",1,"form-control"],["name","message","rows","10","required","",1,"form-control"],[1,"my-3"],[1,"loading"],[1,"error-message"],[1,"sent-message"],[1,"text-center"],["type","submit"]],template:function(r,i){1&r&&(f.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"h2"),f._uU(5,"Contact"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Will be updated soon..!"),f.qZA()(),f.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7),f._UZ(12,"i",8),f.TgZ(13,"h4"),f._uU(14,"Location:"),f.qZA(),f.TgZ(15,"p"),f._uU(16,"No12, Pandian Street, Senthamizh Nagar, Pattabiram, Chennai-600072"),f.qZA()(),f.TgZ(17,"div",9),f._UZ(18,"i",10),f.TgZ(19,"h4"),f._uU(20,"Email:"),f.qZA(),f.TgZ(21,"p"),f._uU(22,"ariessurya8124@gmail.com"),f.qZA()(),f.TgZ(23,"div",11),f._UZ(24,"i",12),f.TgZ(25,"h4"),f._uU(26,"Call:"),f.qZA(),f.TgZ(27,"p"),f._uU(28,"8124509710"),f.qZA()(),f._UZ(29,"iframe",13),f.qZA()(),f.TgZ(30,"div",14)(31,"form",15)(32,"div",16)(33,"div",17)(34,"label",18),f._uU(35,"Your Name"),f.qZA(),f._UZ(36,"input",19),f.qZA(),f.TgZ(37,"div",17)(38,"label",18),f._uU(39,"Your Email"),f.qZA(),f._UZ(40,"input",20),f.qZA()(),f.TgZ(41,"div",21)(42,"label",18),f._uU(43,"Subject"),f.qZA(),f._UZ(44,"input",22),f.qZA(),f.TgZ(45,"div",21)(46,"label",18),f._uU(47,"Message"),f.qZA(),f._UZ(48,"textarea",23),f.qZA(),f.TgZ(49,"div",24)(50,"div",25),f._uU(51,"Loading"),f.qZA(),f._UZ(52,"div",26),f.TgZ(53,"div",27),f._uU(54,"Your message has been sent. Thank you!"),f.qZA()(),f.TgZ(55,"div",28)(56,"button",29),f._uU(57,"Send Message"),f.qZA()()()()()()()())},dependencies:[Vk,Mk,lP],styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#272829}a[_ngcontent-%COMP%]{color:#149ddd;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#37b3ed;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}.contact[_ngcontent-%COMP%]{padding-bottom:130px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:30px;background:#fff;width:100%;box-shadow:0 0 24px #0000001f}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#149ddd;float:left;width:44px;height:44px;background:#dff3fc;display:flex;justify-content:center;align-items:center;border-radius:50px;transition:all .3s ease-in-out}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding:0 0 0 60px;font-size:22px;font-weight:600;margin-bottom:5px;color:#050d18}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 0 10px 60px;margin-bottom:20px;font-size:14px;color:#173b6c}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:5px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{padding-left:60px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;display:inline-block;background:#333;color:#fff;line-height:1;padding:8px 0;border-radius:50%;text-align:center;width:36px;height:36px;transition:.3s;margin-right:10px}.contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{background:#149ddd;color:#fff}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]{width:100%;padding:30px;background:#fff;box-shadow:0 0 24px #0000001f}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding-bottom:8px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .validate[_ngcontent-%COMP%]{display:none;color:red;margin:0 0 15px;font-weight:400;font-size:13px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:none;color:#fff;background:#ed3c0d;text-align:left;padding:15px;font-weight:600}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   br[_ngcontent-%COMP%] + br[_ngcontent-%COMP%]{margin-top:25px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .sent-message[_ngcontent-%COMP%]{display:none;color:#fff;background:#18d26e;text-align:center;padding:15px;font-weight:600}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:none;background:#fff;text-align:center;padding:15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]:before{content:"";display:inline-block;border-radius:50%;width:24px;height:24px;margin:0 10px -6px 0;border:3px solid #18d26e;border-top-color:#eee;animation:_ngcontent-%COMP%_animate-loading 1s linear infinite}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:8px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0;box-shadow:none;font-size:14px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:44px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 15px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:#149ddd;border:0;padding:10px 24px;color:#fff;transition:.4s;border-radius:4px}.contact[_ngcontent-%COMP%]   .php-email-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#37b3ed}@keyframes _ngcontent-%COMP%_animate-loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#main[_ngcontent-%COMP%]{margin-left:318px}']}),e})(),T7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:11,vars:0,consts:[["id","footer"],[1,"container"],[1,"copyright"],[1,"credits"],["href","https://github.com/Aries-Surya"]],template:function(r,i){1&r&&(f.TgZ(0,"footer",0)(1,"div",1)(2,"div",2),f._uU(3," \xa9 Copyright "),f.TgZ(4,"strong")(5,"span"),f._uU(6,"Aries-Surya"),f.qZA()()(),f.TgZ(7,"div",3),f._uU(8," Designed by "),f.TgZ(9,"a",4),f._uU(10,"Aries-Surya"),f.qZA()()()())},styles:["#footer[_ngcontent-%COMP%]{padding:15px;color:#f4f6fd;font-size:14px;position:fixed;left:0;bottom:0;width:300px;z-index:9999;background:#040b14}#footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{text-align:center}#footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{padding-top:5px;text-align:center;font-size:13px;color:#eaebf0}@media (max-width: 1199px){#footer[_ngcontent-%COMP%]{position:static;width:auto;padding-right:20px 15px}}"]}),e})(),D7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-nav"]],decls:57,vars:0,consts:[["id","header"],[1,"d-flex","flex-column"],[1,"profile"],["src","assets/img/SP-DP.jpg","alt","",1,"img-fluid","rounded-circle"],[1,"text-light"],["href","index.html"],[1,"social-links","mt-3","text-center"],["href","https://twitter.com/aries_surya_",1,"twitter"],[1,"bx","bxl-twitter"],["href","https://www.facebook.com/ariessurya81",1,"facebook"],[1,"bx","bxl-facebook"],["href","https://www.instagram.com/aries_surya_",1,"instagram"],[1,"bx","bxl-instagram"],["href","https://www.youtube.com/@SuryaInformative",1,"Youtube"],[1,"bi","bi-youtube"],["href","https://www.linkedin.com/in/surya-prakash-226b93225/",1,"linkedin"],[1,"bx","bxl-linkedin"],["href","https://github.com/Aries-Surya",1,"linkedin"],[1,"bx","bxl-github"],["id","navbar",1,"nav-menu","navbar"],["href","#hero",1,"nav-link","scrollto","active"],[1,"bx","bx-home"],["href","#about",1,"nav-link","scrollto"],[1,"bx","bx-user"],["href","#resume",1,"nav-link","scrollto"],[1,"bx","bx-file-blank"],["href","#portfolio",1,"nav-link","scrollto"],[1,"bx","bx-book-content"],["href","#services",1,"nav-link","scrollto"],[1,"bx","bx-server"],["href","#contact",1,"nav-link","scrollto"],[1,"bx","bx-envelope"],["href","http://localhost:4200/signIn",1,"nav-link","scrollto"],[1,"bx","bx-log-in"]],template:function(r,i){1&r&&(f.TgZ(0,"header",0)(1,"div",1)(2,"div",2),f._UZ(3,"img",3),f.TgZ(4,"h1",4)(5,"a",5),f._uU(6,"Surya Prakash"),f.qZA()(),f.TgZ(7,"div",6)(8,"a",7),f._UZ(9,"i",8),f.qZA(),f.TgZ(10,"a",9),f._UZ(11,"i",10),f.qZA(),f.TgZ(12,"a",11),f._UZ(13,"i",12),f.qZA(),f.TgZ(14,"a",13),f._UZ(15,"i",14),f.qZA(),f.TgZ(16,"a",15),f._UZ(17,"i",16),f.qZA(),f.TgZ(18,"a",17),f._UZ(19,"i",18),f.qZA()()(),f.TgZ(20,"nav",19)(21,"ul")(22,"li")(23,"a",20),f._UZ(24,"i",21),f.TgZ(25,"span"),f._uU(26,"Home"),f.qZA()()(),f.TgZ(27,"li")(28,"a",22),f._UZ(29,"i",23),f.TgZ(30,"span"),f._uU(31,"About"),f.qZA()()(),f.TgZ(32,"li")(33,"a",24),f._UZ(34,"i",25),f.TgZ(35,"span"),f._uU(36,"Resume"),f.qZA()()(),f.TgZ(37,"li")(38,"a",26),f._UZ(39,"i",27),f.TgZ(40,"span"),f._uU(41,"Portfolio"),f.qZA()()(),f.TgZ(42,"li")(43,"a",28),f._UZ(44,"i",29),f.TgZ(45,"span"),f._uU(46,"Services"),f.qZA()()(),f.TgZ(47,"li")(48,"a",30),f._UZ(49,"i",31),f.TgZ(50,"span"),f._uU(51,"Contact"),f.qZA()()(),f.TgZ(52,"li")(53,"a",32),f._UZ(54,"i",33),f.TgZ(55,"span"),f._uU(56,"Login"),f.qZA()()()()()()())},styles:["#header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;width:300px;transition:all ease-in-out .5s;z-index:9997;transition:all .5s;padding:0 15px;background:#040b14;overflow-y:auto}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:15px auto;display:block;width:120px;border:8px solid #2c2f3f}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin:0;padding:0;font-weight:600;text-align-last:center;font-family:Poppins,sans-serif}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:none}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;display:inline-block;background:#212431;color:#fff;line-height:1;padding:8px 0;margin-right:4px;border-radius:50%;text-align:center;width:36px;height:36px;transition:.3s}#header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#149ddd;color:#fff;text-decoration:none}"]}),e})(),S7=(()=>{var n;class e{constructor(){this.title="SP-Portfolio"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:0,template:function(r,i){1&r&&f._UZ(0,"router-outlet")(1,"app-nav")(2,"app-hero")(3,"app-about")(4,"app-resume")(5,"app-portfolio")(6,"app-services")(7,"app-contact")(8,"app-footer")},dependencies:[_k,v7,w7,I7,C7,E7,b7,T7,D7]}),e})(),A7=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[S7,l3]}),n.\u0275inj=f.cJS({providers:[c3],imports:[pd,g7,Fq,Uq,er.hO.initializeApp(Ha_firebaseConfig),WT,EG,fz]}),e})();jn().bootstrapModule(A7).catch(n=>console.error(n))},5619:(ht,Se,k)=>{k.d(Se,{X:()=>ee});var f=k(8645);class ee extends f.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const se=super._subscribe(te);return!se.closed&&te.next(this._value),se}getValue(){const{hasError:te,thrownError:se,_value:_e}=this;if(te)throw se;return this._throwIfClosed(),_e}next(te){super.next(this._value=te)}}},5592:(ht,Se,k)=>{k.d(Se,{y:()=>ke});var f=k(305),ee=k(7394),L=k(4850),te=k(8407),se=k(2653),_e=k(4674),we=k(1441);let ke=(()=>{class J{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Ye=new J;return Ye.source=this,Ye.operator=Oe,Ye}subscribe(Oe,Ye,Ne){const qe=function z(J){return J&&J instanceof f.Lv||function B(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,ee.Nn)(J)}(Oe)?Oe:new f.Hp(Oe,Ye,Ne);return(0,we.x)(()=>{const{operator:Fe,source:vt}=this;qe.add(Fe?Fe.call(qe,vt):vt?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Ye){Oe.error(Ye)}}forEach(Oe,Ye){return new(Ye=me(Ye))((Ne,qe)=>{const Fe=new f.Hp({next:vt=>{try{Oe(vt)}catch(pt){qe(pt),Fe.unsubscribe()}},error:qe,complete:Ne});this.subscribe(Fe)})}_subscribe(Oe){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Oe)}[L.L](){return this}pipe(...Oe){return(0,te.U)(Oe)(this)}toPromise(Oe){return new(Oe=me(Oe))((Ye,Ne)=>{let qe;this.subscribe(Fe=>qe=Fe,Fe=>Ne(Fe),()=>Ye(qe))})}}return J.create=Ve=>new J(Ve),J})();function me(J){var Ve;return null!==(Ve=J??se.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(ht,Se,k)=>{k.d(Se,{x:()=>we});var f=k(5592),ee=k(7394);const te=(0,k(2306).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(9039),_e=k(1441);let we=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ke(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new te}next(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:Ve,observers:Oe}=this;return J||Ve?ee.Lc:(this.currentObservers=null,Oe.push(z),new ee.w0(()=>{this.currentObservers=null,(0,se.P)(Oe,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:Ve,isStopped:Oe}=this;J?z.error(Ve):Oe&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return me.create=(B,z)=>new ke(B,z),me})();class ke extends we{constructor(B,z){super(),this.destination=B,this.source=z}next(B){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,B)}error(B){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,B)}complete(){var B,z;null===(z=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===z||z.call(B)}_subscribe(B){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(B))&&void 0!==J?J:ee.Lc}}},305:(ht,Se,k)=>{k.d(Se,{Hp:()=>Ne,Lv:()=>J});var f=k(4674),ee=k(7394),L=k(2653),te=k(3894),se=k(2420);const _e=me("C",void 0,void 0);function me(ie,Ce,ne){return{kind:ie,value:Ce,error:ne}}var B=k(7599),z=k(1441);class J extends ee.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ee.Nn)(Ce)&&Ce.add(this)):this.destination=pt}static create(Ce,ne,Ae){return new Ne(Ce,ne,Ae)}next(Ce){this.isStopped?vt(function ke(ie){return me("N",ie,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?vt(function we(ie){return me("E",void 0,ie)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?vt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Oe(ie,Ce){return Ve.call(ie,Ce)}class Ye{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:ne}=this;if(ne.next)try{ne.next(Ce)}catch(Ae){qe(Ae)}}error(Ce){const{partialObserver:ne}=this;if(ne.error)try{ne.error(Ce)}catch(Ae){qe(Ae)}else qe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(ne){qe(ne)}}}class Ne extends J{constructor(Ce,ne,Ae){let Le;if(super(),(0,f.m)(Ce)||!Ce)Le={next:Ce??void 0,error:ne??void 0,complete:Ae??void 0};else{let Ze;this&&L.config.useDeprecatedNextContext?(Ze=Object.create(Ce),Ze.unsubscribe=()=>this.unsubscribe(),Le={next:Ce.next&&Oe(Ce.next,Ze),error:Ce.error&&Oe(Ce.error,Ze),complete:Ce.complete&&Oe(Ce.complete,Ze)}):Le=Ce}this.destination=new Ye(Le)}}function qe(ie){L.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(ie):(0,te.h)(ie)}function vt(ie,Ce){const{onStoppedNotification:ne}=L.config;ne&&B.z.setTimeout(()=>ne(ie,Ce))}const pt={closed:!0,next:se.Z,error:function Fe(ie){throw ie},complete:se.Z}},7394:(ht,Se,k)=>{k.d(Se,{Lc:()=>_e,w0:()=>se,Nn:()=>we});var f=k(4674);const L=(0,k(2306).d)(me=>function(z){me(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,Ve)=>`${Ve+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var te=k(9039);class se{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Oe of z)Oe.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,f.m)(J))try{J()}catch(Oe){B=Oe instanceof L?Oe.errors:[Oe]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Oe of Ve)try{ke(Oe)}catch(Ye){B=B??[],Ye instanceof L?B=[...B,...Ye.errors]:B.push(Ye)}}if(B)throw new L(B)}}add(B){var z;if(B&&B!==this)if(this.closed)ke(B);else{if(B instanceof se){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(B)}}_hasParent(B){const{_parentage:z}=this;return z===B||Array.isArray(z)&&z.includes(B)}_addParent(B){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(B),z):z?[z,B]:B}_removeParent(B){const{_parentage:z}=this;z===B?this._parentage=null:Array.isArray(z)&&(0,te.P)(z,B)}remove(B){const{_finalizers:z}=this;z&&(0,te.P)(z,B),B instanceof se&&B._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const _e=se.EMPTY;function we(me){return me instanceof se||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function ke(me){(0,f.m)(me)?me():me.unsubscribe()}},2653:(ht,Se,k)=>{k.d(Se,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ht,Se,k)=>{k.d(Se,{E:()=>ee});const ee=new(k(5592).y)(se=>se.complete())},2459:(ht,Se,k)=>{k.d(Se,{D:()=>Ce});var f=k(4829),ee=k(3093),L=k(5137),_e=k(5592),ke=k(4971),me=k(4674),B=k(7103);function J(ne,Ae){if(!ne)throw new Error("Iterable cannot be null");return new _e.y(Le=>{(0,B.f)(Le,Ae,()=>{const Ze=ne[Symbol.asyncIterator]();(0,B.f)(Le,Ae,()=>{Ze.next().then(ce=>{ce.done?Le.complete():Le.next(ce.value)})},0,!0)})})}var Ve=k(8382),Oe=k(4026),Ye=k(4266),Ne=k(3664),qe=k(5726),Fe=k(9853),vt=k(541);function Ce(ne,Ae){return Ae?function ie(ne,Ae){if(null!=ne){if((0,Ve.c)(ne))return function te(ne,Ae){return(0,f.Xf)(ne).pipe((0,L.R)(Ae),(0,ee.Q)(Ae))}(ne,Ae);if((0,Ye.z)(ne))return function we(ne,Ae){return new _e.y(Le=>{let Ze=0;return Ae.schedule(function(){Ze===ne.length?Le.complete():(Le.next(ne[Ze++]),Le.closed||this.schedule())})})}(ne,Ae);if((0,Oe.t)(ne))return function se(ne,Ae){return(0,f.Xf)(ne).pipe((0,L.R)(Ae),(0,ee.Q)(Ae))}(ne,Ae);if((0,qe.D)(ne))return J(ne,Ae);if((0,Ne.T)(ne))return function z(ne,Ae){return new _e.y(Le=>{let Ze;return(0,B.f)(Le,Ae,()=>{Ze=ne[ke.h](),(0,B.f)(Le,Ae,()=>{let ce,It;try{({value:ce,done:It}=Ze.next())}catch($t){return void Le.error($t)}It?Le.complete():Le.next(ce)},0,!0)}),()=>(0,me.m)(Ze?.return)&&Ze.return()})}(ne,Ae);if((0,vt.L)(ne))return function pt(ne,Ae){return J((0,vt.Q)(ne),Ae)}(ne,Ae)}throw(0,Fe.z)(ne)}(ne,Ae):(0,f.Xf)(ne)}},4829:(ht,Se,k)=>{k.d(Se,{Xf:()=>Ve});var f=k(7582),ee=k(4266),L=k(4026),te=k(5592),se=k(8382),_e=k(5726),we=k(9853),ke=k(3664),me=k(541),B=k(4674),z=k(3894),J=k(4850);function Ve(ie){if(ie instanceof te.y)return ie;if(null!=ie){if((0,se.c)(ie))return function Oe(ie){return new te.y(Ce=>{const ne=ie[J.L]();if((0,B.m)(ne.subscribe))return ne.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,ee.z)(ie))return function Ye(ie){return new te.y(Ce=>{for(let ne=0;ne<ie.length&&!Ce.closed;ne++)Ce.next(ie[ne]);Ce.complete()})}(ie);if((0,L.t)(ie))return function Ne(ie){return new te.y(Ce=>{ie.then(ne=>{Ce.closed||(Ce.next(ne),Ce.complete())},ne=>Ce.error(ne)).then(null,z.h)})}(ie);if((0,_e.D)(ie))return Fe(ie);if((0,ke.T)(ie))return function qe(ie){return new te.y(Ce=>{for(const ne of ie)if(Ce.next(ne),Ce.closed)return;Ce.complete()})}(ie);if((0,me.L)(ie))return function vt(ie){return Fe((0,me.Q)(ie))}(ie)}throw(0,we.z)(ie)}function Fe(ie){return new te.y(Ce=>{(function pt(ie,Ce){var ne,Ae,Le,Ze;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ne=(0,f.KL)(ie);!(Ae=yield ne.next()).done;)if(Ce.next(Ae.value),Ce.closed)return}catch(ce){Le={error:ce}}finally{try{Ae&&!Ae.done&&(Ze=ne.return)&&(yield Ze.call(ne))}finally{if(Le)throw Le.error}}Ce.complete()})})(ie,Ce).catch(ne=>Ce.error(ne))})}},3019:(ht,Se,k)=>{k.d(Se,{T:()=>_e});var f=k(7537),ee=k(4829),L=k(6232),te=k(4564),se=k(2459);function _e(...we){const ke=(0,te.yG)(we),me=(0,te._6)(we,1/0),B=we;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,f.J)(me)((0,se.D)(B,ke)):L.E}},2096:(ht,Se,k)=>{k.d(Se,{of:()=>L});var f=k(4564),ee=k(2459);function L(...te){const se=(0,f.yG)(te);return(0,ee.D)(te,se)}},8251:(ht,Se,k)=>{k.d(Se,{x:()=>ee});var f=k(305);function ee(te,se,_e,we,ke){return new L(te,se,_e,we,ke)}class L extends f.Lv{constructor(se,_e,we,ke,me,B){super(se),this.onFinalize=me,this.shouldUnsubscribe=B,this._next=_e?function(z){try{_e(z)}catch(J){se.error(J)}}:super._next,this._error=ke?function(z){try{ke(z)}catch(J){se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(z){se.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(ht,Se,k)=>{k.d(Se,{x:()=>te});var f=k(2737),ee=k(9360),L=k(8251);function te(_e,we=f.y){return _e=_e??se,(0,ee.e)((ke,me)=>{let B,z=!0;ke.subscribe((0,L.x)(me,J=>{const Ve=we(J);(z||!_e(B,Ve))&&(z=!1,B=Ve,me.next(J))}))})}function se(_e,we){return _e===we}},7398:(ht,Se,k)=>{k.d(Se,{U:()=>L});var f=k(9360),ee=k(8251);function L(te,se){return(0,f.e)((_e,we)=>{let ke=0;_e.subscribe((0,ee.x)(we,me=>{we.next(te.call(se,me,ke++))}))})}},7537:(ht,Se,k)=>{k.d(Se,{J:()=>L});var f=k(1631),ee=k(2737);function L(te=1/0){return(0,f.z)(ee.y,te)}},1631:(ht,Se,k)=>{k.d(Se,{z:()=>ke});var f=k(7398),ee=k(4829),L=k(9360),te=k(7103),se=k(8251),we=k(4674);function ke(me,B,z=1/0){return(0,we.m)(B)?ke((J,Ve)=>(0,f.U)((Oe,Ye)=>B(J,Oe,Ve,Ye))((0,ee.Xf)(me(J,Ve))),z):("number"==typeof B&&(z=B),(0,L.e)((J,Ve)=>function _e(me,B,z,J,Ve,Oe,Ye,Ne){const qe=[];let Fe=0,vt=0,pt=!1;const ie=()=>{pt&&!qe.length&&!Fe&&B.complete()},Ce=Ae=>Fe<J?ne(Ae):qe.push(Ae),ne=Ae=>{Oe&&B.next(Ae),Fe++;let Le=!1;(0,ee.Xf)(z(Ae,vt++)).subscribe((0,se.x)(B,Ze=>{Ve?.(Ze),Oe?Ce(Ze):B.next(Ze)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Fe--;qe.length&&Fe<J;){const Ze=qe.shift();Ye?(0,te.f)(B,Ye,()=>ne(Ze)):ne(Ze)}ie()}catch(Ze){B.error(Ze)}}))};return me.subscribe((0,se.x)(B,Ce,()=>{pt=!0,ie()})),()=>{Ne?.()}}(J,Ve,me,z)))}},3093:(ht,Se,k)=>{k.d(Se,{Q:()=>te});var f=k(7103),ee=k(9360),L=k(8251);function te(se,_e=0){return(0,ee.e)((we,ke)=>{we.subscribe((0,L.x)(ke,me=>(0,f.f)(ke,se,()=>ke.next(me),_e),()=>(0,f.f)(ke,se,()=>ke.complete(),_e),me=>(0,f.f)(ke,se,()=>ke.error(me),_e)))})}},3020:(ht,Se,k)=>{k.d(Se,{B:()=>se});var f=k(4829),ee=k(8645),L=k(305),te=k(9360);function se(we={}){const{connector:ke=(()=>new ee.x),resetOnError:me=!0,resetOnComplete:B=!0,resetOnRefCountZero:z=!0}=we;return J=>{let Ve,Oe,Ye,Ne=0,qe=!1,Fe=!1;const vt=()=>{Oe?.unsubscribe(),Oe=void 0},pt=()=>{vt(),Ve=Ye=void 0,qe=Fe=!1},ie=()=>{const Ce=Ve;pt(),Ce?.unsubscribe()};return(0,te.e)((Ce,ne)=>{Ne++,!Fe&&!qe&&vt();const Ae=Ye=Ye??ke();ne.add(()=>{Ne--,0===Ne&&!Fe&&!qe&&(Oe=_e(ie,z))}),Ae.subscribe(ne),!Ve&&Ne>0&&(Ve=new L.Hp({next:Le=>Ae.next(Le),error:Le=>{Fe=!0,vt(),Oe=_e(pt,me,Le),Ae.error(Le)},complete:()=>{qe=!0,vt(),Oe=_e(pt,B),Ae.complete()}}),(0,f.Xf)(Ce).subscribe(Ve))})(J)}}function _e(we,ke,...me){if(!0===ke)return void we();if(!1===ke)return;const B=new L.Hp({next:()=>{B.unsubscribe(),we()}});return(0,f.Xf)(ke(...me)).subscribe(B)}},5137:(ht,Se,k)=>{k.d(Se,{R:()=>ee});var f=k(9360);function ee(L,te=0){return(0,f.e)((se,_e)=>{_e.add(L.schedule(()=>se.subscribe(_e),te))})}},4664:(ht,Se,k)=>{k.d(Se,{w:()=>te});var f=k(4829),ee=k(9360),L=k(8251);function te(se,_e){return(0,ee.e)((we,ke)=>{let me=null,B=0,z=!1;const J=()=>z&&!me&&ke.complete();we.subscribe((0,L.x)(ke,Ve=>{me?.unsubscribe();let Oe=0;const Ye=B++;(0,f.Xf)(se(Ve,Ye)).subscribe(me=(0,L.x)(ke,Ne=>ke.next(_e?_e(Ve,Ne,Ye,Oe++):Ne),()=>{me=null,J()}))},()=>{z=!0,J()}))})}},9397:(ht,Se,k)=>{k.d(Se,{b:()=>se});var f=k(4674),ee=k(9360),L=k(8251),te=k(2737);function se(_e,we,ke){const me=(0,f.m)(_e)||we||ke?{next:_e,error:we,complete:ke}:_e;return me?(0,ee.e)((B,z)=>{var J;null===(J=me.subscribe)||void 0===J||J.call(me);let Ve=!0;B.subscribe((0,L.x)(z,Oe=>{var Ye;null===(Ye=me.next)||void 0===Ye||Ye.call(me,Oe),z.next(Oe)},()=>{var Oe;Ve=!1,null===(Oe=me.complete)||void 0===Oe||Oe.call(me),z.complete()},Oe=>{var Ye;Ve=!1,null===(Ye=me.error)||void 0===Ye||Ye.call(me,Oe),z.error(Oe)},()=>{var Oe,Ye;Ve&&(null===(Oe=me.unsubscribe)||void 0===Oe||Oe.call(me)),null===(Ye=me.finalize)||void 0===Ye||Ye.call(me)}))}):te.y}},1954:(ht,Se,k)=>{k.d(Se,{o:()=>se});var f=k(7394);class ee extends f.w0{constructor(we,ke){super()}schedule(we,ke=0){return this}}const L={setInterval(_e,we,...ke){const{delegate:me}=L;return me?.setInterval?me.setInterval(_e,we,...ke):setInterval(_e,we,...ke)},clearInterval(_e){const{delegate:we}=L;return(we?.clearInterval||clearInterval)(_e)},delegate:void 0};var te=k(9039);class se extends ee{constructor(we,ke){super(we,ke),this.scheduler=we,this.work=ke,this.pending=!1}schedule(we,ke=0){var me;if(this.closed)return this;this.state=we;const B=this.id,z=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(z,B,ke)),this.pending=!0,this.delay=ke,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(z,this.id,ke),this}requestAsyncId(we,ke,me=0){return L.setInterval(we.flush.bind(we,this),me)}recycleAsyncId(we,ke,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return ke;null!=ke&&L.clearInterval(ke)}execute(we,ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(we,ke);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,ke){let B,me=!1;try{this.work(we)}catch(z){me=!0,B=z||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:we,scheduler:ke}=this,{actions:me}=ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(me,this),null!=we&&(this.id=this.recycleAsyncId(ke,we,null)),this.delay=null,super.unsubscribe()}}}},2631:(ht,Se,k)=>{k.d(Se,{v:()=>L});var f=k(4552);class ee{constructor(se,_e=ee.now){this.schedulerActionCtor=se,this.now=_e}schedule(se,_e=0,we){return new this.schedulerActionCtor(this,se).schedule(we,_e)}}ee.now=f.l.now;class L extends ee{constructor(se,_e=ee.now){super(se,_e),this.actions=[],this._active=!1}flush(se){const{actions:_e}=this;if(this._active)return void _e.push(se);let we;this._active=!0;do{if(we=se.execute(se.state,se.delay))break}while(se=_e.shift());if(this._active=!1,we){for(;se=_e.shift();)se.unsubscribe();throw we}}}},6321:(ht,Se,k)=>{k.d(Se,{z:()=>L});var f=k(1954);const L=new(k(2631).v)(f.o)},4552:(ht,Se,k)=>{k.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(ht,Se,k)=>{k.d(Se,{z:()=>f});const f={setTimeout(ee,L,...te){const{delegate:se}=f;return se?.setTimeout?se.setTimeout(ee,L,...te):setTimeout(ee,L,...te)},clearTimeout(ee){const{delegate:L}=f;return(L?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4971:(ht,Se,k)=>{k.d(Se,{h:()=>ee});const ee=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ht,Se,k)=>{k.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ht,Se,k)=>{k.d(Se,{_6:()=>_e,jO:()=>te,yG:()=>se});var f=k(4674);function L(we){return we[we.length-1]}function te(we){return(0,f.m)(L(we))?we.pop():void 0}function se(we){return function ee(we){return we&&(0,f.m)(we.schedule)}(L(we))?we.pop():void 0}function _e(we,ke){return"number"==typeof L(we)?we.pop():ke}},9039:(ht,Se,k)=>{function f(ee,L){if(ee){const te=ee.indexOf(L);0<=te&&ee.splice(te,1)}}k.d(Se,{P:()=>f})},2306:(ht,Se,k)=>{function f(ee){const te=ee(se=>{Error.call(se),se.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}k.d(Se,{d:()=>f})},1441:(ht,Se,k)=>{k.d(Se,{O:()=>te,x:()=>L});var f=k(2653);let ee=null;function L(se){if(f.config.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),se(),_e){const{errorThrown:we,error:ke}=ee;if(ee=null,we)throw ke}}else se()}function te(se){f.config.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=se)}},7103:(ht,Se,k)=>{function f(ee,L,te,se=0,_e=!1){const we=L.schedule(function(){te(),_e?ee.add(this.schedule(null,se)):this.unsubscribe()},se);if(ee.add(we),!_e)return we}k.d(Se,{f:()=>f})},2737:(ht,Se,k)=>{function f(ee){return ee}k.d(Se,{y:()=>f})},4266:(ht,Se,k)=>{k.d(Se,{z:()=>f});const f=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},5726:(ht,Se,k)=>{k.d(Se,{D:()=>ee});var f=k(4674);function ee(L){return Symbol.asyncIterator&&(0,f.m)(L?.[Symbol.asyncIterator])}},4674:(ht,Se,k)=>{function f(ee){return"function"==typeof ee}k.d(Se,{m:()=>f})},8382:(ht,Se,k)=>{k.d(Se,{c:()=>L});var f=k(4850),ee=k(4674);function L(te){return(0,ee.m)(te[f.L])}},3664:(ht,Se,k)=>{k.d(Se,{T:()=>L});var f=k(4971),ee=k(4674);function L(te){return(0,ee.m)(te?.[f.h])}},4026:(ht,Se,k)=>{k.d(Se,{t:()=>ee});var f=k(4674);function ee(L){return(0,f.m)(L?.then)}},541:(ht,Se,k)=>{k.d(Se,{L:()=>te,Q:()=>L});var f=k(7582),ee=k(4674);function L(se){return(0,f.FC)(this,arguments,function*(){const we=se.getReader();try{for(;;){const{value:ke,done:me}=yield(0,f.qq)(we.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ke)}}finally{we.releaseLock()}})}function te(se){return(0,ee.m)(se?.getReader)}},9360:(ht,Se,k)=>{k.d(Se,{A:()=>ee,e:()=>L});var f=k(4674);function ee(te){return(0,f.m)(te?.lift)}function L(te){return se=>{if(ee(se))return se.lift(function(_e){try{return te(_e,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ht,Se,k)=>{function f(){}k.d(Se,{Z:()=>f})},8407:(ht,Se,k)=>{k.d(Se,{U:()=>L,z:()=>ee});var f=k(2737);function ee(...te){return L(te)}function L(te){return 0===te.length?f.y:1===te.length?te[0]:function(_e){return te.reduce((we,ke)=>ke(we),_e)}}},3894:(ht,Se,k)=>{k.d(Se,{h:()=>L});var f=k(2653),ee=k(7599);function L(te){ee.z.setTimeout(()=>{const{onUnhandledError:se}=f.config;if(!se)throw te;se(te)})}},9853:(ht,Se,k)=>{function f(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Se,{z:()=>f})},5879:(ht,Se,k)=>{k.d(Se,{$8M:()=>Zc,$WT:()=>vo,$Z:()=>$w,AFp:()=>Nb,AaK:()=>J,CRH:()=>eS,EJc:()=>hS,F4k:()=>NT,FYo:()=>zg,FiY:()=>Sd,GfV:()=>_a,Gpc:()=>Ye,HDt:()=>kC,JOm:()=>Ai,LFG:()=>bt,Lbi:()=>Tw,Lck:()=>AD,MMx:()=>rc,NdJ:()=>mI,Ojb:()=>qP,OlP:()=>yn,P3R:()=>_w,PXZ:()=>e0,Q6J:()=>dI,QGY:()=>gI,Qsj:()=>$b,R0b:()=>un,RDi:()=>gf,Rgc:()=>op,SBq:()=>Gg,Sil:()=>mx,Suo:()=>bC,TTD:()=>La,TgZ:()=>qf,VuI:()=>Hx,X6Q:()=>TS,XFs:()=>mt,Xpm:()=>Ic,Xq5:()=>im,Xts:()=>If,Y36:()=>kf,YKP:()=>SD,Yjl:()=>Ql,Yz7:()=>Nt,Z0I:()=>ln,ZZ4:()=>dh,_Bn:()=>rp,_UZ:()=>_m,_c5:()=>Ux,_uU:()=>zT,aQg:()=>s0,c2e:()=>NC,cJS:()=>Sn,cg1:()=>Dm,dDg:()=>du,dqk:()=>an,eFA:()=>BC,eJc:()=>zm,ekj:()=>Im,eoX:()=>mp,f3M:()=>xt,g9A:()=>Ey,h0i:()=>Ca,hGG:()=>QC,iGM:()=>JD,ifc:()=>Re,ip1:()=>fp,jDz:()=>aC,kL8:()=>nD,lG2:()=>Aa,lqb:()=>tu,lri:()=>Zm,n5z:()=>is,oAB:()=>Iu,q4F:()=>Mf,qFp:()=>qx,qLn:()=>xf,qOj:()=>Xw,qZA:()=>mm,rWj:()=>dc,rg0:()=>Lc,sBO:()=>SS,s_b:()=>Ps,soG:()=>qv,tb:()=>hc,tp0:()=>tf,uIk:()=>CT,vHH:()=>ie,vpe:()=>au,wAp:()=>iu,xp6:()=>Xb,z2F:()=>uh,zSh:()=>Cw,zs3:()=>No});var f=k(8645),ee=k(7394),L=k(5619),te=k(5592),se=k(3019),_e=k(2096),we=k(3020),ke=k(4664),me=k(3997);function B(s){for(let a in s)if(s[a]===B)return a;throw Error("Could not find renamed property on target object.")}function z(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function J(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(J).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ve(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Oe=B({__forward_ref__:B});function Ye(s){return s.__forward_ref__=Ye,s.toString=function(){return J(this())},s}function Ne(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(Oe)&&s.__forward_ref__===Ye}function Fe(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class ie extends Error{constructor(a,u){super(function Ce(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,u)),this.code=a}}function ne(s){return"string"==typeof s?s:null==s?"":String(s)}function It(s,a){throw new ie(-201,!1)}function st(s,a){null==s&&function Ge(s,a,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${a} <=Actual]`))}(a,s,null,"!=")}function Nt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Sn(s){return{providers:s.providers||[],imports:s.imports||[]}}function fr(s){return Hr(s,Ti)||Hr(s,go)}function ln(s){return null!==fr(s)}function Hr(s,a){return s.hasOwnProperty(a)?s[a]:null}function po(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty(mu))?s[Di]:null}const Ti=B({\u0275prov:B}),Di=B({\u0275inj:B}),go=B({ngInjectableDef:B}),mu=B({ngInjectorDef:B});var mt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(mt||{});let Gt;function gn(s){const a=Gt;return Gt=s,a}function Rn(s,a,u){const l=fr(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&mt.Optional?null:void 0!==a?a:void It(J(s))}const an=globalThis,ui={},Yn="__NG_DI_FLAG__",Ri="ngTempTokenPath",$=/\n/gm,Z="__source";let Te;function et(s){const a=Te;return Te=s,a}function St(s,a=mt.Default){if(void 0===Te)throw new ie(-203,!1);return null===Te?Rn(s,void 0,a):Te.get(s,a&mt.Optional?null:void 0,a)}function bt(s,a=mt.Default){return(function Pt(){return Gt}()||St)(Ne(s),a)}function xt(s,a=mt.Default){return bt(s,Bn(a))}function Bn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Kt(s){const a=[];for(let u=0;u<s.length;u++){const l=Ne(s[u]);if(Array.isArray(l)){if(0===l.length)throw new ie(900,!1);let d,g=mt.Default;for(let v=0;v<l.length;v++){const C=l[v],T=ps(C);"number"==typeof T?-1===T?d=C.token:g|=T:d=C}a.push(bt(d,g))}else a.push(bt(l))}return a}function sr(s,a){return s[Yn]=a,s.prototype[Yn]=a,s}function ps(s){return s[Yn]}function fe(s){return{toString:s}.toString()}var re=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(re||{}),Re=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Re||{});const at={},Ke=[],kt=B({\u0275cmp:B}),nn=B({\u0275dir:B}),Qn=B({\u0275pipe:B}),Xn=B({\u0275mod:B}),Or=B({\u0275fac:B}),gs=B({__NG_ELEMENT_ID__:B}),Da=B({__NG_ENV_ID__:B});function ql(s,a,u){let l=s.length;for(;;){const d=s.indexOf(a,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=a.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}u=d+1}}function yu(s,a,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const g=u[l++],v=u[l++],C=u[l++];s.setAttribute(a,v,C,g)}else{const g=d,v=u[++l];ki(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),l++}}return l}function Wl(s){return 3===s||4===s||6===s}function ki(s){return 64===s.charCodeAt(0)}function Go(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let l=0;l<a.length;l++){const d=a[l];"number"==typeof d?u=d:0===u||wc(s,u,d,null,-1===u||2===u?a[++l]:null)}}return s}function wc(s,a,u,l,d){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,u),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}const Zl="ng-template";function Jn(s,a,u){let l=0,d=!0;for(;l<s.length;){let g=s[l++];if("string"==typeof g&&d){const v=s[l++];if(u&&"class"===g&&-1!==ql(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;l<s.length&&"string"==typeof(g=s[l++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function vu(s){return 4===s.type&&s.value!==Zl}function P_(s,a,u){return a===(4!==s.type||u?s.value:Zl)}function Gp(s,a,u){let l=4;const d=s.attrs||[],g=function M_(s){for(let a=0;a<s.length;a++)if(Wl(s[a]))return a;return s.length}(d);let v=!1;for(let C=0;C<a.length;C++){const T=a[C];if("number"!=typeof T){if(!v)if(4&l){if(l=2|1&l,""!==T&&!P_(s,T,u)||""===T&&1===a.length){if(ci(l))return!1;v=!0}}else{const P=8&l?T:a[++C];if(8&l&&null!==s.attrs){if(!Jn(s.attrs,P,u)){if(ci(l))return!1;v=!0}continue}const V=Sa(8&l?"class":T,d,vu(s),u);if(-1===V){if(ci(l))return!1;v=!0;continue}if(""!==P){let W;W=V>g?"":d[V+1].toLowerCase();const Q=8&l?W:null;if(Q&&-1!==ql(Q,P,0)||2&l&&P!==W){if(ci(l))return!1;v=!0}}}}else{if(!v&&!ci(l)&&!ci(T))return!1;if(v&&ci(T))continue;v=!1,l=T|1&l}}return ci(l)||v}function ci(s){return 0==(1&s)}function Sa(s,a,u,l){if(null===a)return-1;let d=0;if(l||!u){let g=!1;for(;d<a.length;){const v=a[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=a[++d];for(;"string"==typeof C;)C=a[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function zo(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===a)return u;u++}return-1}(a,s)}function Kl(s,a,u=!1){for(let l=0;l<a.length;l++)if(Gp(s,a[l],u))return!0;return!1}function wu(s,a){return s?":not("+a.trim()+")":a}function Th(s){let a=s[0],u=1,l=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ci(v)&&(a+=wu(g,d),d=""),l=v,g=g||!ci(l);u++}return""!==d&&(a+=wu(g,d)),a}function Ic(s){return fe(()=>{const a=Xl(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===re.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Re.Emulated,styles:s.styles||Ke,_:null,schemas:s.schemas||null,tView:null,id:""};qp(u);const l=s.dependencies;return u.directiveDefs=Cu(l,!1),u.pipeDefs=Cu(l,!0),u.id=function Fi(s){let a=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)a=Math.imul(31,a)+d.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(u),u})}function Yl(s){return Yt(s)||qn(s)}function Cc(s){return null!==s}function Iu(s){return fe(()=>({type:s.type,bootstrap:s.bootstrap||Ke,declarations:s.declarations||Ke,imports:s.imports||Ke,exports:s.exports||Ke,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ec(s,a){if(null==s)return at;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=l,a&&(a[d]=g)}return u}function Aa(s){return fe(()=>{const a=Xl(s);return qp(a),a})}function Ql(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[kt]||null}function qn(s){return s[nn]||null}function qr(s){return s[Qn]||null}function vo(s){const a=Yt(s)||qn(s)||qr(s);return null!==a&&a.standalone}function Wr(s,a){const u=s[Xn]||null;if(!u&&!0===a)throw new Error(`Type ${J(s)} does not have '\u0275mod' property.`);return u}function Xl(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||at,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Ke,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ec(s.inputs,a),outputs:Ec(s.outputs)}}function qp(s){s.features?.forEach(a=>a(s))}function Cu(s,a){if(!s)return null;const u=a?qr:Yl;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(Cc)}const Nn=0,nt=1,Ct=2,An=3,Zr=4,qo=5,xr=6,Eu=7,kn=8,$s=9,Pa=10,Dt=11,Rr=12,Wp=13,Gs=14,Pn=15,Jl=16,Wo=17,_r=18,zs=19,qs=20,wo=21,Ui=22,Tc=23,Zo=24,Ft=25,Ma=1,Dc=2,yr=7,vr=9,Nr=11;function wr(s){return Array.isArray(s)&&"object"==typeof s[Ma]}function Kr(s){return Array.isArray(s)&&!0===s[Ma]}function Sc(s){return 0!=(4&s.flags)}function Yo(s){return s.componentOffset>-1}function Si(s){return 1==(1&s.flags)}function li(s){return!!s.template}function Oa(s){return 0!=(512&s[Ct])}function Qo(s,a){return s.hasOwnProperty(Or)?s[Or]:null}let sd=an.WeakRef??class Oc{constructor(a){this.ref=a}deref(){return this.ref}},xc=0,ms=null,Xo=!1;function Wn(s){const a=ms;return ms=s,a}class Xp{constructor(){this.id=xc++,this.ref=function Na(s){return new sd(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,u]of this.producers){const l=u.producerNode.deref();if(null!=l&&u.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(a),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=Xo;Xo=!0;try{for(const[u,l]of this.consumers){const d=l.consumerNode.deref();null!=d&&d.trackingVersion===l.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{Xo=a}}producerAccessed(){if(Xo)throw new Error("");if(null===ms)return;let a=ms.producers.get(this.id);void 0===a?(a={consumerNode:ms.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ms.trackingVersion},ms.producers.set(this.id,a),this.consumers.set(ms.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=ms.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ms?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let kc=null;function Lc(s){const a=Wn(null);try{return s()}finally{Wn(a)}}const Nh=()=>{};class kh extends Xp{constructor(a,u,l){super(),this.watch=a,this.schedule=u,this.dirty=!1,this.cleanupFn=Nh,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=Wn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Nh,this.watch(this.registerOnCleanup)}finally{Wn(a)}}cleanup(){this.cleanupFn()}}class tg{constructor(a,u,l){this.previousValue=a,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function La(){return Lh}function Lh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Su),Jo}function Jo(){const s=Fh(this),a=s?.current;if(a){const u=s.previous;if(u===at)s.previous=a;else for(let l in a)u[l]=a[l];s.current=null,this.ngOnChanges(a)}}function Su(s,a,u,l){const d=this.declaredInputs[u],g=Fh(s)||function Fc(s,a){return s[ad]=a}(s,{previous:at,current:null}),v=g.current||(g.current={}),C=g.previous,T=C[d];v[d]=new tg(T&&T.currentValue,a,C===at),s[l]=a}La.ngInherit=!0;const ad="__ngSimpleChanges__";function Fh(s){return s[ad]||null}const Vi=function(s,a,u){};function vn(s){for(;Array.isArray(s);)s=s[Nn];return s}function Xr(s,a){return vn(a[s.index])}function Uh(s,a){return s.data[a]}function Zn(s,a){const u=a[s];return wr(u)?u:u[Nn]}function Eo(s,a){return null==a?null:s[a]}function ld(s){s[Wo]=0}function ig(s){1024&s[Ct]||(s[Ct]|=1024,ta(s,1))}function Bh(s){1024&s[Ct]&&(s[Ct]&=-1025,ta(s,-1))}function ta(s,a){let u=s[An];if(null===u)return;u[qo]+=a;let l=u;for(u=u[An];null!==u&&(1===a&&1===l[qo]||-1===a&&0===l[qo]);)u[qo]+=a,l=u,u=u[An]}const Tt={lFrame:qh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function na(){return Tt.bindingsEnabled}function ye(){return Tt.lFrame.lView}function rn(){return Tt.lFrame.tView}function or(){let s=Pu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Pu(){return Tt.lFrame.currentTNode}function Qi(s,a){const u=Tt.lFrame;u.currentTNode=s,u.isParent=a}function Ir(){return Tt.lFrame.isParent}function Zs(){return Tt.lFrame.bindingIndex++}function yd(s,a){const u=Tt.lFrame;u.bindingIndex=u.bindingRootIndex=s,ug(a)}function ug(s){Tt.lFrame.currentDirectiveIndex=s}function Gh(){return Tt.lFrame.currentQueryIndex}function vd(s){Tt.lFrame.currentQueryIndex=s}function L_(s){const a=s[nt];return 2===a.type?a.declTNode:1===a.type?s[xr]:null}function wd(s,a,u){if(u&mt.SkipSelf){let d=a,g=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=L_(g),null===d||(g=g[Gs],10&d.type))););if(null===d)return!1;a=d,s=g}const l=Tt.lFrame=ja();return l.currentTNode=a,l.lView=s,!0}function zh(s){const a=ja(),u=s[nt];Tt.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function ja(){const s=Tt.lFrame,a=null===s?null:s.child;return null===a?qh(s):a}function qh(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Id(){const s=Tt.lFrame;return Tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const cg=Id;function Hc(){const s=Id();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function hi(){return Tt.lFrame.selectedIndex}function bo(s){Tt.lFrame.selectedIndex=s}function Hn(){const s=Tt.lFrame;return Uh(s.tView,s.selectedIndex)}let er=!0;function _s(){return er}function Er(s){er=s}function To(s,a){for(let u=a.directiveStart,l=a.directiveEnd;u<l;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:P,ngOnDestroy:x}=g;v&&(s.contentHooks??=[]).push(-u,v),C&&((s.contentHooks??=[]).push(u,C),(s.contentCheckHooks??=[]).push(u,C)),T&&(s.viewHooks??=[]).push(-u,T),P&&((s.viewHooks??=[]).push(u,P),(s.viewCheckHooks??=[]).push(u,P)),null!=x&&(s.destroyHooks??=[]).push(u,x)}}function Et(s,a,u){ar(s,a,3,u)}function Ks(s,a,u,l){(3&s[Ct])===u&&ar(s,a,u,l)}function On(s,a){let u=s[Ct];(3&u)===a&&(u&=8191,u+=1,s[Ct]=u)}function ar(s,a,u,l){const g=l??-1,v=a.length-1;let C=0;for(let T=void 0!==l?65535&s[Wo]:0;T<v;T++)if("number"==typeof a[T+1]){if(C=a[T],null!=l&&C>=l)break}else a[T]<0&&(s[Wo]+=65536),(C<g||-1==g)&&(oa(s,u,a,T),s[Wo]=(4294901760&s[Wo])+T+2),T++}function tr(s,a){Vi(4,s,a);const u=Wn(null);try{a.call(s)}finally{Wn(u),Vi(5,s,a)}}function oa(s,a,u,l){const d=u[l]<0,g=u[l+1],C=s[d?-u[l]:u[l]];d?s[Ct]>>13<s[Wo]>>16&&(3&s[Ct])===a&&(s[Ct]+=8192,tr(C,g)):tr(C,g)}const kr=-1;class Lr{constructor(a,u,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function xu(s){return s!==kr}function ur(s){return 32767&s}function fn(s,a){let u=function K(s){return s>>16}(s),l=a;for(;u>0;)l=l[Gs],u--;return l}let N=!0;function cr(s){const a=N;return N=s,a}const Zh=255,Ga=5;let bd=0;const Ji={};function zc(s,a){const u=qc(s,a);if(-1!==u)return u;const l=a[nt];l.firstCreatePass&&(s.injectorIndex=a.length,es(l.data,s),es(a,null),es(l.blueprint,null));const d=ts(s,a),g=s.injectorIndex;if(xu(d)){const v=ur(d),C=fn(d,a),T=C[nt].data;for(let P=0;P<8;P++)a[g+P]=C[v+P]|T[v+P]}return a[g+8]=d,g}function es(s,a){s.push(0,0,0,0,0,0,0,0,a)}function qc(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function ts(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=a;for(;null!==d;){if(l=qa(d),null===l)return kr;if(u++,d=d[Gs],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return kr}function Ru(s,a,u){!function Kh(s,a,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(gs)&&(l=u[gs]),null==l&&(l=u[gs]=bd++);const d=l&Zh;a.data[s+(d>>Ga)]|=1<<d}(s,a,u)}function So(s,a,u){if(u&mt.Optional||void 0!==s)return s;It()}function Ao(s,a,u,l){if(u&mt.Optional&&void 0===l&&(l=null),!(u&(mt.Self|mt.Host))){const d=s[$s],g=gn(void 0);try{return d?d.get(a,l,u&mt.Optional):Rn(a,l,u&mt.Optional)}finally{gn(g)}}return So(l,0,u)}function Td(s,a,u,l=mt.Default,d){if(null!==s){if(2048&a[Ct]&&!(l&mt.Self)){const v=function Po(s,a,u,l,d){let g=s,v=a;for(;null!==g&&null!==v&&2048&v[Ct]&&!(512&v[Ct]);){const C=Nu(g,v,u,l|mt.Self,Ji);if(C!==Ji)return C;let T=g.parent;if(!T){const P=v[qs];if(P){const x=P.get(u,Ji,l);if(x!==Ji)return x}T=qa(v),v=v[Gs]}g=T}return d}(s,a,u,l,Ji);if(v!==Ji)return v}const g=Nu(s,a,u,l,Ji);if(g!==Ji)return g}return Ao(a,u,l,d)}function Nu(s,a,u,l,d){const g=function vs(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(gs)?s[gs]:void 0;return"number"==typeof a?a>=0?a&Zh:rs:a}(u);if("function"==typeof g){if(!wd(a,s,l))return l&mt.Host?So(d,0,l):Ao(a,u,l,d);try{let v;if(v=g(l),null!=v||l&mt.Optional)return v;It()}finally{cg()}}else if("number"==typeof g){let v=null,C=qc(s,a),T=kr,P=l&mt.Host?a[Pn][xr]:null;for((-1===C||l&mt.SkipSelf)&&(T=-1===C?ts(s,a):a[C+8],T!==kr&&ku(l,!1)?(v=a[nt],C=ur(T),a=fn(T,a)):C=-1);-1!==C;){const x=a[nt];if(nr(g,C,x.data)){const V=br(C,a,u,v,l,P);if(V!==Ji)return V}T=a[C+8],T!==kr&&ku(l,a[nt].data[C+8]===P)&&nr(g,C,a)?(v=x,C=ur(T),a=fn(T,a)):C=-1}}return d}function br(s,a,u,l,d,g){const v=a[nt],C=v.data[s+8],x=ua(C,v,u,null==l?Yo(C)&&N:l!=v&&0!=(3&C.type),d&mt.Host&&g===C);return null!==x?ns(a,v,x,C):Ji}function ua(s,a,u,l,d){const g=s.providerIndexes,v=a.data,C=1048575&g,T=s.directiveStart,x=g>>20,W=d?C+x:s.directiveEnd;for(let Q=l?C:C+x;Q<W;Q++){const Ie=v[Q];if(Q<T&&u===Ie||Q>=T&&Ie.type===u)return Q}if(d){const Q=v[T];if(Q&&li(Q)&&Q.type===u)return T}return null}function ns(s,a,u,l){let d=s[u];const g=a.data;if(function $a(s){return s instanceof Lr}(d)){const v=d;v.resolving&&function Le(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ne(s)}(g[u]));const C=cr(v.canSeeViewProviders);v.resolving=!0;const P=v.injectImpl?gn(v.injectImpl):null;wd(s,l,mt.Default);try{d=s[u]=v.factory(void 0,g,s,l),a.firstCreatePass&&u>=l.directiveStart&&function ft(s,a,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=a.type.prototype;if(l){const v=Lh(a);(u.preOrderHooks??=[]).push(s,v),(u.preOrderCheckHooks??=[]).push(s,v)}d&&(u.preOrderHooks??=[]).push(0-s,d),g&&((u.preOrderHooks??=[]).push(s,g),(u.preOrderCheckHooks??=[]).push(s,g))}(u,g[u],a)}finally{null!==P&&gn(P),cr(C),v.resolving=!1,cg()}}return d}function nr(s,a,u){return!!(u[a+(s>>Ga)]&1<<s)}function ku(s,a){return!(s&mt.Self||s&mt.Host&&a)}class wn{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,l){return Td(this._tNode,this._lView,a,Bn(l),u)}}function rs(){return new wn(or(),ye())}function is(s){return fe(()=>{const a=s.prototype.constructor,u=a[Or]||za(a),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[Or]||za(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function za(s){return qe(s)?()=>{const a=za(Ne(s));return a&&a()}:Qo(s)}function qa(s){const a=s[nt],u=a.type;return 2===u?a.declTNode:1===u?s[xr]:null}function Zc(s){return function Yh(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const g=u[d];if(Wl(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(g===a)return u[d+1];d+=2}}}return null}(or(),s)}const Wa="__parameters__";function ca(s,a,u){return fe(()=>{const l=function Is(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(a);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return C.annotation=v,C;function C(T,P,x){const V=T.hasOwnProperty(Wa)?T[Wa]:Object.defineProperty(T,Wa,{value:[]})[Wa];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(v),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Y(s,a){s.forEach(u=>Array.isArray(u)?Y(u,a):a(u))}function pe(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function $e(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function sn(s,a,u){let l=bs(s,a);return l>=0?s[1|l]=u:(l=~l,function Mt(s,a,u,l){let d=s.length;if(d==a)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>a;)s[d]=s[d-2],d--;s[a]=u,s[a+1]=l}}(s,l,a,u)),l}function Es(s,a){const u=bs(s,a);if(u>=0)return s[1|u]}function bs(s,a){return function ji(s,a,u){let l=0,d=s.length>>u;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<u];if(a===v)return g<<u;v>a?d=g:l=g+1}return~(d<<u)}(s,a,1)}const Sd=sr(ca("Optional"),8),tf=sr(ca("SkipSelf"),4);function af(s){return 128==(128&s.flags)}var Ai=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Ai||{});const fa=new Map;let xd=0;const qt="__ngContext__";function Fr(s,a){wr(a)?(s[qt]=a[zs],function os(s){fa.set(s[zs],s)}(a)):s[qt]=a}let Xa;function Nd(s,a){return Xa(s,a)}function Oo(s){const a=s[An];return Kr(a)?a[An]:a}function J_(s){return ty(s[Rr])}function ey(s){return ty(s[Zr])}function ty(s){for(;null!==s&&!Kr(s);)s=s[Zr];return s}function w(s,a,u,l,d){if(null!=l){let g,v=!1;Kr(l)?g=l:wr(l)&&(v=!0,l=l[Nn]);const C=vn(l);0===s&&null!==u?null==d?Dg(a,u,C):as(a,u,C,d||null,!0):1===s&&null!==u?as(a,u,C,d||null,!0):2===s?function Ld(s,a,u){const l=$u(s,a);l&&function Hu(s,a,u,l){s.removeChild(a,u,l)}(s,l,a,u)}(a,C,v):3===s&&a.destroyNode(C),null!=g&&function PP(s,a,u,l,d){const g=u[yr];g!==vn(u)&&w(a,s,l,g,d);for(let C=Nr;C<u.length;C++){const T=u[C];Ja(T[nt],T,s,a,l,g)}}(a,s,g,u,d)}}function A(s,a,u){return s.createElement(a,u)}function ut(s,a){const u=s[vr],l=u.indexOf(a);Bh(a),u.splice(l,1)}function Ot(s,a){if(s.length<=Nr)return;const u=Nr+a,l=s[u];if(l){const d=l[Jl];null!==d&&d!==s&&ut(d,l),a>0&&(s[u-1][Zr]=l[Zr]);const g=$e(s,Nr+a);!function O(s,a){Ja(s,a,a[Dt],2,null,null),a[Nn]=null,a[xr]=null}(l[nt],l);const v=g[_r];null!==v&&v.detachView(g[nt]),l[An]=null,l[Zr]=null,l[Ct]&=-129}return l}function Mi(s,a){if(!(256&a[Ct])){const u=a[Dt];a[Tc]?.destroy(),a[Zo]?.destroy(),u.destroyNode&&Ja(s,a,u,3,null,null),function ue(s){let a=s[Rr];if(!a)return sl(s[nt],s);for(;a;){let u=null;if(wr(a))u=a[Rr];else{const l=a[Nr];l&&(u=l)}if(!u){for(;a&&!a[Zr]&&a!==s;)wr(a)&&sl(a[nt],a),a=a[An];null===a&&(a=s),wr(a)&&sl(a[nt],a),u=a&&a[Zr]}a=u}}(a)}}function sl(s,a){if(!(256&a[Ct])){a[Ct]&=-129,a[Ct]|=256,function ff(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=a[u[l]];if(!(d instanceof Lr)){const g=u[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=d[g[v]],T=g[v+1];Vi(4,C,T);try{T.call(C)}finally{Vi(5,C,T)}}else{Vi(4,d,g);try{g.call(d)}finally{Vi(5,d,g)}}}}}(s,a),function hf(s,a){const u=s.cleanup,l=a[Eu];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?l[v]():l[-v].unsubscribe(),g+=2}else u[g].call(l[u[g+1]]);null!==l&&(a[Eu]=null);const d=a[wo];if(null!==d){a[wo]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(s,a),1===a[nt].type&&a[Dt].destroy();const u=a[Jl];if(null!==u&&Kr(a[An])){u!==a[An]&&ut(u,a);const l=a[_r];null!==l&&l.detachView(s)}!function Y_(s){fa.delete(s[zs])}(a)}}function ga(s,a,u){return function ju(s,a,u){let l=a;for(;null!==l&&40&l.type;)l=(a=l).parent;if(null===l)return u[Nn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:g}=s.data[l.directiveStart+d];if(g===Re.None||g===Re.Emulated)return null}return Xr(l,u)}}(s,a.parent,u)}function as(s,a,u,l,d){s.insertBefore(a,u,l,d)}function Dg(s,a,u){s.appendChild(a,u)}function kd(s,a,u,l,d){null!==l?as(s,a,u,l,d):Dg(s,a,u)}function $u(s,a){return s.parentNode(a)}let rw,Gu,cy,ry=function cb(s,a,u){return 40&s.type?Xr(s,u):null};function sy(s,a,u,l){const d=ga(s,l,a),g=a[Dt],C=function ny(s,a,u){return ry(s,a,u)}(l.parent||a[xr],l,a);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)kd(g,d,u[T],C,!1);else kd(g,d,u,C,!1);void 0!==rw&&rw(g,l,a,u,d)}function ol(s,a){if(null!==a){const u=a.type;if(3&u)return Xr(a,s);if(4&u)return oy(-1,s[a.index]);if(8&u){const l=a.child;if(null!==l)return ol(s,l);{const d=s[a.index];return Kr(d)?oy(-1,d):vn(d)}}if(32&u)return Nd(a,s)()||vn(s[a.index]);{const l=iw(s,a);return null!==l?Array.isArray(l)?l[0]:ol(Oo(s[Pn]),l):ol(s,a.next)}}return null}function iw(s,a){return null!==a?s[Pn][xr].projection[a.projection]:null}function oy(s,a){const u=Nr+s+1;if(u<a.length){const l=a[u],d=l[nt].firstChild;if(null!==d)return ol(l,d)}return a[yr]}function pf(s,a,u,l,d,g,v){for(;null!=u;){const C=l[u.index],T=u.type;if(v&&0===a&&(C&&Fr(vn(C),l),u.flags|=2),32!=(32&u.flags))if(8&T)pf(s,a,u.child,l,d,g,!1),w(a,s,d,C,g);else if(32&T){const P=Nd(u,l);let x;for(;x=P();)w(a,s,d,x,g);w(a,s,d,C,g)}else 16&T?ay(s,a,l,u,d,g):w(a,s,d,C,g);u=v?u.projectionNext:u.next}}function Ja(s,a,u,l,d,g){pf(u,l,s.firstChild,a,d,g,!1)}function ay(s,a,u,l,d,g){const v=u[Pn],T=v[xr].projection[l.projection];if(Array.isArray(T))for(let P=0;P<T.length;P++)w(a,s,d,T[P],g);else{let P=T;const x=v[An];af(l)&&(P.flags|=128),pf(s,a,P,x,d,g,!0)}}function hb(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function fb(s,a,u){const{mergedAttrs:l,classes:d,styles:g}=u;null!==l&&yu(s,a,l),null!==d&&hb(s,a,d),null!==g&&function db(s,a,u){s.setAttribute(a,"style",u)}(s,a,g)}function gf(s){Gu=s}function gb(s){return function cw(){if(void 0===cy&&(cy=null,an.trustedTypes))try{cy=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return cy}()?.createScriptURL(s)||s}class Pg{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function ul(s){return s instanceof Pg?s.changingThisBreaksApplicationSecurity:s}function Cn(s,a){const u=function ma(s){return s instanceof Pg&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${pt})`)}return u===a}const vb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Vd=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Vd||{});function mw(s){const a=wf();return a?a.sanitize(Vd.URL,s)||"":Cn(s,"URL")?ul(s):function vf(s){return(s=String(s)).match(vb)?s:"unsafe:"+s}(ne(s))}function py(s){const a=wf();if(a)return gb(a.sanitize(Vd.RESOURCE_URL,s)||"");if(Cn(s,"ResourceURL"))return gb(ul(s));throw new ie(904,!1)}function _w(s,a,u){return function jP(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?py:mw}(a,u)(s)}function wf(){const s=ye();return s&&s[Pa].sanitizer}class yn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Nt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const If=new yn("ENVIRONMENT_INITIALIZER"),gy=new yn("INJECTOR",-1),Db=new yn("INJECTOR_DEF_TYPES");class vw{get(a,u=ui){if(u===ui){const l=new Error(`NullInjectorError: No provider for ${J(a)}!`);throw l.name="NullInjectorError",l}return u}}function HP(...s){return{\u0275providers:Ab(0,s),\u0275fromNgModule:!0}}function Ab(s,...a){const u=[],l=new Set;let d;const g=v=>{u.push(v)};return Y(a,v=>{const C=v;my(C,g,[],l)&&(d||=[],d.push(C))}),void 0!==d&&Pb(d,g),u}function Pb(s,a){for(let u=0;u<s.length;u++){const{ngModule:l,providers:d}=s[u];ww(d,g=>{a(g,l)})}}function my(s,a,u,l){if(!(s=Ne(s)))return!1;let d=null,g=po(s);const v=!g&&Yt(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const T=s.ngModule;if(g=po(T),!g)return!1;d=T}const C=l.has(d);if(v){if(C)return!1;if(l.add(d),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const P of T)my(P,a,u,l)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let P;l.add(d);try{Y(g.imports,x=>{my(x,a,u,l)&&(P||=[],P.push(x))})}finally{}void 0!==P&&Pb(P,a)}if(!C){const P=Qo(d)||(()=>new d);a({provide:d,useFactory:P,deps:Ke},d),a({provide:Db,useValue:d,multi:!0},d),a({provide:If,useValue:()=>bt(d),multi:!0},d)}const T=g.providers;if(null!=T&&!C){const P=s;ww(T,x=>{a(x,P)})}}}return d!==s&&void 0!==s.providers}function ww(s,a){for(let u of s)Fe(u)&&(u=u.\u0275providers),Array.isArray(u)?ww(u,a):a(u)}const Mb=B({provide:String,useValue:B});function _y(s){return null!==s&&"object"==typeof s&&Mb in s}function eu(s){return"function"==typeof s}const Cw=new yn("Set Injector scope."),yy={},GP={};let Rg;function Ng(){return void 0===Rg&&(Rg=new vw),Rg}class tu{}class vy extends tu{get destroyed(){return this._destroyed}constructor(a,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bw(a,v=>this.processProvider(v)),this.records.set(gy,Xs(void 0,this)),d.has("environment")&&this.records.set(tu,Xs(void 0,this));const g=this.records.get(Cw);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Db.multi,Ke,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of a)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const u=et(this),l=gn(void 0);try{return a()}finally{et(u),gn(l)}}get(a,u=ui,l=mt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Da))return a[Da](this);l=Bn(l);const g=et(this),v=gn(void 0);try{if(!(l&mt.SkipSelf)){let T=this.records.get(a);if(void 0===T){const P=function zP(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(a)&&fr(a);T=P&&this.injectableDefInScope(P)?Xs(wy(a),yy):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(l&mt.Self?Ng():this.parent).get(a,u=l&mt.Optional&&u===ui?null:u)}catch(C){if("NullInjectorError"===C.name){if((C[Ri]=C[Ri]||[]).unshift(J(a)),g)throw C;return function Hs(s,a,u,l){const d=s[Ri];throw a[Z]&&d.unshift(a[Z]),s.message=function _u(s,a,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=J(a);if(Array.isArray(a))d=a.map(J).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):J(C)))}d=`{${g.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace($,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[Ri]=null,s}(C,a,"R3InjectorError",this.source)}throw C}finally{gn(v),et(g)}}resolveInjectorInitializers(){const a=et(this),u=gn(void 0);try{const d=this.get(If.multi,Ke,mt.Self);for(const g of d)g()}finally{et(a),gn(u)}}toString(){const a=[],u=this.records;for(const l of u.keys())a.push(J(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(a){let u=eu(a=Ne(a))?a:Ne(a&&a.provide);const l=function Rb(s){return _y(s)?Xs(void 0,s.useValue):Xs(Ew(s),yy)}(a);if(eu(a)||!0!==a.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Xs(void 0,yy,!0),d.factory=()=>Kt(d.multi),this.records.set(u,d)),u=a,d.multi.push(a)}this.records.set(u,l)}hydrate(a,u){return u.value===yy&&(u.value=GP,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Cy(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Ne(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(a){const u=this._onDestroyHooks.indexOf(a);-1!==u&&this._onDestroyHooks.splice(u,1)}}function wy(s){const a=fr(s),u=null!==a?a.factory:Qo(s);if(null!==u)return u;if(s instanceof yn)throw new ie(204,!1);if(s instanceof Function)return function ll(s){const a=s.length;if(a>0)throw function je(s,a){const u=[];for(let l=0;l<s;l++)u.push(a);return u}(a,"?"),new ie(204,!1);const u=function bi(s){return s&&(s[Ti]||s[go])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ie(204,!1)}function Ew(s,a,u){let l;if(eu(s)){const d=Ne(s);return Qo(d)||wy(d)}if(_y(s))l=()=>Ne(s.useValue);else if(function Iw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Kt(s.deps||[]));else if(function Ob(s){return!(!s||!s.useExisting)}(s))l=()=>bt(Ne(s.useExisting));else{const d=Ne(s&&(s.useClass||s.provide));if(!function Iy(s){return!!s.deps}(s))return Qo(d)||wy(d);l=()=>new d(...Kt(s.deps))}return l}function Xs(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function bw(s,a){for(const u of s)Array.isArray(u)?bw(u,a):u&&Fe(u)?bw(u.\u0275providers,a):a(u)}const Nb=new yn("AppId",{providedIn:"root",factory:()=>kb}),kb="ng",Ey=new yn("Platform Initializer"),Tw=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qP=new yn("CSP nonce",{providedIn:"root",factory:()=>function Qs(){if(void 0!==Gu)return Gu;if(typeof document<"u")return document;throw new ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Fb=(s,a,u)=>null;function Bg(s,a,u=!1){return Fb(s,a,u)}class jb{}class Hb{}class $g{resolveComponentFactory(a){throw function Dy(s){const a=Error(`No component factory found for ${J(s)}.`);return a.ngComponent=s,a}(a)}}let Af=(()=>{class a{}return a.NULL=new $g,a})();function XP(){return Pf(or(),ye())}function Pf(s,a){return new Gg(Xr(s,a))}let Gg=(()=>{class a{constructor(l){this.nativeElement=l}}return a.__NG_ELEMENT_ID__=XP,a})();function Ow(s){return s instanceof Gg?s.nativeElement:s}class zg{}let $b=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function JP(){const s=ye(),u=Zn(or().index,s);return(wr(u)?u:s)[Dt]}(),a})(),qg=(()=>{var s;class a{}return(s=a).\u0275prov=Nt({token:s,providedIn:"root",factory:()=>null}),a})();class _a{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Mf=new _a("16.2.2"),xw={};function Rw(s,a=null,u=null,l){const d=Wb(s,a,u,l);return d.resolveInjectorInitializers(),d}function Wb(s,a=null,u=null,l,d=new Set){const g=[u||Ke,HP(s)];return l=l||("object"==typeof s?void 0:J(s)),new vy(g,a||Ng(),l||null,d)}let No=(()=>{var s;class a{static create(l,d){if(Array.isArray(l))return Rw({name:""},d,l,"");{const g=l.name??"";return Rw({name:g},l.parent,l.providers,g)}}}return(s=a).THROW_IF_NOT_FOUND=ui,s.NULL=new vw,s.\u0275prov=Nt({token:s,providedIn:"any",factory:()=>bt(gy)}),s.__NG_ELEMENT_ID__=-1,a})();function Ku(s){return s instanceof Function?s():s}let Lw=(()=>{var s;class a{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new ie(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const l of this.callbacks)l.invoke()}finally{this.runningCallbacks=!1;for(const l of this.deferredCallbacks)this.callbacks.add(l);this.deferredCallbacks.clear()}}register(l){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(l)}unregister(l){this.callbacks.delete(l),this.deferredCallbacks.delete(l)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(s=a).\u0275prov=Nt({token:s,providedIn:"root",factory:()=>new s}),a})();function Yg(s){for(;s;){s[Ct]|=64;const a=Oo(s);if(Oa(s)&&!a)return s;s=a}return null}function Fw(s){return s.ngOriginalError}class xf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Fw(a);for(;u&&Fw(u);)u=Fw(u);return u||null}}const Uw=new yn("",{providedIn:"root",factory:()=>!1});class Xg extends Xp{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Yg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,u,l){const d=Wn(this);this.trackingVersion++;try{a(u,l)}finally{Wn(d)}}destroy(){this.trackingVersion++}}let Nf=null;function Ry(){return Nf??=new Xg,Nf}function Yb(s,a){return s[a]??Ry()}function Qb(s,a){const u=Ry();u.hasReadASignal&&(s[a]=Nf,u.lView=s,Nf=new Xg)}const Ut={};function Xb(s){Hw(rn(),ye(),hi()+s,!1)}function Hw(s,a,u,l){if(!l)if(3==(3&a[Ct])){const g=s.preOrderCheckHooks;null!==g&&Et(a,g,u)}else{const g=s.preOrderHooks;null!==g&&Ks(a,g,0,u)}bo(u)}function kf(s,a=mt.Default){const u=ye();return null===u?bt(s,a):Td(or(),u,Ne(s),a)}function $w(){throw new Error("invalid")}function Lf(s,a,u,l,d,g,v,C,T,P,x){const V=a.blueprint.slice();return V[Nn]=d,V[Ct]=140|l,(null!==P||s&&2048&s[Ct])&&(V[Ct]|=2048),ld(V),V[An]=V[Gs]=s,V[kn]=u,V[Pa]=v||s&&s[Pa],V[Dt]=C||s&&s[Dt],V[$s]=T||s&&s[$s]||null,V[xr]=g,V[zs]=function Rd(){return xd++}(),V[Ui]=x,V[qs]=P,V[Pn]=2==a.type?s[Pn]:V,V}function Hd(s,a,u,l,d){let g=s.data[a];if(null===g)g=function Hi(s,a,u,l,d){const g=Pu(),v=Ir(),T=s.data[a]=function hM(s,a,u,l,d,g){let v=a?a.injectorIndex:-1,C=0;return function Va(){return null!==Tt.skipHydrationRootTNode}()&&(C|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,a,l,d);return null===s.firstChild&&(s.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(s,a,u,l,d),function md(){return Tt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=l,g.attrs=d;const v=function jn(){const s=Tt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Qi(g,!0),g}function pl(s,a,u,l){if(0===u)return-1;const d=a.length;for(let g=0;g<u;g++)a.push(l),s.blueprint.push(l),s.data.push(null);return d}function Yu(s,a,u,l,d){const g=Yb(a,Tc),v=hi(),C=2&l;try{if(bo(-1),C&&a.length>Ft&&Hw(s,a,Ft,!1),Vi(C?2:0,d),C)g.runInContext(u,l,d);else{const P=Wn(null);try{u(l,d)}finally{Wn(P)}}}finally{C&&null===a[Tc]&&Qb(a,Tc),bo(v),Vi(C?3:1,d)}}function Ff(s,a,u){if(Sc(a)){const l=Wn(null);try{const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,u[v],v)}}finally{Wn(l)}}}function Gw(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Ny(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Ny(s,a,u,l,d,g,v,C,T,P,x){const V=Ft+l,W=V+d,Q=function $d(s,a){const u=[];for(let l=0;l<a;l++)u.push(l<s?null:Ut);return u}(V,W),Ie="function"==typeof P?P():P;return Q[nt]={type:s,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:Ie,incompleteFirstPass:!1,ssrId:x}}let eT=s=>null;function tT(s,a,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===l?Uf(u,a,d,g):l.hasOwnProperty(d)&&Uf(u,a,l[d],g)}return u}function Uf(s,a,u,l){s.hasOwnProperty(u)?s[u].push(a,l):s[u]=[a,l]}function qw(s,a,u,l,d,g){for(let P=0;P<l.length;P++)Ru(zc(u,a),s,l[P].type);!function yM(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,l.length);for(let P=0;P<l.length;P++){const x=l[P];x.providersResolver&&x.providersResolver(x)}let v=!1,C=!1,T=pl(s,a,l.length,null);for(let P=0;P<l.length;P++){const x=l[P];u.mergedAttrs=Go(u.mergedAttrs,x.hostAttrs),vM(s,u,a,T,x),_M(T,x,d),null!==x.contentQueries&&(u.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=64);const V=x.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),v=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),C=!0),T++}!function ky(s,a,u){const d=a.directiveEnd,g=s.data,v=a.attrs,C=[];let T=null,P=null;for(let x=a.directiveStart;x<d;x++){const V=g[x],W=u?u.get(V):null,Ie=W?W.outputs:null;T=tT(V.inputs,x,T,W?W.inputs:null),P=tT(V.outputs,x,P,Ie);const Ue=null===T||null===v||vu(a)?null:CM(T,x,v);C.push(Ue)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=T,a.outputs=P}(s,u,g)}function sT(s,a,u){const l=u.directiveStart,d=u.directiveEnd,g=u.index,v=function $h(){return Tt.lFrame.currentDirectiveIndex}();try{bo(g);for(let C=l;C<d;C++){const T=s.data[C],P=a[C];ug(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&gM(T,P)}}finally{bo(-1),ug(v)}}function gM(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Ww(s,a,u){a.componentOffset=u,(s.components??=[]).push(a.index)}function _M(s,a,u){if(u){if(a.exportAs)for(let l=0;l<a.exportAs.length;l++)u[a.exportAs[l]]=s;li(a)&&(u[""]=s)}}function vM(s,a,u,l,d){s.data[l]=d;const g=d.factory||(d.factory=Qo(d.type)),v=new Lr(g,li(d),kf);s.blueprint[l]=v,u[l]=v,function ya(s,a,u,l,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~a.index;(function iT(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(u,l,g)}}(s,a,l,pl(s,u,d.hostVars,Ut),d)}function nu(s,a,u,l,d,g){const v=Xr(s,a);!function Zw(s,a,u,l,d,g,v){if(null==g)s.removeAttribute(a,d,u);else{const C=null==v?ne(g):v(g,l||"",d);s.setAttribute(a,d,C,u)}}(a[Dt],v,g,s.value,u,l,d)}function IM(s,a,u,l,d,g){const v=g[a];if(null!==v)for(let C=0;C<v.length;)aT(l,u,v[C++],v[C++],v[C++])}function aT(s,a,u,l,d){const g=Wn(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(l)&&(d=v[l].call(a,d)),null!==s.setInput?s.setInput(a,d,u,l):a[l]=d}finally{Wn(g)}}function CM(s,a,u){let l=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===l&&(l=[]);const v=s[g];for(let C=0;C<v.length;C+=2)if(v[C]===a){l.push(g,v[C+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function cT(s,a){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const g=u[l+1];if(-1!==g){const v=s.data[g];vd(u[l]),v.contentQueries(2,a[g],g)}}}function Fy(s,a){return s[Rr]?s[Wp][Zr]=a:s[Rr]=a,s[Wp]=a,a}function Kw(s,a,u){vd(0);const l=Wn(null);try{a(s,u)}finally{Wn(l)}}function lT(s){return s[Eu]||(s[Eu]=[])}function ko(s){return s.cleanup||(s.cleanup=[])}function Uy(s,a){const u=s[$s],l=u?u.get(xf,null):null;l&&l.handleError(a)}function Vy(s,a,u,l,d){for(let g=0;g<u.length;){const v=u[g++],C=u[g++];aT(s.data[v],a[v],l,C,d)}}function hT(s,a){const u=Zn(a,s),l=u[nt];!function EM(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])}(l,u);const d=u[Nn];null!==d&&null===u[Ui]&&(u[Ui]=Bg(d,u[$s])),Yw(l,u,u[kn])}function Yw(s,a,u){zh(a);try{const l=s.viewQuery;null!==l&&Kw(1,l,u);const d=s.template;null!==d&&Yu(s,a,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&cT(s,a),s.staticViewQueries&&Kw(2,s.viewQuery,u);const g=s.components;null!==g&&function bM(s,a){for(let u=0;u<a.length;u++)hT(s,a[u])}(a,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{a[Ct]&=-5,Hc()}}let fT=(()=>{var s;class a{constructor(){this.all=new Set,this.queue=new Map}create(l,d,g){const v=typeof Zone>"u"?null:Zone.current,C=new kh(l,x=>{this.all.has(x)&&this.queue.set(x,v)},g);let T;this.all.add(C),C.notify();const P=()=>{C.cleanup(),T?.(),this.all.delete(C),this.queue.delete(C)};return T=d?.onDestroy(P),{destroy:P}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}}return(s=a).\u0275prov=Nt({token:s,providedIn:"root",factory:()=>new s}),a})();function By(s,a,u){let l=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?g=C:1==g?d=Ve(d,C):2==g&&(l=Ve(l,C+": "+a[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function em(s,a,u,l,d=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&l.push(vn(g)),Kr(g)){for(let C=Nr;C<g.length;C++){const T=g[C],P=T[nt].firstChild;null!==P&&em(T[nt],T,P,l)}g[yr]!==g[Nn]&&l.push(g[yr])}const v=u.type;if(8&v)em(s,a,u.child,l);else if(32&v){const C=Nd(u,a);let T;for(;T=C();)l.push(T)}else if(16&v){const C=iw(a,u);if(Array.isArray(C))l.push(...C);else{const T=Oo(a[Pn]);em(T[nt],T,C,l,!0)}}u=d?u.projectionNext:u.next}return l}function Qw(s,a,u,l=!0){const d=a[Pa],g=d.rendererFactory,v=d.afterRenderEventManager;g.begin?.(),v?.begin();try{gT(s,a,s.template,u)}catch(T){throw l&&Uy(a,T),T}finally{g.end?.(),d.effectManager?.flush(),v?.end()}}function gT(s,a,u,l){const d=a[Ct];if(256!=(256&d)){a[Pa].effectManager?.flush(),zh(a);try{ld(a),function Ba(s){return Tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Yu(s,a,u,2,l);const v=3==(3&d);if(v){const P=s.preOrderCheckHooks;null!==P&&Et(a,P,null)}else{const P=s.preOrderHooks;null!==P&&Ks(a,P,0,null),On(a,0)}if(function SM(s){for(let a=J_(s);null!==a;a=ey(a)){if(!a[Dc])continue;const u=a[vr];for(let l=0;l<u.length;l++){ig(u[l])}}}(a),mT(a,2),null!==s.contentQueries&&cT(s,a),v){const P=s.contentCheckHooks;null!==P&&Et(a,P)}else{const P=s.contentHooks;null!==P&&Ks(a,P,1),On(a,1)}!function Jb(s,a){const u=s.hostBindingOpCodes;if(null===u)return;const l=Yb(a,Zo);try{for(let d=0;d<u.length;d++){const g=u[d];if(g<0)bo(~g);else{const v=g,C=u[++d],T=u[++d];yd(C,v),l.runInContext(T,2,a[v])}}}finally{null===a[Zo]&&Qb(a,Zo),bo(-1)}}(s,a);const C=s.components;null!==C&&yT(a,C,0);const T=s.viewQuery;if(null!==T&&Kw(2,T,l),v){const P=s.viewCheckHooks;null!==P&&Et(a,P)}else{const P=s.viewHooks;null!==P&&Ks(a,P,2),On(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Ct]&=-73,Bh(a)}finally{Hc()}}}function mT(s,a){for(let u=J_(s);null!==u;u=ey(u))for(let l=Nr;l<u.length;l++)_T(u[l],a)}function AM(s,a,u){_T(Zn(a,s),u)}function _T(s,a){if(!function Vh(s){return 128==(128&s[Ct])}(s))return;const u=s[nt];if(80&s[Ct]&&0===a||1024&s[Ct]||2===a)gT(u,s,u.template,s[kn]);else if(s[qo]>0){mT(s,1);const d=s[nt].components;null!==d&&yT(s,d,1)}}function yT(s,a,u){for(let l=0;l<a.length;l++)AM(s,a[l],u)}class tm{get rootNodes(){const a=this._lView,u=a[nt];return em(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(a){this._lView[kn]=a}get destroyed(){return 256==(256&this._lView[Ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[An];if(Kr(a)){const u=a[8],l=u?u.indexOf(this):-1;l>-1&&(Ot(a,l),$e(u,l))}this._attachedToViewContainer=!1}Mi(this._lView[nt],this._lView)}onDestroy(a){!function Ua(s,a){if(256==(256&s[Ct]))throw new ie(911,!1);null===s[wo]&&(s[wo]=[]),s[wo].push(a)}(this._lView,a)}markForCheck(){Yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ct]&=-129}reattach(){this._lView[Ct]|=128}detectChanges(){Qw(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function X(s,a){Ja(s,a,a[Dt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=a}}class PM extends tm{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Qw(a[nt],a,a[kn],!1)}checkNoChanges(){}get context(){return null}}class MM extends Af{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Yt(a);return new nm(u,this.ngModule)}}function OM(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class RM{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,l){l=Bn(l);const d=this.injector.get(a,xw,l);return d!==xw||u===xw?d:this.parentInjector.get(a,u,l)}}class nm extends Hb{get inputs(){const a=this.componentDef,u=a.inputTransforms,l=OM(a.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return OM(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Dh(s){return s.map(Th).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,l,d){let g=(d=d||this.ngModule)instanceof tu?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new RM(a,g):a,C=v.get(zg,null);if(null===C)throw new ie(407,!1);const V={rendererFactory:C,sanitizer:v.get(qg,null),effectManager:v.get(fT,null),afterRenderEventManager:v.get(Lw,null)},W=C.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",Ie=l?function fF(s,a,u,l){const g=l.get(Uw,!1)||u===Re.ShadowDom,v=s.selectRootElement(a,g);return function cM(s){eT(s)}(v),v}(W,l,this.componentDef.encapsulation,v):A(W,Q,function xM(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(Q)),yt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let xe=null;null!==Ie&&(xe=Bg(Ie,v,!0));const Lt=Ny(0,null,null,1,0,null,null,null,null,null,null),Zt=Lf(null,Lt,null,yt,null,null,V,W,v,null,xe);let Tn,Ns;zh(Zt);try{const mc=this.componentDef;let Ep,i_=null;mc.findHostDirectiveDefs?(Ep=[],i_=new Map,mc.findHostDirectiveDefs(mc,Ep,i_),Ep.push(mc)):Ep=[mc];const bp=function NM(s,a){const u=s[nt],l=Ft;return s[l]=a,Hd(u,l,2,"#host",null)}(Zt,Ie),WS=function kM(s,a,u,l,d,g,v){const C=d[nt];!function LM(s,a,u,l){for(const d of s)a.mergedAttrs=Go(a.mergedAttrs,d.hostAttrs);null!==a.mergedAttrs&&(By(a,a.mergedAttrs,!0),null!==u&&fb(l,u,a))}(l,s,a,v);let T=null;null!==a&&(T=Bg(a,d[$s]));const P=g.rendererFactory.createRenderer(a,u);let x=16;u.signals?x=4096:u.onPush&&(x=64);const V=Lf(d,Gw(u),null,x,d[s.index],s,g,P,null,null,T);return C.firstCreatePass&&Ww(C,s,l.length-1),Fy(d,V),d[s.index]=V}(bp,Ie,mc,Ep,Zt,V,W);Ns=Uh(Lt,Ft),Ie&&function gl(s,a,u,l){if(l)yu(s,u,["ng-version",Mf.full]);else{const{attrs:d,classes:g}=function Li(s){const a=[],u=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&a.push(g,s[++l]):8===d&&u.push(g);else{if(!ci(d))break;d=g}l++}return{attrs:a,classes:u}}(a.selectors[0]);d&&yu(s,u,d),g&&g.length>0&&hb(s,u,g.join(" "))}}(W,mc,Ie,l),void 0!==u&&function Oi(s,a,u){const l=s.projection=[];for(let d=0;d<a.length;d++){const g=u[d];l.push(null!=g?Array.from(g):null)}}(Ns,this.ngContentSelectors,u),Tn=function FM(s,a,u,l,d,g){const v=or(),C=d[nt],T=Xr(v,d);qw(C,d,v,u,null,l);for(let x=0;x<u.length;x++)Fr(ns(d,C,v.directiveStart+x,v),d);sT(C,d,v),T&&Fr(T,d);const P=ns(d,C,v.directiveStart+v.componentOffset,v);if(s[kn]=d[kn]=P,null!==g)for(const x of g)x(P,a);return Ff(C,v,s),P}(WS,mc,Ep,i_,Zt,[eo]),Yw(Lt,Zt,null)}finally{Hc()}return new vT(this.componentType,Tn,Pf(Ns,Zt),Zt,Ns)}}class vT extends jb{constructor(a,u,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new PM(d),this.componentType=a}setInput(a,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),u))return;const g=this._rootLView;Vy(g[nt],g,d,a,u),this.previousInputValues.set(a,u),Yg(Zn(this._tNode.index,g))}}get injector(){return new wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function eo(){const s=or();To(ye()[nt],s)}function Xw(s){let a=function Vf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const l=[s];for(;a;){let d;if(li(s))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ie(903,!1);d=a.\u0275dir}if(d){if(u){l.push(d);const v=s;v.inputs=jy(s.inputs),v.inputTransforms=jy(s.inputTransforms),v.declaredInputs=jy(s.declaredInputs),v.outputs=jy(s.outputs);const C=d.hostBindings;C&&$n(s,C);const T=d.viewQuery,P=d.contentQueries;if(T&&VM(s,T),P&&Ju(s,P),z(s.inputs,d.inputs),z(s.declaredInputs,d.declaredInputs),z(s.outputs,d.outputs),null!==d.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),z(v.inputTransforms,d.inputTransforms)),li(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(s),C===Xw&&(u=!1)}}a=Object.getPrototypeOf(a)}!function UM(s){let a=0,u=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=a+=d.hostVars,d.hostAttrs=Go(d.hostAttrs,u=Go(u,d.hostAttrs))}}(l)}function jy(s){return s===at?{}:s===Ke?[]:s}function VM(s,a){const u=s.viewQuery;s.viewQuery=u?(l,d)=>{a(l,d),u(l,d)}:a}function Ju(s,a){const u=s.contentQueries;s.contentQueries=u?(l,d,g)=>{a(l,d,g),u(l,d,g)}:a}function $n(s,a){const u=s.hostBindings;s.hostBindings=u?(l,d)=>{a(l,d),u(l,d)}:a}function im(s){const a=s.inputConfig,u={};for(const l in a)if(a.hasOwnProperty(l)){const d=a[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}s.inputTransforms=u}function $y(s){return!!Gy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Gy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function $i(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function CT(s,a,u,l){const d=ye();return $i(d,Zs(),a)&&(rn(),nu(Hn(),d,s,a,u,l)),CT}function dI(s,a,u){const l=ye();return $i(l,Zs(),a)&&function us(s,a,u,l,d,g,v,C){const T=Xr(a,u);let x,P=a.inputs;!C&&null!=P&&(x=P[l])?(Vy(s,u,x,l,d),Yo(a)&&function nT(s,a){const u=Zn(a,s);16&u[Ct]||(u[Ct]|=64)}(u,a.index)):3&a.type&&(l=function Jg(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,a.value||"",l):d,g.setProperty(T,l,d))}(rn(),Hn(),l,s,a,l[Dt],u,!1),dI}function hI(s,a,u,l,d){const v=d?"class":"style";Vy(s,u,a.inputs[v],v,l)}function qf(s,a,u,l){const d=ye(),g=rn(),v=Ft+s,C=d[Dt],T=g.firstCreatePass?function ev(s,a,u,l,d,g){const v=a.consts,T=Hd(a,s,2,l,Eo(v,d));return function Ly(s,a,u,l){if(na()){const d=null===l?null:{"":-1},g=function oT(s,a){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(Kl(a,v.selectors,!1))if(l||(l=[]),li(v))if(null!==v.findHostDirectiveDefs){const C=[];d=d||new Map,v.findHostDirectiveDefs(v,C,d),l.unshift(...C,v),Ww(s,a,C.length)}else l.unshift(v),Ww(s,a,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(s,u);let v,C;null===g?v=C=null:[v,C]=g,null!==v&&qw(s,a,u,v,d,C),d&&function mM(s,a,u){if(a){const l=s.localNames=[];for(let d=0;d<a.length;d+=2){const g=u[a[d+1]];if(null==g)throw new ie(-301,!1);l.push(a[d],g)}}}(u,l,d)}u.mergedAttrs=Go(u.mergedAttrs,u.attrs)}(a,u,T,Eo(v,g)),null!==T.attrs&&By(T,T.attrs,!1),null!==T.mergedAttrs&&By(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,g,d,a,u,l):g.data[v],P=tv(g,d,T,C,a,s);d[v]=P;const x=Si(T);return Qi(T,!0),fb(C,P,T),32!=(32&T.flags)&&_s()&&sy(g,d,P,T),0===function Hh(){return Tt.lFrame.elementDepthCount}()&&Fr(P,d),function Au(){Tt.lFrame.elementDepthCount++}(),x&&(function Ss(s,a,u){na()&&(function pM(s,a,u,l){const d=u.directiveStart,g=u.directiveEnd;Yo(u)&&function wM(s,a,u){const l=Xr(a,s),d=Gw(u);let v=16;u.signals?v=4096:u.onPush&&(v=64);const C=Fy(s,Lf(s,d,null,v,l,a,null,s[Pa].rendererFactory.createRenderer(l,u),null,null,null));s[a.index]=C}(a,u,s.data[d+u.componentOffset]),s.firstCreatePass||zc(u,a),Fr(l,a);const v=u.initialInputs;for(let C=d;C<g;C++){const T=s.data[C],P=ns(a,s,C,u);Fr(P,a),null!==v&&IM(0,C-d,P,T,0,v),li(T)&&(Zn(u.index,a)[kn]=ns(a,s,C,u))}}(s,a,u,Xr(u,a)),64==(64&u.flags)&&sT(s,a,u))}(g,d,T),Ff(g,T,d)),null!==l&&function Qu(s,a,u=Xr){const l=a.localNames;if(null!==l){let d=a.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],C=-1===v?u(a,s):s[v];s[d++]=C}}}(d,T),qf}function mm(){let s=or();Ir()?function ia(){Tt.lFrame.isParent=!1}():(s=s.parent,Qi(s,!1));const a=s;(function ra(s){return Tt.skipHydrationRootTNode===s})(a)&&function z0(){Tt.skipHydrationRootTNode=null}(),function og(){Tt.lFrame.elementDepthCount--}();const u=rn();return u.firstCreatePass&&(To(u,s),Sc(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ed(s){return 0!=(8&s.flags)}(a)&&hI(u,a,ye(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ys(s){return 0!=(16&s.flags)}(a)&&hI(u,a,ye(),a.stylesWithoutHost,!1),mm}function _m(s,a,u,l){return qf(s,a,u,l),mm(),_m}let tv=(s,a,u,l,d,g)=>(Er(!0),A(l,d,function Ha(){return Tt.lFrame.currentNamespace}()));function gI(s){return!!s&&"function"==typeof s.then}function NT(s){return!!s&&"function"==typeof s.subscribe}function mI(s,a,u,l){const d=ye(),g=rn(),v=or();return function ym(s,a,u,l,d,g,v){const C=Si(l),P=s.firstCreatePass&&ko(s),x=a[kn],V=lT(a);let W=!0;if(3&l.type||v){const Ue=Xr(l,a),tt=v?v(Ue):Ue,yt=V.length,xe=v?Zt=>v(vn(Zt[l.index])):l.index;let Lt=null;if(!v&&C&&(Lt=function sO(s,a,u,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===l){const C=a[Eu],T=d[g+2];return C.length>T?C[T]:null}"string"==typeof v&&(g+=2)}return null}(s,a,d,l.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=g,Lt.__ngLastListenerFn__=g,W=!1;else{g=yI(l,a,x,g,!1);const Zt=u.listen(tt,d,g);V.push(g,Zt),P&&P.push(d,xe,yt,yt+1)}}else g=yI(l,a,x,g,!1);const Q=l.outputs;let Ie;if(W&&null!==Q&&(Ie=Q[d])){const Ue=Ie.length;if(Ue)for(let tt=0;tt<Ue;tt+=2){const Tn=a[Ie[tt]][Ie[tt+1]].subscribe(g),Ns=V.length;V.push(g,Tn),P&&P.push(d,l.index,Ns,-(Ns+1))}}}(g,d,d[Dt],v,s,a,l),mI}function _I(s,a,u,l){try{return Vi(6,a,u),!1!==u(l)}catch(d){return Uy(s,d),!1}finally{Vi(7,a,u)}}function yI(s,a,u,l,d){return function g(v){if(v===Function)return l;Yg(s.componentOffset>-1?Zn(s.index,a):a);let T=_I(a,u,l,v),P=g.__ngNextListenerFn__;for(;P;)T=_I(a,u,P,v)&&T,P=P.__ngNextListenerFn__;return d&&!1===T&&v.preventDefault(),T}}function bI(s,a){return s<<17|a<<2}function qd(s){return s>>17&32767}function TI(s){return 2|s}function wl(s){return(131068&s)>>2}function vm(s,a){return-131069&s|a<<2}function UT(s){return 1|s}function BT(s,a,u,l,d){const g=s[u+1],v=null===a;let C=l?qd(g):wl(g),T=!1;for(;0!==C&&(!1===T||v);){const x=s[C+1];pO(s[C],a)&&(T=!0,s[C+1]=l?UT(x):TI(x)),C=l?qd(x):wl(x)}T&&(s[u+1]=l?TI(g):UT(g))}function pO(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&bs(s,a)>=0}function Im(s,a){return function Lo(s,a,u,l){const d=ye(),g=rn(),v=function Cr(s){const a=Tt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}(2);g.firstUpdatePass&&function PI(s,a,u,l){const d=s.data;if(null===d[u+1]){const g=d[hi()],v=function AI(s,a){return a>=s.expandoStartIndex}(s,u);(function RI(s,a){return 0!=(s.flags&(a?8:16))})(g,l)&&null===a&&!v&&(a=!1),a=function Cm(s,a,u,l){const d=function sa(s){const a=Tt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=l?a.residualClasses:a.residualStyles;if(null===d)0===(l?a.classBindings:a.styleBindings)&&(u=Wf(u=MI(null,s,a,u,l),a.attrs,l),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==d)if(u=MI(d,s,a,u,l),null===g){let T=function CO(s,a,u){const l=u?a.classBindings:a.styleBindings;if(0!==wl(l))return s[qd(l)]}(s,a,l);void 0!==T&&Array.isArray(T)&&(T=MI(null,s,a,T[1],l),T=Wf(T,a.attrs,l),function HT(s,a,u,l){s[qd(u?a.classBindings:a.styleBindings)]=l}(s,a,l,T))}else g=function EO(s,a,u){let l;const d=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<d;g++)l=Wf(l,s[g].hostAttrs,u);return Wf(l,a.attrs,u)}(s,a,l)}return void 0!==g&&(l?a.residualClasses=g:a.residualStyles=g),u}(d,g,a,l),function fO(s,a,u,l,d,g){let v=g?a.classBindings:a.styleBindings,C=qd(v),T=wl(v);s[l]=u;let x,P=!1;if(Array.isArray(u)?(x=u[1],(null===x||bs(u,x)>0)&&(P=!0)):x=u,d)if(0!==T){const W=qd(s[C+1]);s[l+1]=bI(W,C),0!==W&&(s[W+1]=vm(s[W+1],l)),s[C+1]=function FT(s,a){return 131071&s|a<<17}(s[C+1],l)}else s[l+1]=bI(C,0),0!==C&&(s[C+1]=vm(s[C+1],l)),C=l;else s[l+1]=bI(T,0),0===C?C=l:s[T+1]=vm(s[T+1],l),T=l;P&&(s[l+1]=TI(s[l+1])),BT(s,x,l,!0),BT(s,x,l,!1),function _F(s,a,u,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&bs(g,a)>=0&&(u[l+1]=UT(u[l+1]))}(a,x,s,l,g),v=bI(C,T),g?a.classBindings=v:a.styleBindings=v}(d,g,a,u,v,l)}}(g,s,v,l),a!==Ut&&$i(d,v,a)&&function GT(s,a,u,l,d,g,v,C){if(!(3&a.type))return;const T=s.data,P=T[C+1],x=function wm(s){return 1==(1&s)}(P)?xI(T,a,u,d,wl(P),v):void 0;uv(x)||(uv(g)||function hO(s){return 2==(2&s)}(P)&&(g=xI(T,null,u,d,C,v)),function MP(s,a,u,l,d){if(a)d?s.addClass(u,l):s.removeClass(u,l);else{let g=-1===l.indexOf("-")?void 0:Ai.DashCase;null==d?s.removeStyle(u,l,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Ai.Important),s.setStyle(u,l,d,g))}}(l,v,function Vc(s,a){return vn(a[s])}(hi(),u),d,g))}(g,g.data[hi()],d,d[Dt],s,d[v+1]=function DO(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=J(ul(s)))),s}(a,u),l,v)}(s,a,null,!0),Im}function MI(s,a,u,l,d){let g=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(g=a[C],l=Wf(l,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),l}function Wf(s,a,u){const l=u?1:2;let d=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),sn(s,v,!!u||a[++g]))}return void 0===s?null:s}function xI(s,a,u,l,d,g){const v=null===a;let C;for(;d>0;){const T=s[d],P=Array.isArray(T),x=P?T[1]:T,V=null===x;let W=u[d+1];W===Ut&&(W=V?Ke:void 0);let Q=V?Es(W,l):x===l?W:void 0;if(P&&!uv(Q)&&(Q=Es(T,l)),uv(Q)&&(C=Q,v))return C;const Ie=s[d+1];d=v?qd(Ie):wl(Ie)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(C=Es(T,l))}return C}function uv(s){return void 0!==s}function zT(s,a=""){const u=ye(),l=rn(),d=s+Ft,g=l.firstCreatePass?Hd(l,d,1,a,null):l.data[d],v=qT(l,u,g,a,s);u[d]=v,_s()&&sy(l,u,v,g),Qi(g,!1)}let qT=(s,a,u,l,d)=>(Er(!0),function p(s,a){return s.createText(a)}(a[Dt],l));const El=void 0;var VI=["en",[["a","p"],["AM","PM"],El],[["AM","PM"],El,El],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],El,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],El,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",El,"{1} 'at' {0}",El],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UI(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let bl={};function Dm(s){const a=function LO(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Kf(a);if(u)return u;const l=a.split("-")[0];if(u=Kf(l),u)return u;if("en"===l)return VI;throw new ie(701,!1)}function nD(s){return Dm(s)[iu.PluralCase]}function Kf(s){return s in bl||(bl[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),bl[s]}var iu=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(iu||{});const Tl="en-US";let _v=Tl;function iC(s,a,u,l,d){if(s=Ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)iC(s[g],a,u,l,d);else{const g=rn(),v=ye(),C=or();let T=eu(s)?s:Ne(s.provide);const P=Ew(s),x=1048575&C.providerIndexes,V=C.directiveStart,W=C.providerIndexes>>20;if(eu(s)||!s.multi){const Q=new Lr(P,d,kf),Ie=np(T,a,d?x:x+W,V);-1===Ie?(Ru(zc(C,v),g,T),nc(g,s,a.length),a.push(T),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),u.push(Q),v.push(Q)):(u[Ie]=Q,v[Ie]=Q)}else{const Q=np(T,a,x+W,V),Ie=np(T,a,x,x+W),tt=Ie>=0&&u[Ie];if(d&&!tt||!d&&!(Q>=0&&u[Q])){Ru(zc(C,v),g,T);const yt=function Pv(s,a,u,l,d){const g=new Lr(s,u,kf);return g.multi=[],g.index=a,g.componentProviders=0,su(g,d,l&&!u),g}(d?DD:Av,u.length,d,l,P);!d&&tt&&(u[Ie].providerFactory=yt),nc(g,s,a.length,0),a.push(T),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),u.push(yt),v.push(yt)}else nc(g,s,Q>-1?Q:Ie,su(u[d?Ie:Q],P,!d&&l));!d&&l&&tt&&u[Ie].componentProviders++}}}function nc(s,a,u,l){const d=eu(a),g=function xb(s){return!!s.useClass}(a);if(d||g){const T=(g?Ne(a.useClass):a).prototype.ngOnDestroy;if(T){const P=s.destroyHooks||(s.destroyHooks=[]);if(!d&&a.multi){const x=P.indexOf(u);-1===x?P.push(u,[l,T]):P[x+1].push(l,T)}else P.push(u,T)}}}function su(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function np(s,a,u,l){for(let d=u;d<l;d++)if(a[d]===s)return d;return-1}function Av(s,a,u,l){return Ln(this.multi,[])}function DD(s,a,u,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ns(u,u[nt],this.providerFactory.index,l);g=C.slice(0,v),Ln(d,g);for(let T=v;T<C.length;T++)g.push(C[T])}else g=[],Ln(d,g);return g}function Ln(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function rp(s,a=[]){return u=>{u.providersResolver=(l,d)=>function TD(s,a,u){const l=rn();if(l.firstCreatePass){const d=li(s);iC(u,l.data,l.blueprint,d,!0),iC(a,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,a)}}class Ca{}class SD{}function AD(s,a){return new sC(s,a??null,[])}class sC extends Ca{constructor(a,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new MM(this);const d=Wr(a);this._bootstrapComponents=Ku(d.bootstrap),this._r3Injector=Wb(a,u,[{provide:Ca,useValue:this},{provide:Af,useValue:this.componentFactoryResolver},...l],J(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class oC extends SD{constructor(a){super(),this.moduleType=a}create(a){return new sC(this.moduleType,a,[])}}class ip extends Ca{constructor(a){super(),this.componentFactoryResolver=new MM(this),this.instance=null;const u=new vy([...a.providers,{provide:Ca,useValue:this},{provide:Af,useValue:this.componentFactoryResolver}],a.parent||Ng(),a.debugName,new Set(["environment"]));this.injector=u,a.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function rc(s,a,u=null){return new ip({providers:s,parent:a,debugName:u,runEnvironmentInitializers:!0}).injector}let PD=(()=>{var s;class a{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const d=Ab(0,l.type),g=d.length>0?rc([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,g)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return(s=a).\u0275prov=Nt({token:s,providedIn:"environment",factory:()=>new s(bt(tu))}),a})();function aC(s){s.getStandaloneInjector=a=>a.get(PD).getOrCreateStandaloneInjector(s)}function sp(s){return a=>{setTimeout(s,void 0,a)}}const au=class BD extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,l){let d=a,g=u||(()=>null),v=l;if(a&&"object"==typeof a){const T=a;d=T.next?.bind(T),g=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(g=sp(g),d&&(d=sp(d)),v&&(v=sp(v)));const C=super.subscribe({next:d,error:g,complete:v});return a instanceof ee.w0&&a.add(C),C}};function jD(){return this._results[Symbol.iterator]()}class Jd{get changes(){return this._changes||(this._changes=new au)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Jd.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=jD)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const l=this;l.dirty=!1;const d=function G(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function U(s,a,u){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=a[l];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function _C(s,a,u,l=!0){const d=a[nt];if(function He(s,a,u,l){const d=Nr+l,g=u.length;l>0&&(u[d-1][Zr]=a),l<g-Nr?(a[Zr]=u[d],pe(u,Nr+l,a)):(u.push(a),a[Zr]=null),a[An]=u;const v=a[Jl];null!==v&&u!==v&&function rt(s,a){const u=s[vr];a[Pn]!==a[An][An][Pn]&&(s[Dc]=!0),null===u?s[vr]=[a]:u.push(a)}(v,a);const C=a[_r];null!==C&&C.insertView(s),a[Ct]|=128}(d,a,s,u),l){const g=oy(u,s),v=a[Dt],C=$u(v,s[yr]);null!==C&&function H(s,a,u,l,d,g){l[Nn]=d,l[xr]=a,Ja(s,l,u,1,d,g)}(d,s[xr],v,a,C,g)}}let op=(()=>{class a{}return a.__NG_ELEMENT_ID__=zD,a})();const Nv=op,GD=class extends Nv{constructor(a,u,l){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,u){return this.createEmbeddedViewImpl(a,u)}createEmbeddedViewImpl(a,u,l){const d=function HD(s,a,u,l){const d=a.tView,C=Lf(s,d,u,4096&s[Ct]?4096:16,null,a,null,null,null,l?.injector??null,l?.hydrationInfo??null);C[Jl]=s[a.index];const P=s[_r];return null!==P&&(C[_r]=P.createEmbeddedView(d)),Yw(d,C,u),C}(this._declarationLView,this._declarationTContainer,a,{injector:u,hydrationInfo:l});return new tm(d)}};function zD(){return uu(or(),ye())}function uu(s,a){return 4&s.type?new GD(a,s,Pf(s,a)):null}let Ps=(()=>{class a{}return a.__NG_ELEMENT_ID__=IC,a})();function IC(){return CC(or(),ye())}const bn=Ps,KD=class extends bn{constructor(a,u,l){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=l}get element(){return Pf(this._hostTNode,this._hostLView)}get injector(){return new wn(this._hostTNode,this._hostLView)}get parentInjector(){const a=ts(this._hostTNode,this._hostLView);if(xu(a)){const u=fn(a,this._hostLView),l=ur(a);return new wn(u[nt].data[l+8],u)}return new wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=Lv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Nr}createEmbeddedView(a,u,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const C=a.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(C,d,false),C}createComponent(a,u,l,d,g){const v=a&&!function M(s){return"function"==typeof s}(a);let C;if(v)C=u;else{const Ue=u||{};C=Ue.index,l=Ue.injector,d=Ue.projectableNodes,g=Ue.environmentInjector||Ue.ngModuleRef}const T=v?a:new nm(Yt(a)),P=l||this.parentInjector;if(!g&&null==T.ngModule){const tt=(v?P:this.parentInjector).get(tu,null);tt&&(g=tt)}Yt(T.componentType??{});const Q=T.create(P,d,null,g);return this.insertImpl(Q.hostView,C,false),Q}insert(a,u){return this.insertImpl(a,u,!1)}insertImpl(a,u,l){const d=a._lView;if(function cd(s){return Kr(s[An])}(d)){const T=this.indexOf(a);if(-1!==T)this.detach(T);else{const P=d[An],x=new KD(P,P[xr],P[An]);x.detach(x.indexOf(a))}}const v=this._adjustIndex(u),C=this._lContainer;return _C(C,d,v,!l),a.attachToViewContainerRef(),pe(Vo(C),v,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=Lv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),l=Ot(this._lContainer,u);l&&($e(Vo(this._lContainer),u),Mi(l[nt],l))}detach(a){const u=this._adjustIndex(a,-1),l=Ot(this._lContainer,u);return l&&null!=$e(Vo(this._lContainer),u)?new tm(l):null}_adjustIndex(a,u=0){return a??this.length+u}};function Lv(s){return s[8]}function Vo(s){return s[8]||(s[8]=[])}function CC(s,a){let u;const l=a[s.index];return Kr(l)?u=l:(u=function uT(s,a,u,l){return[s,!0,!1,a,null,0,l,u,null,null,null]}(l,a,null,s),a[s.index]=u,Fy(a,u)),eh(u,a,s,l),new KD(u,s,a)}let eh=function Fv(s,a,u,l){if(s[yr])return;let d;d=8&u.type?vn(l):function EC(s,a){const u=s[Dt],l=u.createComment(""),d=Xr(a,s);return as(u,$u(u,d),l,function Sg(s,a){return s.nextSibling(a)}(u,d),!1),l}(a,u),s[yr]=d};class Ms{constructor(a){this.queryList=a,this.matches=null}clone(){return new Ms(this.queryList)}setDirty(){this.queryList.setDirty()}}class ei{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const l=null!==a.contentQueries?a.contentQueries[0]:u.length,d=[];for(let g=0;g<l;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new ei(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==TC(a,u).matches&&this.queries[u].setDirty()}}class $m{constructor(a,u,l=null){this.predicate=a,this.flags=u,this.read=l}}class up{constructor(a=[]){this.queries=a}elementStart(a,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,g=this.getByIndex(l).embeddedTView(a,d);g&&(g.indexInDeclarationView=l,null!==u?u.push(g):u=[g])}return null!==u?new up(u):null}template(a,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class th{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new th(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=a.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(a,u,Uv(u,g)),this.matchTNodeWithReadOption(a,u,ua(u,a,g,!1,!1))}else l===op?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,ua(u,a,l,!1,!1))}matchTNodeWithReadOption(a,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Gg||d===Ps||d===op&&4&u.type)this.addMatch(u.index,-2);else{const g=ua(u,a,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,l)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Uv(s,a){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===a)return u[l+1];return null}function cp(s,a,u,l){return-1===u?function QD(s,a){return 11&s.type?Pf(s,a):4&s.type?uu(s,a):null}(a,s):-2===u?function ox(s,a,u){return u===Gg?Pf(a,s):u===op?uu(a,s):u===Ps?CC(a,s):void 0}(s,a,l):ns(s,s[nt],u,a)}function XD(s,a,u,l){const d=a[_r].queries[l];if(null===d.matches){const g=s.data,v=u.matches,C=[];for(let T=0;T<v.length;T+=2){const P=v[T];C.push(P<0?null:cp(a,g[P],v[T+1],u.metadata.read))}d.matches=C}return d.matches}function Gm(s,a,u,l){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=XD(s,a,d,u);for(let C=0;C<g.length;C+=2){const T=g[C];if(T>0)l.push(v[C/2]);else{const P=g[C+1],x=a[-T];for(let V=Nr;V<x.length;V++){const W=x[V];W[Jl]===W[An]&&Gm(W[nt],W,P,l)}if(null!==x[vr]){const V=x[vr];for(let W=0;W<V.length;W++){const Q=V[W];Gm(Q[nt],Q,P,l)}}}}}return l}function JD(s){const a=ye(),u=rn(),l=Gh();vd(l+1);const d=TC(u,l);if(s.dirty&&function Fa(s){return 4==(4&s[Ct])}(a)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Gm(u,a,l,[]):XD(u,a,d,l);s.reset(g,Ow),s.notifyOnChanges()}return!0}return!1}function bC(s,a,u,l){const d=rn();if(d.firstCreatePass){const g=or();(function nS(s,a,u){null===s.queries&&(s.queries=new up),s.queries.track(new th(a,u))})(d,new $m(a,u,l),g.index),function lp(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function tS(s,a,u){const l=new Jd(4==(4&u));(function dM(s,a,u,l){const d=lT(a);d.push(u),s.firstCreatePass&&ko(s).push(l,d.length-1)})(s,a,l,l.destroy),null===a[_r]&&(a[_r]=new ei),a[_r].queries.push(new Ms(l))}(d,ye(),u)}function eS(){return function Vv(s,a){return s[_r].queries[a].queryList}(ye(),Gh())}function TC(s,a){return s.queries.getByIndex(a)}function zm(s){return!!Wr(s)}const fp=new yn("Application Initializer");let oh=(()=>{var s;class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=xt(fp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const g of this.appInits){const v=g();if(gI(v))l.push(v);else if(NT(v)){const C=new Promise((T,P)=>{v.subscribe({complete:T,error:P})});l.push(C)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(g=>{this.reject(g)}),0===l.length&&d(),this.initialized=!0}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})(),NC=(()=>{var s;class a{log(l){console.log(l)}warn(l){console.warn(l)}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();const qv=new yn("LocaleId",{providedIn:"root",factory:()=>xt(qv,mt.Optional|mt.SkipSelf)||function Zi(){return typeof $localize<"u"&&$localize.locale||Tl}()}),hS=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kC=(()=>{var s;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new L.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();class gx{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let mx=(()=>{var s;class a{compileModuleSync(l){return new oC(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),v=Ku(Wr(l).declarations).reduce((C,T)=>{const P=Yt(T);return P&&C.push(new nm(P)),C},[]);return new gx(d,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function ls(...s){}class un{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new au(!1),this.onMicrotaskEmpty=new au(!1),this.onStable=new au(!1),this.onError=new au(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function _S(){const s="function"==typeof an.requestAnimationFrame;let a=an[s?"requestAnimationFrame":"setTimeout"],u=an[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&u){const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function uc(s){const a=()=>{!function Dr(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pp(s),s.isCheckStableRunning=!0,lu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,g,v,C)=>{try{return Wm(s),u.invokeTask(d,g,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),gp(s)}},onInvoke:(u,l,d,g,v,C,T)=>{try{return Wm(s),u.invoke(d,g,v,C,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),gp(s)}},onHasTask:(u,l,d,g)=>{u.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,pp(s),lu(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,l,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!un.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(un.isInAngularZone())throw new ie(909,!1)}run(a,u,l){return this._inner.run(a,u,l)}runTask(a,u,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,a,Px,ls,ls);try{return g.runTask(v,u,l)}finally{g.cancelTask(v)}}runGuarded(a,u,l){return this._inner.runGuarded(a,u,l)}runOutsideAngular(a){return this._outer.run(a)}}const Px={};function lu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Wm(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gp(s){s._nesting--,lu(s)}class Mx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new au,this.onMicrotaskEmpty=new au,this.onStable=new au,this.onError=new au}run(a,u,l){return a.apply(u,l)}runGuarded(a,u,l){return a.apply(u,l)}runOutsideAngular(a){return a()}runTask(a,u,l,d){return a.apply(u,l)}}const cc=new yn("",{providedIn:"root",factory:lc});function lc(){const s=xt(un);let a=!0;const u=new te.y(d=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(a),d.complete()})}),l=new te.y(d=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{un.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,d.next(!0))})})});const v=s.onUnstable.subscribe(()=>{un.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,se.T)(u,l.pipe((0,we.B)()))}const Zm=new yn(""),dc=new yn("");let Qv,du=(()=>{var s;class a{constructor(l,d,g){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qv||(function Ml(s){Qv=s}(g),g.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{un.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,g){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:g})}whenStable(l,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,g){return[]}}return(s=a).\u0275fac=function(l){return new(l||s)(bt(un),bt(mp),bt(dc))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac}),a})(),mp=(()=>{var s;class a{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Qv?.findTestabilityInTree(this,l,d)??null}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})(),so=null;const Xv=new yn("AllowMultipleToken"),_p=new yn("PlatformDestroyListeners"),hc=new yn("appBootstrapListener");class e0{constructor(a,u){this.name=a,this.token=u}}function BC(s,a,u=[]){const l=`Platform: ${a}`,d=new yn(l);return(g=[])=>{let v=Fn();if(!v||v.injector.get(Xv,!1)){const C=[...u,...g,{provide:d,useValue:!0}];s?s(C):function Km(s){if(so&&!so.get(Xv,!1))throw new ie(400,!1);(function VC(){!function od(s){kc=s}(()=>{throw new ie(600,!1)})})(),so=s;const a=s.get(fc);(function wS(s){s.get(Ey,null)?.forEach(u=>u())})(s)}(function Ii(s=[],a){return No.create({name:a,providers:[{provide:Cw,useValue:"platform"},{provide:_p,useValue:new Set([()=>so=null])},...s]})}(C,l))}return function IS(s){const a=Fn();if(!a)throw new ie(401,!1);return a}()}}function Fn(){return so?.get(fc)??null}let fc=(()=>{var s;class a{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const g=function CS(s="zone.js",a){return"noop"===s?new Mx:"zone.js"===s?new un(a):s}(d?.ngZone,function jC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return g.run(()=>{const v=function YO(s,a,u){return new sC(s,a,u)}(l.moduleType,this.injector,function t0(s){return[{provide:un,useFactory:s},{provide:If,multi:!0,useFactory:()=>{const a=xt($C,{optional:!0});return()=>a.initialize()}},{provide:ch,useFactory:HC},{provide:cc,useFactory:lc}]}(()=>g)),C=v.injector.get(xf,null);return g.runOutsideAngular(()=>{const T=g.onError.subscribe({next:P=>{C.handleError(P)}});v.onDestroy(()=>{Jt(this._modules,v),T.unsubscribe()})}),function ah(s,a,u){try{const l=u();return gI(l)?l.catch(d=>{throw a.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw a.runOutsideAngular(()=>s.handleError(l)),l}}(C,g,()=>{const T=v.injector.get(oh);return T.runInitializers(),T.donePromise.then(()=>(function yv(s){st(s,"Expected localeId to be defined"),"string"==typeof s&&(_v=s.toLowerCase().replace(/_/g,"-"))}(v.injector.get(qv,Tl)||Tl),this._moduleDoBootstrap(v),v))})})}bootstrapModule(l,d=[]){const g=ES({},d);return function UC(s,a,u){const l=new oC(u);return Promise.resolve(l)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,g))}_moduleDoBootstrap(l){const d=l.injector.get(uh);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new ie(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(_p,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(s=a).\u0275fac=function(l){return new(l||s)(bt(No))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),a})();function ES(s,a){return Array.isArray(a)?a.reduce(ES,s):{...s,...a}}let uh=(()=>{var s;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xt(ch),this.zoneIsStable=xt(cc),this.componentTypes=[],this.components=[],this.isStable=xt(kC).hasPendingTasks.pipe((0,ke.w)(l=>l?(0,_e.of)(!1):this.zoneIsStable),(0,me.x)(),(0,we.B)()),this._injector=xt(tu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const g=l instanceof Hb;if(!this._injector.get(oh).done)throw!g&&vo(l),new ie(405,!1);let C;C=g?l:this._injector.get(Af).resolveComponentFactory(l),this.componentTypes.push(C.componentType);const T=function yS(s){return s.isBoundToModule}(C)?void 0:this._injector.get(Ca),x=C.create(No.NULL,[],d||C.selector,T),V=x.location.nativeElement,W=x.injector.get(Zm,null);return W?.registerApplication(V),x.onDestroy(()=>{this.detachView(x.hostView),Jt(this.components,x),W?.unregisterApplication(V)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Jt(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(hc,[]);d.push(...this._bootstrapListeners),d.forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Jt(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ie(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function Jt(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}const ch=new yn("",{providedIn:"root",factory:()=>xt(xf).handleError.bind(void 0)});function HC(){const s=xt(un),a=xt(xf);return u=>s.runOutsideAngular(()=>a.handleError(u))}let $C=(()=>{var s;class a{constructor(){this.zone=xt(un),this.applicationRef=xt(uh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(s=a).\u0275fac=function(l){return new(l||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function TS(){return!1}let SS=(()=>{class a{}return a.__NG_ELEMENT_ID__=Nx,a})();function Nx(s){return function AS(s,a,u){if(Yo(s)&&!u){const l=Zn(s.index,a);return new tm(l,l)}return 47&s.type?new tm(a[Pn],a):null}(or(),ye(),16==(16&s))}class wp{constructor(){}supports(a){return $y(a)}create(a){return new ZC(a)}}const xS=(s,a)=>a;class ZC{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||xS}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,l=this._removalsHead,d=0,g=null;for(;u||l;){const v=!l||u&&u.currentIndex<NS(l,d,g)?u:l,C=NS(v,d,g),T=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const P=C-d,x=T-d;if(P!=x){for(let W=0;W<P;W++){const Q=W<g.length?g[W]:g[W]=0,Ie=Q+W;x<=Ie&&Ie<P&&(g[W]=Q+1)}g[v.previousIndex]=x-P}}C!==T&&a(v,C,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!$y(a))throw new ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,g,v,u=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],v=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,g,v,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,C),l=!0),u=u._next}else d=0,function sm(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)a(l.value)}}(a,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,l,d){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,d)):a=this._addAfter(new Xm(u,l),g,d),a}_verifyReinsertion(a,u,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?a=this._reinsertAfter(g,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,g=a._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(a,u,l),this._addToMoves(a,l),a}_moveAfter(a,u,l){return this._unlink(a),this._insertAfter(a,u,l),this._addToMoves(a,l),a}_addAfter(a,u,l){return this._insertAfter(a,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,l){const d=null===u?this._itHead:u._next;return a._next=d,a._prev=u,null===d?this._itTail=a:d._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new KC),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,l=a._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KC),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Xm{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RS{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const u=a._prevDup,l=a._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class KC{constructor(){this.map=new Map}put(a){const u=a.trackById;let l=this.map.get(u);l||(l=new RS,this.map.set(u,l)),l.add(a)}get(a,u){const d=this.map.get(a);return d?d.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NS(s,a,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+a+d}class fu{constructor(){}supports(a){return a instanceof Map||Gy(a)}create(){return new kx}}class kx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Gy(a)))throw new ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const l=a._prev;return u._next=a,u._prev=l,a._prev=u,l&&(l._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new Rs(a);return this._records.set(a,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(l=>u(a[l],l))}}class Rs{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YC(){return new dh([new wp])}let dh=(()=>{var s;class a{constructor(l){this.factories=l}static create(l,d){if(null!=d){const g=d.factories.slice();l=l.concat(g)}return new a(l)}static extend(l){return{provide:a,useFactory:d=>a.create(l,d||YC()),deps:[[a,new tf,new Sd]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(null!=d)return d;throw new ie(901,!1)}}return(s=a).\u0275prov=Nt({token:s,providedIn:"root",factory:YC}),a})();function Ea(){return new s0([new fu])}let s0=(()=>{var s;class a{constructor(l){this.factories=l}static create(l,d){if(d){const g=d.factories.slice();l=l.concat(g)}return new a(l)}static extend(l){return{provide:a,useFactory:d=>a.create(l,d||Ea()),deps:[[a,new tf,new Sd]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new ie(901,!1)}}return(s=a).\u0275prov=Nt({token:s,providedIn:"root",factory:Ea}),a})();const Ux=BC(null,"core",[]);let QC=(()=>{var s;class a{constructor(l){}}return(s=a).\u0275fac=function(l){return new(l||s)(bt(uh))},s.\u0275mod=Iu({type:s}),s.\u0275inj=Sn({}),a})();function Hx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function qx(s){const a=Yt(s);if(!a)return null;const u=new nm(a);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},4097:(ht,Se,k)=>{k.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(534);(0,f.registerVersion)("firebase","9.23.0","app")},120:(ht,Se,k)=>{k.d(Se,{Z:()=>f.Z});var f=k(3106);f.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(ht,Se,k)=>{k.r(Se);var f=k(5861),ee=k(3106),L=k(9058),te=k(534),se=k(7582),_e=k(7879),we=k(4537);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ye=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ne=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vt=new _e.Yd("@firebase/auth");function ie(w,...p){vt.logLevel<=_e.in.ERROR&&vt.error(`Auth (${te.SDK_VERSION}): ${w}`,...p)}function Ce(w,...p){throw Ze(w,...p)}function ne(w,...p){return Ze(w,...p)}function Ae(w,p,m){const I=Object.assign(Object.assign({},Ne()),{[p]:m});return new L.LL("auth","Firebase",I).create(p,{appName:w.name})}function Le(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ce(w,"argument-error"),Ae(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...p){if("string"!=typeof w){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(m,...I)}return qe.create(w,...p)}function ce(w,p,...m){if(!w)throw Ze(p,...m)}function It(w){const p="INTERNAL ASSERTION FAILED: "+w;throw ie(p),new Error(p)}function $t(w,p){w||It(p)}function Pr(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function si(){return"http:"===Bs()||"https:"===Bs()}function Bs(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class js{constructor(p,m){this.shortDelay=p,this.longDelay=m,$t(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Kn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(si()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function le(w,p){$t(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ge{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new js(3e4,6e4);function De(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Pe(w,p,m,I){return st.apply(this,arguments)}function st(){return(st=(0,f.Z)(function*(w,p,m,I,A={}){return Ge(w,A,(0,f.Z)(function*(){let O={},H={};I&&("GET"===p?H=I:O={body:JSON.stringify(I)});const X=(0,L.xO)(Object.assign({key:w.config.apiKey},H)).slice(1),ue=yield w._getAdditionalHeaders();return ue["Content-Type"]="application/json",w.languageCode&&(ue["X-Firebase-Locale"]=w.languageCode),ge.fetch()(Nt(w,w.config.apiHost,m,X),Object.assign({method:p,headers:ue,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ge(w,p,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(w,p,m){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ee),p);try{const A=new Dn(w),O=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const H=yield O.json();if("needConfirmation"in H)throw Sn(w,"account-exists-with-different-credential",H);if(O.ok&&!("errorMessage"in H))return H;{const X=O.ok?H.errorMessage:H.error.message,[ue,He]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ue)throw Sn(w,"credential-already-in-use",H);if("EMAIL_EXISTS"===ue)throw Sn(w,"email-already-in-use",H);if("USER_DISABLED"===ue)throw Sn(w,"user-disabled",H);const rt=I[ue]||ue.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Ae(w,rt,He);Ce(w,rt)}}catch(A){if(A instanceof L.ZR)throw A;Ce(w,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function gt(w,p,m,I){return en.apply(this,arguments)}function en(){return(en=(0,f.Z)(function*(w,p,m,I,A={}){const O=yield Pe(w,p,m,I,A);return"mfaPendingCredential"in O&&Ce(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Nt(w,p,m,I){const A=`${p}${m}?${I}`;return w.config.emulator?le(w.config,A):`${w.config.apiScheme}://${A}`}class Dn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(ne(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(w,p,m){const I={appName:w.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const A=ne(w,p,I);return A.customData._tokenResponse=m,A}function ln(){return(ln=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ti(){return(Ti=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Di(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function mt(){return(mt=(0,f.Z)(function*(w,p=!1){const m=(0,L.m9)(w),I=yield m.getIdToken(p),A=Pt(I);ce(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,H=O?.sign_in_provider;return{claims:A,token:I,authTime:Di(Gt(A.auth_time)),issuedAtTime:Di(Gt(A.iat)),expirationTime:Di(Gt(A.exp)),signInProvider:H||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Gt(w){return 1e3*Number(w)}function Pt(w){const[p,m,I]=w.split(".");if(void 0===p||void 0===m||void 0===I)return ie("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(m);return A?JSON.parse(A):(ie("Failed to decode base64 JWT payload"),null)}catch(A){return ie("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Rn(w,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof L.ZR&&function an({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Mr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Ta{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tn(w){return ai.apply(this,arguments)}function ai(){return ai=(0,f.Z)(function*(w){var p;const m=w.auth,I=yield w.getIdToken(),A=yield Rn(w,function po(w,p){return Ti.apply(this,arguments)}(m,{idToken:I}));ce(A?.users.length,m,"internal-error");const O=A.users[0];w._notifyReloadListener(O);const H=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function _o(w){return w.map(p=>{var{providerId:m}=p,I=(0,se._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(O.providerUserInfo):[],X=function mo(w,p){return[...w.filter(I=>!p.some(A=>A.providerId===I.providerId)),...p]}(w.providerData,H),rt=!!w.isAnonymous&&!(w.email&&O.passwordHash||X?.length),ut={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:X,metadata:new Ta(O.createdAt,O.lastLoginAt),isAnonymous:rt};Object.assign(w,ut)}),ai.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(w){const p=(0,L.m9)(w);yield tn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(w,p){const m=yield Ge(w,{},(0,f.Z)(function*(){const I=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:O}=w.config,H=Nt(w,A,"/v1/token",`key=${O}`),X=yield w._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",ge.fetch()(H,{method:"POST",headers:X,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ce(p.idToken,"internal-error"),ce(typeof p.idToken<"u","internal-error"),ce(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function gn(w){const p=Pt(w);return ce(p,"internal-error"),ce(typeof p.exp<"u","internal-error"),ce(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,f.Z)(function*(){return ce(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:H}=yield function xi(w,p){return yo.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(A,O,Number(H))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:A,expirationTime:O}=m,H=new Yi;return I&&(ce("string"==typeof I,"internal-error",{appName:p}),H.refreshToken=I),A&&(ce("string"==typeof A,"internal-error",{appName:p}),H.accessToken=A),O&&(ce("number"==typeof O,"internal-error",{appName:p}),H.expirationTime=O),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return It("not implemented")}}function pr(w,p){ce("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class gr{constructor(p){var{uid:m,auth:I,stsTokenManager:A}=p,O=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ta(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const I=yield Rn(m,m.stsTokenManager.getToken(m.auth,p));return ce(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function mu(w){return mt.apply(this,arguments)}(this,p)}reload(){return function jt(w){return fs.apply(this,arguments)}(this)}_assign(p){this!==p&&(ce(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new gr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,f.Z)(function*(){let A=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield tn(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield Rn(p,function fr(w,p){return ln.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,A,O,H,X,ue,He,rt;const ut=null!==(I=m.displayName)&&void 0!==I?I:void 0,Ot=null!==(A=m.email)&&void 0!==A?A:void 0,Mi=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,sl=null!==(H=m.photoURL)&&void 0!==H?H:void 0,hf=null!==(X=m.tenantId)&&void 0!==X?X:void 0,ff=null!==(ue=m._redirectEventId)&&void 0!==ue?ue:void 0,ga=null!==(He=m.createdAt)&&void 0!==He?He:void 0,ju=null!==(rt=m.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:as,emailVerified:Dg,isAnonymous:kd,providerData:Hu,stsTokenManager:nw}=m;ce(as&&nw,p,"internal-error");const $u=Yi.fromJSON(this.name,nw);ce("string"==typeof as,p,"internal-error"),pr(ut,p.name),pr(Ot,p.name),ce("boolean"==typeof Dg,p,"internal-error"),ce("boolean"==typeof kd,p,"internal-error"),pr(Mi,p.name),pr(sl,p.name),pr(hf,p.name),pr(ff,p.name),pr(ga,p.name),pr(ju,p.name);const Sg=new gr({uid:as,auth:p,email:Ot,emailVerified:Dg,displayName:ut,isAnonymous:kd,photoURL:sl,phoneNumber:Mi,tenantId:hf,stsTokenManager:$u,createdAt:ga,lastLoginAt:ju});return Hu&&Array.isArray(Hu)&&(Sg.providerData=Hu.map(ny=>Object.assign({},ny))),ff&&(Sg._redirectEventId=ff),Sg}static _fromIdTokenResponse(p,m,I=!1){return(0,f.Z)(function*(){const A=new Yi;A.updateFromServerResponse(m);const O=new gr({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:I});return yield tn(O),O})()}}const ui=new Map;function Yn(w){$t(w instanceof Function,"Expected a class definition");let p=ui.get(w);return p?($t(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,ui.set(w,p),p)}const Ni=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,I){var A=this;return(0,f.Z)(function*(){A.storage[m]=I})()}_get(m){var I=this;return(0,f.Z)(function*(){const A=I.storage[m];return void 0===A?null:A})()}_remove(m){var I=this;return(0,f.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return w.type="NONE",w})();function $(w,p,m){return`firebase:${w}:${p}:${m}`}class j{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:A,name:O}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,O),this.fullPersistenceKey=$("persistence",A.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?gr._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,f.Z)(function*(){if(!m.length)return new j(Yn(Ni),p,I);const A=(yield Promise.all(m.map(function(){var He=(0,f.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return He.apply(this,arguments)}}()))).filter(He=>He);let O=A[0]||Yn(Ni);const H=$(I,p.config.apiKey,p.name);let X=null;for(const He of m)try{const rt=yield He._get(H);if(rt){const ut=gr._fromJSON(p,rt);He!==O&&(X=ut),O=He;break}}catch{}const ue=A.filter(He=>He._shouldAllowMigration);return O._shouldAllowMigration&&ue.length?(O=ue[0],X&&(yield O._set(H,X.toJSON())),yield Promise.all(m.map(function(){var He=(0,f.Z)(function*(rt){if(rt!==O)try{yield rt._remove(H)}catch{}});return function(rt){return He.apply(this,arguments)}}())),new j(O,p,I)):new j(O,p,I)})()}}function Z(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(St(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Te(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(mr(p))return"Blackberry";if(xt(p))return"Webos";if(ae(p))return"Safari";if((p.includes("chrome/")||et(p))&&!p.includes("edge/"))return"Chrome";if(bt(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Te(w=(0,L.z$)()){return/firefox\//i.test(w)}function ae(w=(0,L.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function et(w=(0,L.z$)()){return/crios\//i.test(w)}function St(w=(0,L.z$)()){return/iemobile/i.test(w)}function bt(w=(0,L.z$)()){return/android/i.test(w)}function mr(w=(0,L.z$)()){return/blackberry/i.test(w)}function xt(w=(0,L.z$)()){return/webos/i.test(w)}function Bn(w=(0,L.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Hs(w=(0,L.z$)()){return Bn(w)||bt(w)||xt(w)||mr(w)||/windows phone/i.test(w)||St(w)}function fe(w,p=[]){let m;switch(w){case"Browser":m=Z((0,L.z$)());break;case"Worker":m=`${Z((0,L.z$)())}-${w}`;break;default:m=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${te.SDK_VERSION}/${I}`}function Re(){return(Re=(0,f.Z)(function*(w){return(yield Pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function at(w,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,f.Z)(function*(w,p){return Pe(w,"GET","/v2/recaptchaConfig",De(w,p))})).apply(this,arguments)}function kt(w){return void 0!==w&&void 0!==w.getResponse}function nn(w){return void 0!==w&&void 0!==w.enterprise}class Qn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Or(w){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=A=>{const O=ne("internal-error");O.customData=A,m(O)},I.type="text/javascript",I.charset="UTF-8",function Xn(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function gs(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Wl{constructor(p){this.type="recaptcha-enterprise",this.auth=Jn(p)}verify(p="verify",m=!1){var I=this;return(0,f.Z)(function*(){function O(){return O=(0,f.Z)(function*(X){if(!m){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var ue=(0,f.Z)(function*(He,rt){at(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ut=>{if(void 0!==ut.recaptchaKey){const Ot=new Qn(ut);return null==X.tenantId?X._agentRecaptchaConfig=Ot:X._tenantRecaptchaConfigs[X.tenantId]=Ot,He(Ot.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(ut=>{rt(ut)})});return function(He,rt){return ue.apply(this,arguments)}}())}),O.apply(this,arguments)}function H(X,ue,He){const rt=window.grecaptcha;nn(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(X,{action:p}).then(ut=>{ue(ut)}).catch(()=>{ue("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,ue)=>{(function A(X){return O.apply(this,arguments)})(I.auth).then(He=>{if(!m&&nn(window.grecaptcha))H(He,X,ue);else{if(typeof window>"u")return void ue(new Error("RecaptchaVerifier is only supported in browser"));Or("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{H(He,X,ue)}).catch(rt=>{ue(rt)})}}).catch(He=>{ue(He)})})})()}}function ki(w,p,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(w,p,m,I=!1){const A=new Wl(w);let O;try{O=yield A.verify(m)}catch{O=yield A.verify(m,!0)}const H=Object.assign({},p);return Object.assign(H,I?{captchaResp:O}:{captchaResponse:O}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}class wc{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=O=>new Promise((H,X)=>{try{H(p(O))}catch(ue){X(ue)}});I.onAbort=m,this.queue.push(I);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const A of m.queue)yield A(p),A.onAbort&&I.push(A.onAbort)}catch(A){I.reverse();for(const O of I)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Zl{constructor(p,m,I,A){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vu(this),this.idTokenSubscription=new vu(this),this.beforeStateQueue=new wc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=Yn(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,O;if(!I._deleted&&(I.persistenceManager=yield j.create(I,p),!I._deleted)){if(null!==(A=I._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var I;const A=yield m.assertedPersistence.getCurrentUser();let O=A,H=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const X=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,ue=O?._redirectEventId,He=yield m.tryRedirectSignIn(p);(!X||X===ue)&&He?.user&&(O=He.user,H=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(H)try{yield m.beforeStateQueue.runMiddleware(O)}catch(X){O=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(X))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ce(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){try{yield tn(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function $o(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const I=p?(0,L.m9)(p):null;return I&&ce(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return p&&ce(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(Yn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,f.Z)(function*(){const m=yield at(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Qn(m);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new Wl(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,f.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&Yn(p)||m._popupRedirectResolver;ce(I,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[Yn(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var I,A;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,A){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),H=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(H,this,"internal-error"),H.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,I,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=fe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();A&&(I["X-Firebase-Client"]=A);const O=yield p._getAppCheckToken();return O&&(I["X-Firebase-AppCheck"]=O),I})()}_getAppCheckToken(){var p=this;return(0,f.Z)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function pt(w,...p){vt.logLevel<=_e.in.WARN&&vt.warn(`Auth (${te.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Jn(w){return(0,L.m9)(w)}class vu{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Sa(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function bh(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class zo{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return It("not implemented")}_getIdTokenResponse(p){return It("not implemented")}_linkToIdToken(p,m){return It("not implemented")}_getReauthenticationResolver(p){return It("not implemented")}}function zp(w,p){return wu.apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:resetPassword",De(w,p))})).apply(this,arguments)}function Th(w,p){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ic(){return(Ic=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:update",De(w,p))})).apply(this,arguments)}function $r(w,p){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithPassword",De(w,p))})).apply(this,arguments)}function Cc(w,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:sendOobCode",De(w,p))})).apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(w,p){return Cc(w,p)})).apply(this,arguments)}function Aa(w,p){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,f.Z)(function*(w,p){return Cc(w,p)})).apply(this,arguments)}function Yt(w,p){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(w,p){return Cc(w,p)})).apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(w,p){return Cc(w,p)})).apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithEmailLink",De(w,p))})).apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithEmailLink",De(w,p))})).apply(this,arguments)}class bc extends zo{constructor(p,m,I,A=null){super("password",I),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new bc(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new bc(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){var I;switch(m.signInMethod){case"password":const A={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const O=yield ki(p,A,"signInWithPassword");return $r(p,O)}return $r(p,A).catch(function(){var O=(0,f.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield ki(p,A,"signInWithPassword");return $r(p,X)}return Promise.reject(H)});return function(H){return O.apply(this,arguments)}}());case"emailLink":return function Wr(w,p){return Xl.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ce(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return Th(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function qp(w,p){return Cu.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Ce(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Fi(w,p){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithIdp",De(w,p))})).apply(this,arguments)}class Ct extends zo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ct(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ce("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:A}=m,O=(0,se._T)(m,["providerId","signInMethod"]);if(!I||!A)return null;const H=new Ct(I,A);return H.idToken=O.idToken||void 0,H.accessToken=O.accessToken||void 0,H.secret=O.secret,H.nonce=O.nonce,H.pendingToken=O.pendingToken||null,H}_getIdTokenResponse(p){return Fi(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Fi(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Fi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,L.xO)(m)}return p}}function Zr(){return(Zr=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:sendVerificationCode",De(w,p))})).apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithPhoneNumber",De(w,p))})).apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(w,p){const m=yield gt(w,"POST","/v1/accounts:signInWithPhoneNumber",De(w,p));if(m.temporaryProof)throw Sn(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const $s={USER_NOT_FOUND:"user-not-found"};function Dt(){return(Dt=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithPhoneNumber",De(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),$s)})).apply(this,arguments)}class Rr extends zo{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Rr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Rr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function qo(w,p){return xr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Eu(w,p){return kn.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Pa(w,p){return Dt.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:A,temporaryProof:O}=p;return I||m||A||O?new Rr({verificationId:m,verificationCode:I,phoneNumber:A,temporaryProof:O}):null}}class Pn{constructor(p){var m,I,A,O,H,X;const ue=(0,L.zd)((0,L.pd)(p)),He=null!==(m=ue.apiKey)&&void 0!==m?m:null,rt=null!==(I=ue.oobCode)&&void 0!==I?I:null,ut=function Wp(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ue.mode)&&void 0!==A?A:null);ce(He&&rt&&ut,"argument-error"),this.apiKey=He,this.operation=ut,this.code=rt,this.continueUrl=null!==(O=ue.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(H=ue.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(X=ue.tenantId)&&void 0!==X?X:null}static parseLink(p){const m=function Gs(w){const p=(0,L.zd)((0,L.pd)(w)).link,m=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,I=(0,L.zd)((0,L.pd)(w)).deep_link_id;return(I?(0,L.zd)((0,L.pd)(I)).link:null)||I||m||p||w}(p);try{return new Pn(m)}catch{return null}}}let Wo=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,I){return bc._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const A=Pn.parseLink(I);return ce(A,"argument-error"),bc._fromEmailAndCode(m,A.code,A.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class _r{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class zs extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class qs extends zs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ce("providerId"in m&&"signInMethod"in m,"argument-error"),Ct._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ce(p.idToken||p.accessToken,"argument-error"),Ct._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return qs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return qs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:O,nonce:H,providerId:X}=p;if(!I&&!A&&!m&&!O||!X)return null;try{return new qs(X)._credential({idToken:m,accessToken:I,nonce:H,pendingToken:O})}catch{return null}}}let wo=(()=>{class w extends zs{constructor(){super("facebook.com")}static credential(m){return Ct._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ui=(()=>{class w extends zs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Ct._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:A}=m;if(!I&&!A)return null;try{return w.credential(I,A)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Tc=(()=>{class w extends zs{constructor(){super("github.com")}static credential(m){return Ct._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ft extends zo{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Fi(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Fi(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Fi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:A,pendingToken:O}=m;return I&&A&&O&&I===A?new Ft(I,O):null}static _create(p,m){return new Ft(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ma extends _r{constructor(p){ce(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ma.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ma.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ft.fromJSON(p);return ce(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Ft._create(I,m)}catch{return null}}}let Dc=(()=>{class w extends zs{constructor(){super("twitter.com")}static credential(m,I){return Ct._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=m;if(!I||!A)return null;try{return w.credential(I,A)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function yr(w,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signUp",De(w,p))})).apply(this,arguments)}class vr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,A=!1){return(0,f.Z)(function*(){const O=yield gr._fromIdTokenResponse(p,I,A),H=Io(I);return new vr({user:O,providerId:H,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const A=Io(I);return new vr({user:p,providerId:A,_tokenResponse:I,operationType:m})})()}}function Io(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Zp(){return(Zp=(0,f.Z)(function*(w){var p;const m=Jn(w);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new vr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield yr(m,{returnSecureToken:!0}),A=yield vr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class wr extends L.ZR{constructor(p,m,I,A){var O;super(m.code,m.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,wr.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,A){return new wr(p,m,I,A)}}function Kr(w,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?wr._fromErrorAndOperation(w,O,p,I):O})}function Sc(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function Si(){return Si=(0,f.Z)(function*(w,p){const m=(0,L.m9)(w);yield xa(!0,m,p);const{providerUserInfo:I}=yield function Hr(w,p){return bi.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=Sc(I||[]);return m.providerData=m.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Si.apply(this,arguments)}function li(w,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(w,p,m=!1){const I=yield Rn(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return vr._forOperation(w,"link",I)})).apply(this,arguments)}function xa(w,p,m){return ed.apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(w,p,m){yield tn(p);const A=!1===w?"provider-already-linked":"no-such-provider";ce(Sc(p.providerData).has(m)===w,p.auth,A)})).apply(this,arguments)}function x_(w,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(w,p,m=!1){const{auth:I}=w,A="reauthenticate";try{const O=yield Rn(w,Kr(I,A,p,w),m);ce(O.idToken,I,"internal-error");const H=Pt(O.idToken);ce(H,I,"internal-error");const{sub:X}=H;return ce(w.uid===X,I,"user-mismatch"),vr._forOperation(w,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ce(I,"user-mismatch"),O}})).apply(this,arguments)}function td(w,p){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,f.Z)(function*(w,p,m=!1){const I="signIn",A=yield Kr(w,I,p),O=yield vr._fromIdTokenResponse(w,I,A);return m||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function nd(w,p){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,f.Z)(function*(w,p){return td(Jn(w),p)})).apply(this,arguments)}function R_(w,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(w,p){const m=(0,L.m9)(w);return yield xa(!1,m,p.providerId),li(m,p)})).apply(this,arguments)}function N_(w,p){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,f.Z)(function*(w,p){return x_((0,L.m9)(w),p)})).apply(this,arguments)}function Yp(){return(Yp=(0,f.Z)(function*(w,p){return gt(w,"POST","/v1/accounts:signInWithCustomToken",De(w,p))})).apply(this,arguments)}function Ws(){return Ws=(0,f.Z)(function*(w,p){const m=Jn(w),I=yield function H0(w,p){return Yp.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),A=yield vr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(A.user),A}),Ws.apply(this,arguments)}class rd{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ra._fromServerResponse(p,m):"totpInfo"in m?id._fromServerResponse(p,m):Ce(p,"internal-error")}}class Ra extends rd{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ra(m)}}class id extends rd{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new id(m)}}function bu(w,p,m){var I;ce((null===(I=m.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ce(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ce(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ce(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Tu(){return Tu=(0,f.Z)(function*(w,p,m){var I;const A=Jn(w),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const H=yield ki(A,O,"getOobCode",!0);m&&bu(A,H,m),yield Aa(A,H)}else m&&bu(A,O,m),yield Aa(A,O).catch(function(){var H=(0,f.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ue=yield ki(A,O,"getOobCode",!0);m&&bu(A,ue,m),yield Aa(A,ue)}});return function(X){return H.apply(this,arguments)}}())}),Tu.apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(w,p,m){yield zp((0,L.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Yr(){return Yr=(0,f.Z)(function*(w,p){yield function Li(w,p){return Ic.apply(this,arguments)}((0,L.m9)(w),{oobCode:p})}),Yr.apply(this,arguments)}function Mc(w,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(w,p){const m=(0,L.m9)(w),I=yield zp(m,{oobCode:p}),A=I.requestType;switch(ce(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(I.mfaInfo,m,"internal-error");default:ce(I.email,m,"internal-error")}let O=null;return I.mfaInfo&&(O=rd._fromServerResponse(Jn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(w,p){const{data:m}=yield Mc((0,L.m9)(w),p);return m.email})).apply(this,arguments)}function xc(){return xc=(0,f.Z)(function*(w,p,m){var I;const A=Jn(w),O={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let H;if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const He=yield ki(A,O,"signUpPassword");H=yr(A,He)}else H=yr(A,O).catch(function(){var He=(0,f.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ut=yield ki(A,O,"signUpPassword");return yr(A,ut)}return Promise.reject(rt)});return function(rt){return He.apply(this,arguments)}}());const X=yield H.catch(He=>Promise.reject(He)),ue=yield vr._fromIdTokenResponse(A,"signIn",X);return yield A._updateCurrentUser(ue.user),ue}),xc.apply(this,arguments)}function Wn(){return Wn=(0,f.Z)(function*(w,p,m){var I;const A=Jn(w),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function H(X,ue){ce(ue.handleCodeInApp,A,"argument-error"),ue&&bu(A,X,ue)}if(null!==(I=A._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const X=yield ki(A,O,"getOobCode",!0);H(X,m),yield Yt(A,X)}else H(O,m),yield Yt(A,O).catch(function(){var X=(0,f.Z)(function*(ue){if("auth/missing-recaptcha-token"!==ue.code)return Promise.reject(ue);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield ki(A,O,"getOobCode",!0);H(He,m),yield Yt(A,He)}});return function(ue){return X.apply(this,arguments)}}())}),Wn.apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w),A=Wo.credentialWithLink(p,m||Pr());return ce(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),nd(I,A)})).apply(this,arguments)}function Du(){return(Du=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:createAuthUri",De(w,p))})).apply(this,arguments)}function Rh(){return Rh=(0,f.Z)(function*(w,p){const I={identifier:p,continueUri:si()?Pr():"http://localhost"},{signinMethods:A}=yield function Nc(w,p){return Du.apply(this,arguments)}((0,L.m9)(w),I);return A||[]}),Rh.apply(this,arguments)}function ka(){return ka=(0,f.Z)(function*(w,p){const m=(0,L.m9)(w),A={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&bu(m.auth,A,p);const{email:O}=yield function Sh(w,p){return Ec.apply(this,arguments)}(m.auth,A);O!==w.email&&(yield w.reload())}),ka.apply(this,arguments)}function Co(){return Co=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&bu(I.auth,O,m);const{email:H}=yield function qr(w,p){return vo.apply(this,arguments)}(I.auth,O);H!==w.email&&(yield w.reload())}),Co.apply(this,arguments)}function eg(){return(eg=(0,f.Z)(function*(w,p){return Pe(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Lc(){return Lc=(0,f.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,L.m9)(w),O={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},H=yield Rn(I,function Jp(w,p){return eg.apply(this,arguments)}(I.auth,O));I.displayName=H.displayName||null,I.photoURL=H.photoUrl||null;const X=I.providerData.find(({providerId:ue})=>"password"===ue);X&&(X.displayName=I.displayName,X.photoURL=I.photoURL),yield I._updateTokensIfNecessary(H)}),Lc.apply(this,arguments)}function tg(w,p,m){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(w,p,m){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const H=yield Rn(w,Th(I,O));yield w._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Jo{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Su extends Jo{constructor(p,m,I,A){super(p,m,I),this.username=A}}class ad extends Jo{constructor(p,m){super(p,"facebook.com",m)}}class Fh extends Su{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Fc extends Jo{constructor(p,m){super(p,"google.com",m)}}class ea extends Su{constructor(p,m,I){super(p,"twitter.com",m,I)}}function ng(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Lh(w){var p,m;if(!w)return null;const{providerId:I}=w,A=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const H=null===(m=null===(p=Pt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(H)return new Jo(O,"anonymous"!==H&&"custom"!==H?H:null)}if(!I)return null;switch(I){case"facebook.com":return new ad(O,A);case"github.com":return new Fh(O,A);case"google.com":return new Fc(O,A);case"twitter.com":return new ea(O,A,w.screenName||null);case"custom":case"anonymous":return new Jo(O,null);default:return new Jo(O,I,A)}}(m)}class Zn{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new Zn("enroll",p,m)}static _fromMfaPendingCredential(p){return new Zn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Zn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Zn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Fa{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=Jn(p),A=m.customData._serverResponse,O=(A.mfaInfo||[]).map(X=>rd._fromServerResponse(I,X));ce(A.mfaPendingCredential,I,"internal-error");const H=Zn._fromMfaPendingCredential(A.mfaPendingCredential);return new Fa(H,O,function(){var X=(0,f.Z)(function*(ue){const He=yield ue._process(I,H);delete A.mfaInfo,delete A.mfaPendingCredential;const rt=Object.assign(Object.assign({},A),{idToken:He.idToken,refreshToken:He.refreshToken});switch(m.operationType){case"signIn":const ut=yield vr._fromIdTokenResponse(I,m.operationType,rt);return yield I._updateCurrentUser(ut.user),ut;case"reauthenticate":return ce(m.user,I,"internal-error"),vr._forOperation(m.user,m.operationType,rt);default:Ce(I,"internal-error")}});return function(ue){return X.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}class ta{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>rd._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new ta(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Zn._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,f.Z)(function*(){const A=p,O=yield I.getSession(),H=yield Rn(I.user,A._process(I.user.auth,O,m));return yield I.user._updateTokensIfNecessary(H),I.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){const I="string"==typeof p?p:p.uid,A=yield m.user.getIdToken();try{const O=yield Rn(m.user,function Bh(w,p){return Pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",De(w,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:H})=>H!==I),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const Ua=new WeakMap,Tt="__sak";class jh{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Tt,"1"),this.storage.removeItem(Tt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const na=(()=>{class w extends jh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sg(){const w=(0,L.z$)();return ae(w)||Bn(w)}()&&function _u(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),O=this.localCache[I];A!==O&&m(I,O,A)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((X,ue,He)=>{this.notifyListeners(X,He)});const A=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(A);if(m.newValue!==X)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!I)return}const O=()=>{const X=this.storage.getItem(A);!I&&this.localCache[A]===X||this.notifyListeners(A,X)},H=this.storage.getItem(A);!function ps(){return(0,L.w1)()&&10===document.documentMode}()||H===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,I){this.localCache[m]=I;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var A=()=>super._set,O=this;return(0,f.Z)(function*(){yield A().call(O,m,I),O.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,A=this;return(0,f.Z)(function*(){const O=yield I().call(A,m);return A.localCache[m]=JSON.stringify(O),O})()}_remove(m){var I=()=>super._remove,A=this;return(0,f.Z)(function*(){yield I().call(A,m),delete A.localCache[m]})()}}return w.type="LOCAL",w})(),ra=(()=>{class w extends jh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return w.type="SESSION",w})();let dd=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(O=>O.isListeningto(m));if(I)return I;const A=new w(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,f.Z)(function*(){const A=m,{eventId:O,eventType:H,data:X}=A.data,ue=I.handlersMap[H];if(!ue?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:H});const He=Array.from(ue).map(function(){var ut=(0,f.Z)(function*(Ot){return Ot(A.origin,X)});return function(Ot){return ut.apply(this,arguments)}}()),rt=yield function k_(w){return Promise.all(w.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(He);A.ports[0].postMessage({status:"done",eventId:O,eventType:H,response:rt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function hd(w="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return w+m}class z0{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var A=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let H,X;return new Promise((ue,He)=>{const rt=hd("",20);O.port1.start();const ut=setTimeout(()=>{He(new Error("unsupported_event"))},I);X={messageChannel:O,onMessage(Ot){const Mi=Ot;if(Mi.data.eventId===rt)switch(Mi.data.status){case"ack":clearTimeout(ut),H=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),ue(Mi.data.response);break;default:clearTimeout(ut),clearTimeout(H),He(new Error("invalid_response"))}}},A.handlers.add(X),O.port1.addEventListener("message",X.onMessage),A.target.postMessage({eventType:p,eventId:rt,data:m},[O.port2])}).finally(()=>{X&&A.removeMessageHandler(X)})})()}}function ye(){return window}function fd(){return typeof ye().WorkerGlobalScope<"u"&&"function"==typeof ye().importScripts}function or(){return(or=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qi="firebaseLocalStorageDb",ia="firebaseLocalStorage",pd="fbase_key";class gd{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Mu(w,p){return w.transaction([ia],p?"readwrite":"readonly").objectStore(ia)}function Xi(){const w=indexedDB.open(Qi,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ia,{keyPath:pd})}catch(A){m(A)}}),w.addEventListener("success",(0,f.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ia)?p(I):(I.close(),yield function di(){const w=indexedDB.deleteDatabase(Qi);return new gd(w).toPromise()}(),p(yield Xi()))}))})}function Ba(w,p,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(w,p,m){const I=Mu(w,!0).put({[pd]:p,value:m});return new gd(I).toPromise()})).apply(this,arguments)}function md(){return(md=(0,f.Z)(function*(w,p){const m=Mu(w,!1).get(p),I=yield new gd(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function _d(w,p){const m=Mu(w,!0).delete(p);return new gd(m).toPromise()}const sa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Xi()),m.db})()}_withRetries(m){var I=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const O=yield I._openDb();return yield m(O)}catch(O){if(A++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return fd()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=dd._getInstance(function jn(){return fd()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(A,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(A,O){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var I,A;if(m.activeServiceWorker=yield function ag(){return or.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new z0(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);O&&null!==(I=O[0])&&void 0!==I&&I.fulfilled&&null!==(A=O[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Pu(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Xi();return yield Ba(m,Tt,"1"),yield _d(m,Tt),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(O=>Ba(O,m,I)),A.localCache[m]=I,A.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,f.Z)(function*(){const A=yield I._withRetries(O=>function Cr(w,p){return md.apply(this,arguments)}(O,m));return I.localCache[m]=A,A})()}_remove(m){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(A=>_d(A,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const I=yield m._withRetries(H=>{const X=Mu(H,!1).getAll();return new gd(X).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:H,value:X}of I)O.add(H),JSON.stringify(m.localCache[H])!==JSON.stringify(X)&&(m.notifyListeners(H,X),A.push(H));for(const H of Object.keys(m.localCache))m.localCache[H]&&!O.has(H)&&(m.notifyListeners(H,null),A.push(H));return A})()}notifyListeners(m,I){this.localCache[m]=I;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),ja=1e12;class qh{constructor(p){this.auth=p,this.counter=ja,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new Id(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||ja;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ja))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var I;return null===(I=m._widgets.get(p||ja))||void 0===I||I.execute(),""})()}}class Id{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ce(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cg(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hc=gs("rcb"),lg=new js(3e4,6e4);class hi{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ye().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ce(function bo(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&kt(ye().grecaptcha)?Promise.resolve(ye().grecaptcha):new Promise((I,A)=>{const O=ye().setTimeout(()=>{A(ne(p,"network-request-failed"))},lg.get());ye()[Hc]=()=>{ye().clearTimeout(O),delete ye()[Hc];const X=ye().grecaptcha;if(!X||!kt(X))return void A(ne(p,"internal-error"));const ue=X.render;X.render=(He,rt)=>{const ut=ue(He,rt);return this.counter++,ut},this.hostLanguage=m,I(X)},Or(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Hc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),A(ne(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=ye().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hn{load(p){return(0,f.Z)(function*(){return new qh(p)})()}clearedOneInstance(){}}const Cd="recaptcha",F_={theme:"light",type:"image"};class Wh{constructor(p,m=Object.assign({},F_),I){this.parameters=m,this.type=Cd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jn(I),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ce(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hn:new hi,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(O=>{const H=X=>{X&&(p.tokenChangeListeners.delete(H),O(X))};p.tokenChangeListeners.add(H),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=ye()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){ce(si()&&!fd(),p.auth,"internal-error"),yield function U_(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function re(w){return Re.apply(this,arguments)}(p.auth);ce(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ha{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Rr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function _s(){return(_s=(0,f.Z)(function*(w,p,m){const I=Jn(w),A=yield Ks(I,p,(0,L.m9)(m));return new Ha(A,O=>nd(I,O))})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w);yield xa(!1,I,"phone");const A=yield Ks(I.auth,p,(0,L.m9)(m));return new Ha(A,O=>R_(I,O))})).apply(this,arguments)}function Et(){return(Et=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w),A=yield Ks(I.auth,p,(0,L.m9)(m));return new Ha(A,O=>N_(I,O))})).apply(this,arguments)}function Ks(w,p,m){return On.apply(this,arguments)}function On(){return On=(0,f.Z)(function*(w,p,m){var I;const A=yield m.verify();try{let O;if(ce("string"==typeof A,w,"argument-error"),ce(m.type===Cd,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const H=O.session;if("phoneNumber"in O)return ce("enroll"===H.type,w,"internal-error"),(yield function cd(w,p){return Pe(w,"POST","/v2/accounts/mfaEnrollment:start",De(w,p))}(w,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ce("signin"===H.type,w,"internal-error");const X=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ce(X,w,"missing-multi-factor-info"),(yield function Gh(w,p){return Pe(w,"POST","/v2/accounts/mfaSignIn:start",De(w,p))}(w,{mfaPendingCredential:H.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function An(w,p){return Zr.apply(this,arguments)}(w,{phoneNumber:O.phoneNumber,recaptchaToken:A});return H}}finally{m._reset()}}),On.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(w,p){yield li((0,L.m9)(w),p)})).apply(this,arguments)}let oa=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=Jn(m)}verifyPhoneNumber(m,I){return Ks(this.auth,m,(0,L.m9)(I))}static credential(m,I){return Rr._fromVerification(m,I)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:A}=m;return I&&A?Rr._fromTokenResponse(I,A):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function kr(w,p){return p?Yn(p):(ce(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Lr extends zo{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Fi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Fi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Fi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function $a(w){return td(w.auth,new Lr(w),w.bypassAuthState)}function Ou(w){const{auth:p,user:m}=w;return ce(m,p,"internal-error"),x_(m,new Lr(w),w.bypassAuthState)}function aa(w){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(w){const{auth:p,user:m}=w;return ce(m,p,"internal-error"),li(m,new Lr(w),w.bypassAuthState)})).apply(this,arguments)}class Ed{constructor(p,m,I,A,O=!1){this.auth=p,this.resolver=I,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(I,A){p.pendingPromise={resolve:I,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(I,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:O,tenantId:H,error:X,type:ue}=p;if(X)return void m.reject(X);const He={auth:m.auth,requestUri:I,sessionId:A,tenantId:H||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ue)(He))}catch(rt){m.reject(rt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return $a;case"linkViaPopup":case"linkViaRedirect":return aa;case"reauthViaPopup":case"reauthViaRedirect":return Ou;default:Ce(this.auth,"internal-error")}}resolve(p){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ys=new js(2e3,1e4);function V_(){return(V_=(0,f.Z)(function*(w,p,m){const I=Jn(w);Le(w,p,_r);const A=kr(I,m);return new N(I,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w);Le(I.auth,p,_r);const A=kr(I.auth,m);return new N(I.auth,"reauthViaPopup",p,A,I).executeNotNull()})).apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w);Le(I.auth,p,_r);const A=kr(I.auth,m);return new N(I.auth,"linkViaPopup",p,A,I).executeNotNull()})).apply(this,arguments)}let N=(()=>{class w extends Ed{constructor(m,I,A,O,H){super(m,I,O,H),this.provider=A,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const I=yield m.execute();return ce(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,f.Z)(function*(){$t(1===m.filter.length,"Popup operations only handle one event");const I=hd();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,A;this.pollId=null!==(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ys.get())};m()}}return w.currentPopupAction=null,w})();const cr="pendingRedirect",Gc=new Map;class Zh extends Ed{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let I=Gc.get(m.auth._key());if(!I){try{const O=(yield function Ga(w,p){return bd.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(O)}catch(A){I=()=>Promise.reject(A)}Gc.set(m.auth._key(),I)}return m.bypassAuthState||Gc.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const A=yield I.auth._redirectUserForId(p.eventId);if(A)return I.user=A,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function bd(){return(bd=(0,f.Z)(function*(w,p){const m=ts(p),I=qc(w);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(m));return yield I._remove(m),A})).apply(this,arguments)}function Ji(w,p){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,f.Z)(function*(w,p){return qc(w)._set(ts(p),"true")})).apply(this,arguments)}function es(w,p){Gc.set(w._key(),p)}function qc(w){return Yn(w._redirectPersistence)}function ts(w){return $(cr,w.config.apiKey,w.name)}function Ru(w,p,m){return function Yh(w,p,m){return So.apply(this,arguments)}(w,p,m)}function So(){return(So=(0,f.Z)(function*(w,p,m){const I=Jn(w);Le(w,p,_r),yield I._initializationPromise;const A=kr(I,m);return yield Ji(A,I),A._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function Ao(w,p,m){return function Td(w,p,m){return Nu.apply(this,arguments)}(w,p,m)}function Nu(){return(Nu=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w);Le(I.auth,p,_r),yield I.auth._initializationPromise;const A=kr(I.auth,m);yield Ji(A,I.auth);const O=yield Wc(I);return A._openRedirect(I.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function br(w,p,m){return function ua(w,p,m){return ns.apply(this,arguments)}(w,p,m)}function ns(){return(ns=(0,f.Z)(function*(w,p,m){const I=(0,L.m9)(w);Le(I.auth,p,_r),yield I.auth._initializationPromise;const A=kr(I.auth,m);yield xa(!1,I,p.providerId),yield Ji(A,I.auth);const O=yield Wc(I);return A._openRedirect(I.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(w,p){return yield Jn(w)._initializationPromise,ku(w,p,!1)})).apply(this,arguments)}function ku(w,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(w,p,m=!1){const I=Jn(w),A=kr(I,p),H=yield new Zh(I,A,m).execute();return H&&!m&&(delete H.user._redirectEventId,yield I._persistUserIfCurrent(H.user),yield I._setRedirectUser(null,p)),H})).apply(this,arguments)}function Wc(w){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(w){const p=hd(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class is{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function qa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Po(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Po(p)){const A=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(ne(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(p))}saveEventToCache(p){this.cachedEventUids.add(za(p)),this.lastProcessedEventTime=Date.now()}}function za(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Po({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Zc(w){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(w,p={}){return Pe(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Wa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Za=/^https?/;function Is(){return(Is=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Zc(w);for(const m of p)try{if(ca(m))return}catch{}Ce(w,"unauthorized-domain")})).apply(this,arguments)}function ca(w){const p=Pr(),{protocol:m,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const H=new URL(w);return""===H.hostname&&""===I?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&H.hostname===I}if(!Za.test(m))return!1;if(Wa.test(w))return I===w;const A=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const B_=new js(3e4,6e4);function Xh(){const w=ye().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let Mo=null;const Kc=new js(5e3,15e3),q0="__/auth/iframe",dg="emulator/auth/iframe",Cs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hg(w){const p=w.config;ce(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?le(p,dg):`https://${w.config.authDomain}/${q0}`,I={apiKey:p.apiKey,appName:w.name,v:te.SDK_VERSION},A=Yc.get(w.config.apiHost);A&&(I.eid=A);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${m}?${(0,L.xO)(I).slice(1)}`}function D(){return D=(0,f.Z)(function*(w){const p=yield function Ka(w){return Mo=Mo||function la(w){return new Promise((p,m)=>{var I,A,O;function H(){Xh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Xh(),m(ne(w,"network-request-failed"))},timeout:B_.get()})}if(null!==(A=null===(I=ye().gapi)||void 0===I?void 0:I.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(O=ye().gapi)||void 0===O||!O.load){const X=gs("iframefcb");return ye()[X]=()=>{gapi.load?H():m(ne(w,"network-request-failed"))},Or(`https://apis.google.com/js/api.js?onload=${X}`).catch(ue=>m(ue))}H()}}).catch(p=>{throw Mo=null,p})}(w),Mo}(w),m=ye().gapi;return ce(m,w,"internal-error"),p.open({where:document.body,url:hg(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cs,dontclear:!0},I=>new Promise(function(){var A=(0,f.Z)(function*(O,H){yield I.restyle({setHideOnLeave:!1});const X=ne(w,"network-request-failed"),ue=ye().setTimeout(()=>{H(X)},Kc.get());function He(){ye().clearTimeout(ue),O(I)}I.ping(He).then(He,()=>{H(X)})});return function(O,H){return A.apply(this,arguments)}}()))}),D.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $e{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rt="__/auth/handler",Mt="emulator/auth/handler",ss=encodeURIComponent("fac");function sn(w,p,m,I,A,O){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(w,p,m,I,A,O){ce(w.config.authDomain,w,"auth-domain-config-required"),ce(w.config.apiKey,w,"invalid-api-key");const H={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:I,v:te.SDK_VERSION,eventId:A};if(p instanceof _r){p.setDefaultLanguage(w.languageCode),H.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(H.customParameters=JSON.stringify(p.getCustomParameters()));for(const[rt,ut]of Object.entries(O||{}))H[rt]=ut}if(p instanceof zs){const rt=p.getScopes().filter(ut=>""!==ut);rt.length>0&&(H.scopes=rt.join(","))}w.tenantId&&(H.tid=w.tenantId);const X=H;for(const rt of Object.keys(X))void 0===X[rt]&&delete X[rt];const ue=yield w._getAppCheckToken(),He=ue?`#${ss}=${encodeURIComponent(ue)}`:"";return`${function bs({config:w}){return w.emulator?le(w,Mt):`https://${w.authDomain}/${Rt}`}(w)}?${(0,L.xO)(X).slice(1)}${He}`})).apply(this,arguments)}const Ya="webStorageSupport",Ts=class ji{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ra,this._completeRedirectFn=ku,this._overrideRedirectResult=es}_openPopup(p,m,I,A){var O=this;return(0,f.Z)(function*(){var H;$t(null===(H=O.eventManagers[p._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const X=yield sn(p,m,I,Pr(),A);return function je(w,p,m,I=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),H=Math.max((window.screen.availWidth-I)/2,0).toString();let X="";const ue=Object.assign(Object.assign({},M),{width:I.toString(),height:A.toString(),top:O,left:H}),He=(0,L.z$)().toLowerCase();m&&(X=et(He)?"_blank":m),Te(He)&&(p=p||"http://localhost",ue.scrollbars="yes");const rt=Object.entries(ue).reduce((Ot,[Mi,sl])=>`${Ot}${Mi}=${sl},`,"");if(function sr(w=(0,L.z$)()){var p;return Bn(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(He)&&"_self"!==X)return function lt(w,p){const m=document.createElement("a");m.href=w,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",X),new $e(null);const ut=window.open(p||"",X,rt);ce(ut,w,"popup-blocked");try{ut.focus()}catch{}return new $e(ut)}(p,X,hd())})()}_openRedirect(p,m,I,A){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(p),function rn(w){ye().location.href=w}(yield sn(p,m,I,Pr(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:O}=this.eventManagers[m];return A?Promise.resolve(A):($t(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const I=yield function E(w){return D.apply(this,arguments)}(p),A=new is(p);return I.register("authEvent",O=>(ce(O?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=I,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ya,{type:Ya},A=>{var O;const H=null===(O=A?.[0])||void 0===O?void 0:O[Ya];void 0!==H&&m(!!H),Ce(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Qh(w){return Is.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Hs()||ae()||Bn()}};class Jh{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return It("unexpected MultiFactorSessionType")}}}class fg extends Jh{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new fg(p)}_finalizeEnroll(p,m,I){return function Eo(w,p){return Pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",De(w,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function vd(w,p){return Pe(w,"POST","/v2/accounts/mfaSignIn:finalize",De(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let W0=(()=>{class w{constructor(){}static assertion(m){return fg._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var j_="@firebase/auth";class K0{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function da(){return window}(0,L.Pz)("authIdTokenMaxAge"),function H_(w){(0,te._registerComponent)(new we.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:H,authDomain:X}=I.options;ce(H&&!H.includes(":"),"invalid-api-key",{appName:I.name});const ue={apiKey:H,authDomain:X,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fe(w)},He=new Zl(I,A,O,ue);return function Gp(w,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(Yn);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,p?.popupRedirectResolver)}(He,m),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new we.wA("auth-internal",p=>{const m=Jn(p.getProvider("auth").getImmediate());return new K0(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(j_,"0.23.2",function tf(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,te.registerVersion)(j_,"0.23.2","esm2017")}("Browser");function Xc(){return Xc=(0,f.Z)(function*(w,p,m){var I;const{BuildInfo:A}=da();$t(p.sessionId,"AuthEvent did not contain a session ID");const O=yield function _g(w){return Uu.apply(this,arguments)}(p.sessionId),H={};return Bn()?H.ibi=A.packageName:bt()?H.apn=A.packageName:Ce(w,"operation-not-supported-in-this-environment"),A.displayName&&(H.appDisplayName=A.displayName),H.sessionId=O,sn(w,m,p.type,void 0,null!==(I=p.eventId)&&void 0!==I?I:void 0,H)}),Xc.apply(this,arguments)}function Od(){return(Od=(0,f.Z)(function*(w){const{BuildInfo:p}=da(),m={};Bn()?m.iosBundleId=p.packageName:bt()?m.androidPackageName=p.packageName:Ce(w,"operation-not-supported-in-this-environment"),yield Zc(w,m)})).apply(this,arguments)}function mg(){return(mg=(0,f.Z)(function*(w,p,m){const{cordova:I}=da();let A=()=>{};try{yield new Promise((O,H)=>{let X=null;function ue(){var ut;O();const Ot=null===(ut=I.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Ot&&Ot(),"function"==typeof m?.close&&m.close()}function He(){X||(X=window.setTimeout(()=>{H(ne(w,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===document?.visibilityState&&He()}p.addPassiveListener(ue),document.addEventListener("resume",He,!1),bt()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{p.removePassiveListener(ue),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",rt,!1),X&&window.clearTimeout(X)}})}finally{A()}})).apply(this,arguments)}function Uu(){return(Uu=(0,f.Z)(function*(w){const p=function G_(w){if($t(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const p=new ArrayBuffer(w.length),m=new Uint8Array(p);for(let I=0;I<w.length;I++)m[I]=w.charCodeAt(I);return m}(w),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class q_ extends is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function W_(w){return nf.apply(this,arguments)}function nf(){return(nf=(0,f.Z)(function*(w){const p=yield vg()._get(wg(w));return p&&(yield vg()._remove(wg(w))),p})).apply(this,arguments)}function rf(){const w=[];for(let m=0;m<20;m++){const I=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return w.join("")}function vg(){return Yn(na)}function wg(w){return $("authEvent",w.config.apiKey,w.name)}function sf(w){if(!w?.includes("?"))return{};const[p,...m]=w.split("?");return(0,L.zd)(m.join("?"))}const Qt=class dn{constructor(){this._redirectPersistence=ra,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ku,this._overrideRedirectResult=es}_initialize(p){var m=this;return(0,f.Z)(function*(){const I=p._key();let A=m.eventManagers.get(I);return A||(A=new q_(p),m.eventManagers.set(I,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ce(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,I,A){var O=this;return(0,f.Z)(function*(){!function Q0(w){var p,m,I,A,O,H,X,ue,He,rt;const ut=da();ce("function"==typeof(null===(p=ut?.universalLinks)||void 0===p?void 0:p.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ce(typeof(null===(m=ut?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ce("function"==typeof(null===(O=null===(A=null===(I=ut?.cordova)||void 0===I?void 0:I.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(ue=null===(X=null===(H=ut?.cordova)||void 0===H?void 0:H.plugins)||void 0===X?void 0:X.browsertab)||void 0===ue?void 0:ue.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(rt=null===(He=ut?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===rt?void 0:rt.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const H=yield O._initialize(p);yield H.initialized(),H.resetRedirect(),function zc(){Gc.clear()}(),yield O._originValidation(p);const X=function X0(w,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:rf(),postBody:null,tenantId:w.tenantId,error:ne(w,"no-auth-event")}}(p,I,A);yield function yg(w,p){return vg()._set(wg(w),p)}(p,X);const ue=yield function Pd(w,p,m){return Xc.apply(this,arguments)}(p,X,m),He=yield function Y0(w){const{cordova:p}=da();return new Promise(m=>{p.plugins.browsertab.isAvailable(I=>{let A=null;I?p.plugins.browsertab.openUrl(w):A=p.InAppBrowser.open(w,function Kt(w=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),m(A)})})}(ue);return function ub(w,p,m){return mg.apply(this,arguments)}(p,H,He)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Md(w){return Od.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:I,handleOpenURL:A,BuildInfo:O}=da(),H=setTimeout((0,f.Z)(function*(){yield W_(p),m.onEvent(ha())}),500),X=function(){var rt=(0,f.Z)(function*(ut){clearTimeout(H);const Ot=yield W_(p);let Mi=null;Ot&&ut?.url&&(Mi=function J0(w,p){var m,I;const A=function ew(w){const p=sf(w),m=p.link?decodeURIComponent(p.link):void 0,I=sf(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return sf(A).link||A||I||m||w}(p);if(A.includes("/__/auth/callback")){const O=sf(A),H=O.firebaseError?function Jc(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,X=null===(I=null===(m=H?.code)||void 0===m?void 0:m.split("auth/"))||void 0===I?void 0:I[1],ue=X?ne(X):null;return ue?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:ue,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:A,postBody:null}}return null}(Ot,ut.url)),m.onEvent(Mi||ha())});return function(Ot){return rt.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,X);const ue=A,He=`${O.packageName.toLowerCase()}://`;da().handleOpenURL=function(){var rt=(0,f.Z)(function*(ut){if(ut.toLowerCase().startsWith(He)&&X({url:ut}),"function"==typeof ue)try{ue(ut)}catch(Ot){console.error(Ot)}});return function(ut){return rt.apply(this,arguments)}}()}};function ha(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ne("no-auth-event")}}function Vu(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function zt(w=(0,L.z$)()){return!("file:"!==Vu()&&"ionic:"!==Vu()&&"capacitor:"!==Vu()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function K_(){try{const w=self.localStorage,p=hd();if(w)return w.setItem(p,"1"),w.removeItem(p),!function Ai(w=(0,L.z$)()){return function af(){return(0,L.w1)()&&11===document?.documentMode}()||function nl(w=(0,L.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,L.hl)()}catch{return Ig()&&(0,L.hl)()}return!1}function Ig(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cg(){return(function _n(){return"http:"===Vu()||"https:"===Vu()}()||(0,L.ru)()||zt())&&!function fi(){return(0,L.b$)()||(0,L.UG)()}()&&K_()&&!Ig()}function uf(){return zt()&&typeof document<"u"}function xd(){return(xd=(0,f.Z)(function*(){return!!uf()&&new Promise(w=>{const p=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),w(!0)})})})).apply(this,arguments)}const os={LOCAL:"local",NONE:"none",SESSION:"session"},Bu=ce,Y_="persistence";function pi(w){return rl.apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(w){yield w._initializationPromise;const p=qt(),m=$(Y_,w.config.apiKey,w.name);p&&p.setItem(m,w._getPersistence())})).apply(this,arguments)}function qt(){var w;try{return(null===(w=function Rd(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const Fr=ce;class Pi{constructor(){this.browserResolver=Yn(Ts),this.cordovaResolver=Yn(Qt),this.underlyingResolver=null,this._redirectPersistence=ra,this._completeRedirectFn=ku,this._overrideRedirectResult=es}_initialize(p){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,I,A){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,m,I,A)})()}_openRedirect(p,m,I,A){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,m,I,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return uf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const m=yield function fa(){return xd.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function cf(w){return w.unwrap()}function lf(w){return Q_(w)}function Q_(w){const{_tokenResponse:p}=w instanceof L.ZR?w.customData:w;if(!p)return null;if(!(w instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return oa.credentialFromResult(w);const m=p.providerId;if(!m||m===me.PASSWORD)return null;let I;switch(m){case me.GOOGLE:I=Ui;break;case me.FACEBOOK:I=wo;break;case me.GITHUB:I=Tc;break;case me.TWITTER:I=Dc;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:H,pendingToken:X,nonce:ue}=p;return O||H||A||X?X?m.startsWith("saml.")?Ft._create(m,X):Ct._fromParams({providerId:m,signInMethod:m,pendingToken:X,idToken:A,accessToken:O}):new qs(m).credential({idToken:A,accessToken:O,rawNonce:ue}):null}return w instanceof L.ZR?I.credentialFromError(w):I.credentialFromResult(w)}function In(w,p){return p.catch(m=>{throw m instanceof L.ZR&&function Ds(w,p){var m;const I=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new bg(w,function Vh(w,p){var m;const I=(0,L.m9)(w),A=p;return ce(p.customData.operationType,I,"argument-error"),ce(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Fa._fromError(I,A)}(w,p));else if(I){const A=Q_(p),O=p;A&&(O.credential=A,O.tenantId=I.tenantId||void 0,O.email=I.email||void 0,O.phoneNumber=I.phoneNumber||void 0)}}(w,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:lf(m),additionalUserInfo:ng(m),user:pa.getOrCreate(A)}})}function Eg(w,p){return il.apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(w,p){const m=yield p;return{verificationId:m.verificationId,confirm:I=>In(w,m.confirm(I))}})).apply(this,arguments)}class bg{constructor(p,m){this.resolver=m,this.auth=function Ys(w){return w.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return In(cf(this.auth),this.resolver.resolveSignIn(p))}}class pa{constructor(p){this._delegate=p,this.multiFactor=function jc(w){const p=(0,L.m9)(w);return Ua.has(p)||Ua.set(p,ta._fromUser(p)),Ua.get(p)}(p)}static getOrCreate(p){return pa.USER_MAP.has(p)||pa.USER_MAP.set(p,new pa(p)),pa.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,f.Z)(function*(){return In(m.auth,R_(m._delegate,p))})()}linkWithPhoneNumber(p,m){var I=this;return(0,f.Z)(function*(){return Eg(I.auth,function Er(w,p,m){return ft.apply(this,arguments)}(I._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,f.Z)(function*(){return In(m.auth,function K(w,p,m){return fn.apply(this,arguments)}(m._delegate,p,Pi))})()}linkWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield pi(Jn(m.auth)),br(m._delegate,p,Pi)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,f.Z)(function*(){return In(m.auth,N_(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Eg(this.auth,function To(w,p,m){return Et.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return In(this.auth,function xu(w,p,m){return ur.apply(this,arguments)}(this._delegate,p,Pi))}reauthenticateWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield pi(Jn(m.auth)),Ao(m._delegate,p,Pi)})()}sendEmailVerification(p){return function kc(w,p){return ka.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,f.Z)(function*(){return yield function Yo(w,p){return Si.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Nh(w,p){return tg((0,L.m9)(w),p,null)}(this._delegate,p)}updatePassword(p){return function kh(w,p){return tg((0,L.m9)(w),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ar(w,p){return tr.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function G0(w,p){return Lc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function od(w,p,m){return Co.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pa.USER_MAP=new WeakMap;const Xa=ce;let Nd=(()=>{class w{constructor(m,I){if(this.app=m,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Xa(A,"invalid-api-key",{appName:m.name}),Xa(A,"invalid-api-key",{appName:m.name});const O=typeof window<"u"?Pi:void 0;this._delegate=I.initialize({options:{persistence:Oo(A,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,I){!function ci(w,p,m){const I=Jn(w);ce(I._canInitEmulator,I,"emulator-config-failed"),ce(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const A=!!m?.disableWarnings,O=Sa(p),{host:H,port:X}=function Kl(w){const p=Sa(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const O=A[1];return{host:O,port:bh(I.substr(O.length+1))}}{const[O,H]=I.split(":");return{host:O,port:bh(H)}}}(p);I.config.emulator={url:`${O}//${H}${null===X?"":`:${X}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:H,port:X,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function M_(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,m,I)}applyActionCode(m){return function Oh(w,p){return Yr.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Mc(this._delegate,m)}confirmPasswordReset(m,I){return function Qo(w,p,m){return Pc.apply(this,arguments)}(this._delegate,m,I)}createUserWithEmailAndPassword(m,I){var A=this;return(0,f.Z)(function*(){return In(A._delegate,function Qp(w,p,m){return xc.apply(this,arguments)}(A._delegate,m,I))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function xh(w,p){return Rh.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Xp(w,p){const m=Pn.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){Xa(Cg(),m._delegate,"operation-not-supported-in-this-environment");const I=yield function vs(w,p){return nr.apply(this,arguments)}(m._delegate,Pi);return I?In(m._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function pn(w,p){Jn(w)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,I,A){const{next:O,error:H,complete:X}=Tg(m,I,A);return this._delegate.onAuthStateChanged(O,H,X)}onIdTokenChanged(m,I,A){const{next:O,error:H,complete:X}=Tg(m,I,A);return this._delegate.onIdTokenChanged(O,H,X)}sendSignInLinkToEmail(m,I){return function Xo(w,p,m){return Wn.apply(this,arguments)}(this._delegate,m,I)}sendPasswordResetEmail(m,I){return function $0(w,p,m){return Tu.apply(this,arguments)}(this._delegate,m,I||void 0)}setPersistence(m){var I=this;return(0,f.Z)(function*(){let A;switch(function tw(w,p){Bu(Object.values(os).includes(p),w,"invalid-persistence-type"),(0,L.b$)()?Bu(p!==os.SESSION,w,"unsupported-persistence-type"):(0,L.UG)()?Bu(p===os.NONE,w,"unsupported-persistence-type"):Ig()?Bu(p===os.NONE||p===os.LOCAL&&(0,L.hl)(),w,"unsupported-persistence-type"):Bu(p===os.NONE||K_(),w,"unsupported-persistence-type")}(I._delegate,m),m){case os.SESSION:A=ra;break;case os.LOCAL:A=(yield Yn(sa)._isAvailable())?sa:na;break;case os.NONE:A=Ni;break;default:return Ce("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return In(this._delegate,function Nr(w){return Zp.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return In(this._delegate,nd(this._delegate,m))}signInWithCustomToken(m){return In(this._delegate,function Mh(w,p){return Ws.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,I){return In(this._delegate,function ms(w,p,m){return nd((0,L.m9)(w),Wo.credential(p,m))}(this._delegate,m,I))}signInWithEmailLink(m,I){return In(this._delegate,function Qr(w,p,m){return Rc.apply(this,arguments)}(this._delegate,m,I))}signInWithPhoneNumber(m,I){return Eg(this._delegate,function er(w,p,m){return _s.apply(this,arguments)}(this._delegate,m,I))}signInWithPopup(m){var I=this;return(0,f.Z)(function*(){return Xa(Cg(),I._delegate,"operation-not-supported-in-this-environment"),In(I._delegate,function on(w,p,m){return V_.apply(this,arguments)}(I._delegate,m,Pi))})()}signInWithRedirect(m){var I=this;return(0,f.Z)(function*(){return Xa(Cg(),I._delegate,"operation-not-supported-in-this-environment"),yield pi(I._delegate),Ru(I._delegate,m,Pi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function sd(w,p){return Na.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=os,w})();function Tg(w,p,m){let I=w;"function"!=typeof w&&({next:I,error:p,complete:m}=w);const A=I;return{next:H=>A(H&&pa.getOrCreate(H)),error:p,complete:m}}function Oo(w,p){const m=function Qa(w,p){const m=qt();if(!m)return[];const I=$(Y_,w,p);switch(m.getItem(I)){case os.NONE:return[Ni];case os.LOCAL:return[sa,ra];case os.SESSION:return[ra];default:return[]}}(w,p);if(typeof self<"u"&&!m.includes(sa)&&m.push(sa),typeof window<"u")for(const I of[na,ra])m.includes(I)||m.push(I);return m.includes(Ni)||m.push(Ni),m}class df{constructor(){this.providerId="phone",this._delegate=new oa(cf(ee.Z.auth()))}static credential(p,m){return oa.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}df.PHONE_SIGN_IN_METHOD=oa.PHONE_SIGN_IN_METHOD,df.PROVIDER_ID=oa.PROVIDER_ID;const X_=ce;class J_{constructor(p,m,I=ee.Z.app()){var A;X_(null===(A=I.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Wh(p,m,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ty(w){w.INTERNAL.registerComponent(new we.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),I=p.getProvider("auth");return new Nd(m,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wo,FacebookAuthProvider:wo,GithubAuthProvider:Tc,GoogleAuthProvider:Ui,OAuthProvider:qs,SAMLAuthProvider:Ma,PhoneAuthProvider:df,PhoneMultiFactorGenerator:W0,RecaptchaVerifier:J_,TwitterAuthProvider:Dc,Auth:Nd,AuthCredential:zo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},3106:(ht,Se,k)=>{k.d(Se,{Z:()=>Ye});var f=k(9058),ee=k(4537),L=k(534),te=k(7879);class se{constructor(qe,Fe){this._delegate=qe,this.firebase=Fe,(0,L._addComponent)(qe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(qe,Fe=L._DEFAULT_ENTRY_NAME){var vt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(qe);return!pt.isInitialized()&&"EXPLICIT"===(null===(vt=pt.getComponent())||void 0===vt?void 0:vt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Fe})}_removeServiceInstance(qe,Fe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Fe)}_addComponent(qe){(0,L._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,L._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function me(){const Ne=function ke(Ne){const qe={},Fe={__esModule:!0,initializeApp:function ie(Le,Ze={}){const ce=L.initializeApp(Le,Ze);if((0,f.r3)(qe,ce.name))return qe[ce.name];const It=new Ne(ce,Fe);return qe[ce.name]=It,It},app:pt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function ne(Le){const Ze=Le.name,ce=Ze.replace("-compat","");if(L._registerComponent(Le)&&"PUBLIC"===Le.type){const It=($t=pt())=>{if("function"!=typeof $t[ce])throw we.create("invalid-app-argument",{appName:Ze});return $t[ce]()};void 0!==Le.serviceProps&&(0,f.ZB)(It,Le.serviceProps),Fe[ce]=It,Ne.prototype[ce]=function(...$t){return this._getService.bind(this,Ze).apply(this,Le.multipleInstances?$t:[])}}return"PUBLIC"===Le.type?Fe[ce]:null},removeApp:function vt(Le){delete qe[Le]},useAsService:function Ae(Le,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:L}};function pt(Le){if(!(0,f.r3)(qe,Le=Le||L._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Le});return qe[Le]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Ce(){return Object.keys(qe).map(Le=>qe[Le])}}),pt.App=Ne,Fe}(se);return Ne.INTERNAL=Object.assign(Object.assign({},Ne.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function qe(Fe){(0,f.ZB)(Ne,Fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ne}(),z=new te.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=B;!function Oe(Ne){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ne)}()},534:(ht,Se,k)=>{k.r(Se),k.d(Se,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>mo,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>Rn,_addOrOverwriteComponent:()=>oi,_apps:()=>Pt,_clearComponents:()=>tn,_components:()=>gn,_getProvider:()=>Mr,_registerComponent:()=>an,_removeServiceInstance:()=>Ta,deleteApp:()=>Yi,getApp:()=>xi,getApps:()=>yo,initializeApp:()=>_o,onLog:()=>ui,registerVersion:()=>gr,setLogLevel:()=>Yn});var f=k(5861),ee=k(4537),L=k(7879),te=k(9058);const se=(fe,re)=>re.some(Re=>fe instanceof Re);let _e,we;const B=new WeakMap,z=new WeakMap,J=new WeakMap,Ve=new WeakMap,Oe=new WeakMap;let qe={get(fe,re,Re){if(fe instanceof IDBTransaction){if("done"===re)return z.get(fe);if("objectStoreNames"===re)return fe.objectStoreNames||J.get(fe);if("store"===re)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return ie(fe[re])},set:(fe,re,Re)=>(fe[re]=Re,!0),has:(fe,re)=>fe instanceof IDBTransaction&&("done"===re||"store"===re)||re in fe};function pt(fe){return"function"==typeof fe?function vt(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...re){return fe.apply(Ce(this),re),ie(B.get(this))}:function(...re){return ie(fe.apply(Ce(this),re))}:function(re,...Re){const at=fe.call(Ce(this),re,...Re);return J.set(at,re.sort?re.sort():[re]),ie(at)}}(fe):(fe instanceof IDBTransaction&&function Ne(fe){if(z.has(fe))return;const re=new Promise((Re,at)=>{const Ke=()=>{fe.removeEventListener("complete",kt),fe.removeEventListener("error",nn),fe.removeEventListener("abort",nn)},kt=()=>{Re(),Ke()},nn=()=>{at(fe.error||new DOMException("AbortError","AbortError")),Ke()};fe.addEventListener("complete",kt),fe.addEventListener("error",nn),fe.addEventListener("abort",nn)});z.set(fe,re)}(fe),se(fe,function ke(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,qe):fe)}function ie(fe){if(fe instanceof IDBRequest)return function Ye(fe){const re=new Promise((Re,at)=>{const Ke=()=>{fe.removeEventListener("success",kt),fe.removeEventListener("error",nn)},kt=()=>{Re(ie(fe.result)),Ke()},nn=()=>{at(fe.error),Ke()};fe.addEventListener("success",kt),fe.addEventListener("error",nn)});return re.then(Re=>{Re instanceof IDBCursor&&B.set(Re,fe)}).catch(()=>{}),Oe.set(re,fe),re}(fe);if(Ve.has(fe))return Ve.get(fe);const re=pt(fe);return re!==fe&&(Ve.set(fe,re),Oe.set(re,fe)),re}const Ce=fe=>Oe.get(fe),Le=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],ce=new Map;function It(fe,re){if(!(fe instanceof IDBDatabase)||re in fe||"string"!=typeof re)return;if(ce.get(re))return ce.get(re);const Re=re.replace(/FromIndex$/,""),at=re!==Re,Ke=Ze.includes(Re);if(!(Re in(at?IDBIndex:IDBObjectStore).prototype)||!Ke&&!Le.includes(Re))return;const kt=function(){var nn=(0,f.Z)(function*(Qn,...Xn){const Or=this.transaction(Qn,Ke?"readwrite":"readonly");let gs=Or.store;return at&&(gs=gs.index(Xn.shift())),(yield Promise.all([gs[Re](...Xn),Ke&&Or.done]))[0]});return function(Xn){return nn.apply(this,arguments)}}();return ce.set(re,kt),kt}!function Fe(fe){qe=fe(qe)}(fe=>({...fe,get:(re,Re,at)=>It(re,Re)||fe.get(re,Re,at),has:(re,Re)=>!!It(re,Re)||fe.has(re,Re)}));class $t{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function Pr(fe){const re=fe.getComponent();return"VERSION"===re?.type}(Re)){const at=Re.getImmediate();return`${at.library}/${at.version}`}return null}).filter(Re=>Re).join(" ")}}const si="@firebase/app",Kn=new L.Yd("@firebase/app"),mt="[DEFAULT]",Gt={[si]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,gn=new Map;function Rn(fe,re){try{fe.container.addComponent(re)}catch(Re){Kn.debug(`Component ${re.name} failed to register with FirebaseApp ${fe.name}`,Re)}}function oi(fe,re){fe.container.addOrOverwriteComponent(re)}function an(fe){const re=fe.name;if(gn.has(re))return Kn.debug(`There were multiple attempts to register component ${re}.`),!1;gn.set(re,fe);for(const Re of Pt.values())Rn(Re,fe);return!0}function Mr(fe,re){const Re=fe.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),fe.container.getProvider(re)}function Ta(fe,re,Re=mt){Mr(fe,re).clearInstance(Re)}function tn(){gn.clear()}const jt=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fs{constructor(re,Re,at){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const mo="9.23.0";function _o(fe,re={}){let Re=fe;"object"!=typeof re&&(re={name:re});const at=Object.assign({name:mt,automaticDataCollectionEnabled:!1},re),Ke=at.name;if("string"!=typeof Ke||!Ke)throw jt.create("bad-app-name",{appName:String(Ke)});if(Re||(Re=(0,te.aH)()),!Re)throw jt.create("no-options");const kt=Pt.get(Ke);if(kt){if((0,te.vZ)(Re,kt.options)&&(0,te.vZ)(at,kt.config))return kt;throw jt.create("duplicate-app",{appName:Ke})}const nn=new ee.H0(Ke);for(const Xn of gn.values())nn.addComponent(Xn);const Qn=new fs(Re,at,nn);return Pt.set(Ke,Qn),Qn}function xi(fe=mt){const re=Pt.get(fe);if(!re&&fe===mt&&(0,te.aH)())return _o();if(!re)throw jt.create("no-app",{appName:fe});return re}function yo(){return Array.from(Pt.values())}function Yi(fe){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(fe){const re=fe.name;Pt.has(re)&&(Pt.delete(re),yield Promise.all(fe.container.getProviders().map(Re=>Re.delete())),fe.isDeleted=!0)})).apply(this,arguments)}function gr(fe,re,Re){var at;let Ke=null!==(at=Gt[fe])&&void 0!==at?at:fe;Re&&(Ke+=`-${Re}`);const kt=Ke.match(/\s|\//),nn=re.match(/\s|\//);if(kt||nn){const Qn=[`Unable to register library "${Ke}" with version "${re}":`];return kt&&Qn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),kt&&nn&&Qn.push("and"),nn&&Qn.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void Kn.warn(Qn.join(" "))}an(new ee.wA(`${Ke}-version`,()=>({library:Ke,version:re}),"VERSION"))}function ui(fe,re){if(null!==fe&&"function"!=typeof fe)throw jt.create("invalid-log-argument");(0,L.Am)(fe,re)}function Yn(fe){(0,L.Ub)(fe)}const Ri="firebase-heartbeat-database",Ni=1,$="firebase-heartbeat-store";let j=null;function Z(){return j||(j=function ne(fe,re,{blocked:Re,upgrade:at,blocking:Ke,terminated:kt}={}){const nn=indexedDB.open(fe,re),Qn=ie(nn);return at&&nn.addEventListener("upgradeneeded",Xn=>{at(ie(nn.result),Xn.oldVersion,Xn.newVersion,ie(nn.transaction),Xn)}),Re&&nn.addEventListener("blocked",Xn=>Re(Xn.oldVersion,Xn.newVersion,Xn)),Qn.then(Xn=>{kt&&Xn.addEventListener("close",()=>kt()),Ke&&Xn.addEventListener("versionchange",Or=>Ke(Or.oldVersion,Or.newVersion,Or))}).catch(()=>{}),Qn}(Ri,Ni,{upgrade:(fe,re)=>{0===re&&fe.createObjectStore($)}}).catch(fe=>{throw jt.create("idb-open",{originalErrorMessage:fe.message})})),j}function ae(){return(ae=(0,f.Z)(function*(fe){try{return yield(yield Z()).transaction($).objectStore($).get(bt(fe))}catch(re){if(re instanceof te.ZR)Kn.warn(re.message);else{const Re=jt.create("idb-get",{originalErrorMessage:re?.message});Kn.warn(Re.message)}}})).apply(this,arguments)}function et(fe,re){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(fe,re){try{const at=(yield Z()).transaction($,"readwrite");yield at.objectStore($).put(re,bt(fe)),yield at.done}catch(Re){if(Re instanceof te.ZR)Kn.warn(Re.message);else{const at=jt.create("idb-set",{originalErrorMessage:Re?.message});Kn.warn(at.message)}}})).apply(this,arguments)}function bt(fe){return`${fe.name}!${fe.options.appId}`}class Bn{constructor(re){this.container=re,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new ps(Re),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var re=this;return(0,f.Z)(function*(){const at=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=Kt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!re._heartbeatsCache.heartbeats.some(kt=>kt.date===Ke))return re._heartbeatsCache.heartbeats.push({date:Ke,agent:at}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(kt=>{const nn=new Date(kt.date).valueOf();return Date.now()-nn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,f.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Re=Kt(),{heartbeatsToSend:at,unsentEntries:Ke}=function sr(fe,re=1024){const Re=[];let at=fe.slice();for(const Ke of fe){const kt=Re.find(nn=>nn.agent===Ke.agent);if(kt){if(kt.dates.push(Ke.date),Hs(Re)>re){kt.dates.pop();break}}else if(Re.push({agent:Ke.agent,dates:[Ke.date]}),Hs(Re)>re){Re.pop();break}at=at.slice(1)}return{heartbeatsToSend:Re,unsentEntries:at}}(re._heartbeatsCache.heartbeats),kt=(0,te.L)(JSON.stringify({version:2,heartbeats:at}));return re._heartbeatsCache.lastSentHeartbeatDate=Re,Ke.length>0?(re._heartbeatsCache.heartbeats=Ke,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),kt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class ps{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,f.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function Te(fe){return ae.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Re=this;return(0,f.Z)(function*(){var at;if(yield Re._canUseIndexedDBPromise){const kt=yield Re.read();return et(Re.app,{lastSentHeartbeatDate:null!==(at=re.lastSentHeartbeatDate)&&void 0!==at?at:kt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Re=this;return(0,f.Z)(function*(){var at;if(yield Re._canUseIndexedDBPromise){const kt=yield Re.read();return et(Re.app,{lastSentHeartbeatDate:null!==(at=re.lastSentHeartbeatDate)&&void 0!==at?at:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...re.heartbeats]})}})()}}function Hs(fe){return(0,te.L)(JSON.stringify({version:2,heartbeats:fe})).length}!function _u(fe){an(new ee.wA("platform-logger",re=>new $t(re),"PRIVATE")),an(new ee.wA("heartbeat",re=>new Bn(re),"PRIVATE")),gr(si,"0.9.13",fe),gr(si,"0.9.13","esm2017"),gr("fire-js","")}("")},4537:(ht,Se,k)=>{k.d(Se,{H0:()=>ke,wA:()=>L,zt:()=>se});var f=k(5861),ee=k(9058);class L{constructor(B,z,J){this.name=B,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const te="[DEFAULT]";class se{constructor(B,z){this.name=B,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const z=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(z)){const J=new ee.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:z});Ve&&J.resolve(Ve)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(B){var z;const J=this.normalizeInstanceIdentifier(B?.identifier),Ve=null!==(z=B?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if(Ve)return null;throw Oe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function we(me){return"EAGER"===me.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(z);try{const Oe=this.getOrInitializeService({instanceIdentifier:Ve});J.resolve(Oe)}catch{}}}}clearInstance(B=te){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,f.Z)(function*(){const z=Array.from(B.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=te){return this.instances.has(B)}getOptions(B=te){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:z={}}=B,J=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Oe,Ye]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&Ye.resolve(Ve);return Ve}onInit(B,z){var J;const Ve=this.normalizeInstanceIdentifier(z),Oe=null!==(J=this.onInitCallbacks.get(Ve))&&void 0!==J?J:new Set;Oe.add(B),this.onInitCallbacks.set(Ve,Oe);const Ye=this.instances.get(Ve);return Ye&&B(Ye,Ve),()=>{Oe.delete(B)}}invokeOnInitCallbacks(B,z){const J=this.onInitCallbacks.get(z);if(J)for(const Ve of J)try{Ve(B,z)}catch{}}getOrInitializeService({instanceIdentifier:B,options:z={}}){let J=this.instances.get(B);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(me=B,me===te?void 0:me),options:z}),this.instances.set(B,J),this.instancesOptions.set(B,z),this.invokeOnInitCallbacks(J,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,J)}catch{}var me;return J||null}normalizeInstanceIdentifier(B=te){return this.component?this.component.multipleInstances?B:te:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ke{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const z=this.getProvider(B.name);if(z.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);z.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const z=new se(B,this);return this.providers.set(B,z),z}getProviders(){return Array.from(this.providers.values())}}},7879:(ht,Se,k)=>{k.d(Se,{Am:()=>me,Ub:()=>ke,Yd:()=>we,in:()=>ee});const f=[];var ee=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(ee||{});const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},te=ee.INFO,se={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=(B,z,...J)=>{if(z<B.logLevel)return;const Ve=(new Date).toISOString(),Oe=se[z];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Oe](`[${Ve}]  ${B.name}:`,...J)};class we{constructor(z){this.name=z,this._logLevel=te,this._logHandler=_e,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in ee))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...z),this._logHandler(this,ee.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...z),this._logHandler(this,ee.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...z),this._logHandler(this,ee.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...z),this._logHandler(this,ee.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...z),this._logHandler(this,ee.ERROR,...z)}}function ke(B){f.forEach(z=>{z.setLogLevel(B)})}function me(B,z){for(const J of f){let Ve=null;z&&z.level&&(Ve=L[z.level]),J.userLogHandler=null===B?null:(Oe,Ye,...Ne)=>{const qe=Ne.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Ye>=(Ve??Oe.logLevel)&&B({level:ee[Ye].toLowerCase(),message:qe,args:Ne,type:Oe.name})}}}},5861:(ht,Se,k)=>{function f(L,te,se,_e,we,ke,me){try{var B=L[ke](me),z=B.value}catch(J){return void se(J)}B.done?te(z):Promise.resolve(z).then(_e,we)}function ee(L){return function(){var te=this,se=arguments;return new Promise(function(_e,we){var ke=L.apply(te,se);function me(z){f(ke,_e,we,me,B,"next",z)}function B(z){f(ke,_e,we,me,B,"throw",z)}me(void 0)})}}k.d(Se,{Z:()=>ee})},7582:(ht,Se,k)=>{function te(le,ge){var Ee={};for(var be in le)Object.prototype.hasOwnProperty.call(le,be)&&ge.indexOf(be)<0&&(Ee[be]=le[be]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(be=Object.getOwnPropertySymbols(le);De<be.length;De++)ge.indexOf(be[De])<0&&Object.prototype.propertyIsEnumerable.call(le,be[De])&&(Ee[be[De]]=le[be[De]])}return Ee}function J(le,ge,Ee,be){return new(Ee||(Ee=Promise))(function(Pe,st){function Ge(en){try{gt(be.next(en))}catch(Nt){st(Nt)}}function Vn(en){try{gt(be.throw(en))}catch(Nt){st(Nt)}}function gt(en){en.done?Pe(en.value):function De(Pe){return Pe instanceof Ee?Pe:new Ee(function(st){st(Pe)})}(en.value).then(Ge,Vn)}gt((be=be.apply(le,ge||[])).next())})}function ie(le){return this instanceof ie?(this.v=le,this):new ie(le)}function Ce(le,ge,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,be=Ee.apply(le,ge||[]),Pe=[];return De={},st("next"),st("throw"),st("return"),De[Symbol.asyncIterator]=function(){return this},De;function st(Dn){be[Dn]&&(De[Dn]=function(Sn){return new Promise(function(fr,ln){Pe.push([Dn,Sn,fr,ln])>1||Ge(Dn,Sn)})})}function Ge(Dn,Sn){try{!function Vn(Dn){Dn.value instanceof ie?Promise.resolve(Dn.value.v).then(gt,en):Nt(Pe[0][2],Dn)}(be[Dn](Sn))}catch(fr){Nt(Pe[0][3],fr)}}function gt(Dn){Ge("next",Dn)}function en(Dn){Ge("throw",Dn)}function Nt(Dn,Sn){Dn(Sn),Pe.shift(),Pe.length&&Ge(Pe[0][0],Pe[0][1])}}function Ae(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ge=le[Symbol.asyncIterator];return ge?ge.call(le):(le=function Ne(le){var ge="function"==typeof Symbol&&Symbol.iterator,Ee=ge&&le[ge],be=0;if(Ee)return Ee.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&be>=le.length&&(le=void 0),{value:le&&le[be++],done:!le}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),Ee={},be("next"),be("throw"),be("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function be(Pe){Ee[Pe]=le[Pe]&&function(st){return new Promise(function(Ge,Vn){!function De(Pe,st,Ge,Vn){Promise.resolve(Vn).then(function(gt){Pe({value:gt,done:Ge})},st)}(Ge,Vn,(st=le[Pe](st)).done,st.value)})}}}k.d(Se,{FC:()=>Ce,KL:()=>Ae,_T:()=>te,mG:()=>J,qq:()=>ie}),"function"==typeof SuppressedError&&SuppressedError}},ht=>{ht(ht.s=6062)}]);